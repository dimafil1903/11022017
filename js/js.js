/* Modernizr 2.6.2 (Custom Build) | MIT & BSD
 * Build: http://modernizr.com/download/#-borderradius-boxshadow-opacity-input-inputtypes-cssclasses-testprop-testallprops-prefixes-domprefixes-forms_placeholder
 */
;window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function A(a,b){return z(n.join(a+";")+(b||""))}function B(a,b){return typeof a===b}function C(a,b){return!!~(""+a).indexOf(b)}function D(a,b){for(var d in a){var e=a[d];if(!C(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:B(f,"function")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return B(b,"string")||B(b,"undefined")?D(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),E(e,b,c))}function G(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)t[c[d]]=c[d]in k;return t.list&&(t.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),t}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:e=k.value!=l)),s[a[d]]=!!e;return s}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={},s={},t={},u=[],v=u.slice,w,x={}.hasOwnProperty,y;!B(x,"undefined")&&!B(x.call,"undefined")?y=function(a,b){return x.call(a,b)}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=v.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(v.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(v.call(arguments)))};return e}),r.borderradius=function(){return F("borderRadius")},r.boxshadow=function(){return F("boxShadow")},r.opacity=function(){return A("opacity:.55"),/^0.55$/.test(j.opacity)};for(var H in r)y(r,H)&&(w=H.toLowerCase(),e[w]=r[H](),u.push((e[w]?"":"no-")+w));return e.input||G(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)y(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},z(""),i=k=null,e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.testProp=function(a){return D([a])},e.testAllProps=F,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+u.join(" "):""),e}(this,this.document),Modernizr.addTest("placeholder",function(){return"placeholder"in(Modernizr.input||document.createElement("input"))&&"placeholder"in(Modernizr.textarea||document.createElement("textarea"))});



/**
 * Masked Input plugin for jQuery
 * Copyright (c) 2007-2011 Josh Bush (digitalbush.com)
 * Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
 * Version: 1.3
 */
;(function(a){var b=(a.browser.msie?"paste":"input")+".mask",c=window.orientation!=undefined;a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"},a.fn.extend({caret:function(a,b){if(this.length!=0){if(typeof a=="number"){b=typeof b=="number"?b:a;return this.each(function(){if(this.setSelectionRange)this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select()}})}if(this[0].setSelectionRange)a=this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length}return{begin:a,end:b}}},unmask:function(){return this.trigger("unmask")},mask:function(d,e){if(!d&&this.length>0){var f=a(this[0]);return f.data(a.mask.dataName)()}e=a.extend({placeholder:"_",completed:null},e);var g=a.mask.definitions,h=[],i=d.length,j=null,k=d.length;a.each(d.split(""),function(a,b){b=="?"?(k--,i=a):g[b]?(h.push(new RegExp(g[b])),j==null&&(j=h.length-1)):h.push(null)});return this.trigger("unmask").each(function(){function v(a){var b=f.val(),c=-1;for(var d=0,g=0;d<k;d++)if(h[d]){l[d]=e.placeholder;while(g++<b.length){var m=b.charAt(g-1);if(h[d].test(m)){l[d]=m,c=d;break}}if(g>b.length)break}else l[d]==b.charAt(g)&&d!=i&&(g++,c=d);if(!a&&c+1<i)f.val(""),t(0,k);else if(a||c+1>=i)u(),a||f.val(f.val().substring(0,c+1));return i?d:j}function u(){return f.val(l.join("")).val()}function t(a,b){for(var c=a;c<b&&c<k;c++)h[c]&&(l[c]=e.placeholder)}function s(a){var b=a.which,c=f.caret();if(a.ctrlKey||a.altKey||a.metaKey||b<32)return!0;if(b){c.end-c.begin!=0&&(t(c.begin,c.end),p(c.begin,c.end-1));var d=n(c.begin-1);if(d<k){var g=String.fromCharCode(b);if(h[d].test(g)){q(d),l[d]=g,u();var i=n(d);f.caret(i),e.completed&&i>=k&&e.completed.call(f)}}return!1}}function r(a){var b=a.which;if(b==8||b==46||c&&b==127){var d=f.caret(),e=d.begin,g=d.end;g-e==0&&(e=b!=46?o(e):g=n(e-1),g=b==46?n(g):g),t(e,g),p(e,g-1);return!1}if(b==27){f.val(m),f.caret(0,v());return!1}}function q(a){for(var b=a,c=e.placeholder;b<k;b++)if(h[b]){var d=n(b),f=l[b];l[b]=c;if(d<k&&h[d].test(f))c=f;else break}}function p(a,b){if(!(a<0)){for(var c=a,d=n(b);c<k;c++)if(h[c]){if(d<k&&h[c].test(l[d]))l[c]=l[d],l[d]=e.placeholder;else break;d=n(d)}u(),f.caret(Math.max(j,a))}}function o(a){while(--a>=0&&!h[a]){}return a}function n(a){while(++a<=k&&!h[a]){}return a}var f=a(this),l=a.map(d.split(""),function(a,b){if(a!="?")return g[a]?e.placeholder:a}),m=f.val();f.data(a.mask.dataName,function(){return a.map(l,function(a,b){return h[b]&&a!=e.placeholder?a:null}).join("")}),f.attr("readonly")||f.one("unmask",function(){f.unbind(".mask").removeData(a.mask.dataName)}).bind("focus.mask",function(){m=f.val();var b=v();u();var c=function(){b==d.length?f.caret(0,b):f.caret(b)};(a.browser.msie?c:function(){setTimeout(c,0)})()}).bind("blur.mask",function(){v(),f.val()!=m&&f.change()}).bind("keydown.mask",r).bind("keypress.mask",s).bind(b,function(){setTimeout(function(){f.caret(v(!0))},0)}),v()})}})})(jQuery);



//! moment.js
//! version : 2.8.3
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(a,b){return zb.call(a,b)}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(a){tb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function f(a,b){var c=!0;return m(function(){return c&&(e(a),c=!1),b.apply(this,arguments)},b)}function g(a,b){qc[a]||(e(b),qc[a]=!0)}function h(a,b){return function(c){return p(a.call(this,c),b)}}function i(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function j(){}function k(a,b){b!==!1&&F(a),n(this,a),this._d=new Date(+a._d)}function l(a){var b=y(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=tb.localeData(),this._bubble()}function m(a,b){for(var d in b)c(b,d)&&(a[d]=b[d]);return c(b,"toString")&&(a.toString=b.toString),c(b,"valueOf")&&(a.valueOf=b.valueOf),a}function n(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Ib.length>0)for(c in Ib)d=Ib[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function o(a){return 0>a?Math.ceil(a):Math.floor(a)}function p(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function q(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function r(a,b){var c;return b=K(b,a),a.isBefore(b)?c=q(a,b):(c=q(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function s(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(g(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=tb.duration(c,d),t(this,e,a),this}}function t(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&nb(a,"Date",mb(a,"Date")+f*c),g&&lb(a,mb(a,"Month")+g*c),d&&tb.updateOffset(a,f||g)}function u(a){return"[object Array]"===Object.prototype.toString.call(a)}function v(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function w(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&A(a[d])!==A(b[d]))&&g++;return g+f}function x(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=jc[a]||kc[b]||b}return a}function y(a){var b,d,e={};for(d in a)c(a,d)&&(b=x(d),b&&(e[b]=a[d]));return e}function z(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}tb[b]=function(e,f){var g,h,i=tb._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=tb().utc().set(d,a);return i.call(tb._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function A(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function B(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function C(a,b,c){return hb(tb([a,11,31+b-c]),b,c).week}function D(a){return E(a)?366:365}function E(a){return a%4===0&&a%100!==0||a%400===0}function F(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Bb]<0||a._a[Bb]>11?Bb:a._a[Cb]<1||a._a[Cb]>B(a._a[Ab],a._a[Bb])?Cb:a._a[Db]<0||a._a[Db]>23?Db:a._a[Eb]<0||a._a[Eb]>59?Eb:a._a[Fb]<0||a._a[Fb]>59?Fb:a._a[Gb]<0||a._a[Gb]>999?Gb:-1,a._pf._overflowDayOfYear&&(Ab>b||b>Cb)&&(b=Cb),a._pf.overflow=b)}function G(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function H(a){return a?a.toLowerCase().replace("_","-"):a}function I(a){for(var b,c,d,e,f=0;f<a.length;){for(e=H(a[f]).split("-"),b=e.length,c=H(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=J(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&w(e,c,!0)>=b-1)break;b--}f++}return null}function J(a){var b=null;if(!Hb[a]&&Jb)try{b=tb.locale(),require("./locale/"+a),tb.locale(b)}catch(c){}return Hb[a]}function K(a,b){return b._isUTC?tb(a).zone(b._offset||0):tb(a).local()}function L(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a){var b,c,d=a.match(Nb);for(b=0,c=d.length;c>b;b++)d[b]=pc[d[b]]?pc[d[b]]:L(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function N(a,b){return a.isValid()?(b=O(b,a.localeData()),lc[b]||(lc[b]=M(b)),lc[b](a)):a.localeData().invalidDate()}function O(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Ob.lastIndex=0;d>=0&&Ob.test(a);)a=a.replace(Ob,c),Ob.lastIndex=0,d-=1;return a}function P(a,b){var c,d=b._strict;switch(a){case"Q":return Zb;case"DDDD":return _b;case"YYYY":case"GGGG":case"gggg":return d?ac:Rb;case"Y":case"G":case"g":return cc;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?bc:Sb;case"S":if(d)return Zb;case"SS":if(d)return $b;case"SSS":if(d)return _b;case"DDD":return Qb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ub;case"a":case"A":return b._locale._meridiemParse;case"X":return Xb;case"Z":case"ZZ":return Vb;case"T":return Wb;case"SSSS":return Tb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?$b:Pb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pb;case"Do":return Yb;default:return c=new RegExp(Y(X(a.replace("\\","")),"i"))}}function Q(a){a=a||"";var b=a.match(Vb)||[],c=b[b.length-1]||[],d=(c+"").match(hc)||["-",0,0],e=+(60*d[1])+A(d[2]);return"+"===d[0]?-e:e}function R(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Bb]=3*(A(b)-1));break;case"M":case"MM":null!=b&&(e[Bb]=A(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b),null!=d?e[Bb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Cb]=A(b));break;case"Do":null!=b&&(e[Cb]=A(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=A(b));break;case"YY":e[Ab]=tb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Ab]=A(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"H":case"HH":case"h":case"hh":e[Db]=A(b);break;case"m":case"mm":e[Eb]=A(b);break;case"s":case"ss":e[Fb]=A(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Gb]=A(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=Q(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=A(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=tb.parseTwoDigitYear(b)}}function S(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[Ab],hb(tb(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[Ab],hb(tb(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=ib(d,e,f,h,g),a._a[Ab]=i.year,a._dayOfYear=i.dayOfYear}function T(a){var c,d,e,f,g=[];if(!a._d){for(e=V(a),a._w&&null==a._a[Cb]&&null==a._a[Bb]&&S(a),a._dayOfYear&&(f=b(a._a[Ab],e[Ab]),a._dayOfYear>D(f)&&(a._pf._overflowDayOfYear=!0),d=db(f,0,a._dayOfYear),a._a[Bb]=d.getUTCMonth(),a._a[Cb]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];a._d=(a._useUTC?db:cb).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function U(a){var b;a._d||(b=y(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],T(a))}function V(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function W(a){if(a._f===tb.ISO_8601)return void $(a);a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=""+a._i,h=g.length,i=0;for(d=O(a._f,a._locale).match(Nb)||[],b=0;b<d.length;b++)e=d[b],c=(g.match(P(e,a))||[])[0],c&&(f=g.substr(0,g.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),g=g.slice(g.indexOf(c)+c.length),i+=c.length),pc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),R(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=h-i,g.length>0&&a._pf.unusedInput.push(g),a._isPm&&a._a[Db]<12&&(a._a[Db]+=12),a._isPm===!1&&12===a._a[Db]&&(a._a[Db]=0),T(a),F(a)}function X(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function Y(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(a){var b,c,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=d(),b._f=a._f[f],W(b),G(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,c=b));m(a,c||b)}function $(a){var b,c,d=a._i,e=dc.exec(d);if(e){for(a._pf.iso=!0,b=0,c=fc.length;c>b;b++)if(fc[b][1].exec(d)){a._f=fc[b][0]+(e[6]||" ");break}for(b=0,c=gc.length;c>b;b++)if(gc[b][1].exec(d)){a._f+=gc[b][0];break}d.match(Vb)&&(a._f+="Z"),W(a)}else a._isValid=!1}function _(a){$(a),a._isValid===!1&&(delete a._isValid,tb.createFromInputFallback(a))}function ab(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function bb(b){var c,d=b._i;d===a?b._d=new Date:v(d)?b._d=new Date(+d):null!==(c=Kb.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?_(b):u(d)?(b._a=ab(d.slice(0),function(a){return parseInt(a,10)}),T(b)):"object"==typeof d?U(b):"number"==typeof d?b._d=new Date(d):tb.createFromInputFallback(b)}function cb(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function db(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function eb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function fb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function gb(a,b,c){var d=tb.duration(a).abs(),e=yb(d.as("s")),f=yb(d.as("m")),g=yb(d.as("h")),h=yb(d.as("d")),i=yb(d.as("M")),j=yb(d.as("y")),k=e<mc.s&&["s",e]||1===f&&["m"]||f<mc.m&&["mm",f]||1===g&&["h"]||g<mc.h&&["hh",g]||1===h&&["d"]||h<mc.d&&["dd",h]||1===i&&["M"]||i<mc.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,fb.apply({},k)}function hb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=tb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ib(a,b,c,d,e){var f,g,h=db(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:D(a-1)+g}}function jb(b){var c=b._i,d=b._f;return b._locale=b._locale||tb.localeData(b._l),null===c||d===a&&""===c?tb.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=b._locale.preparse(c)),tb.isMoment(c)?new k(c,!0):(d?u(d)?Z(b):W(b):bb(b),new k(b)))}function kb(a,b){var c,d;if(1===b.length&&u(b[0])&&(b=b[0]),!b.length)return tb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function lb(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),B(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function mb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function nb(a,b,c){return"Month"===b?lb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function ob(a,b){return function(c){return null!=c?(nb(this,a,c),tb.updateOffset(this,b),this):mb(this,a)}}function pb(a){return 400*a/146097}function qb(a){return 146097*a/400}function rb(a){tb.duration.fn[a]=function(){return this._data[a]}}function sb(a){"undefined"==typeof ender&&(ub=xb.moment,xb.moment=a?f("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",tb):tb)}for(var tb,ub,vb,wb="2.8.3",xb="undefined"!=typeof global?global:this,yb=Math.round,zb=Object.prototype.hasOwnProperty,Ab=0,Bb=1,Cb=2,Db=3,Eb=4,Fb=5,Gb=6,Hb={},Ib=[],Jb="undefined"!=typeof module&&module.exports,Kb=/^\/?Date\((\-?\d+)/i,Lb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Mb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Nb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ob=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Pb=/\d\d?/,Qb=/\d{1,3}/,Rb=/\d{1,4}/,Sb=/[+\-]?\d{1,6}/,Tb=/\d+/,Ub=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Vb=/Z|[\+\-]\d\d:?\d\d/gi,Wb=/T/i,Xb=/[\+\-]?\d+(\.\d{1,3})?/,Yb=/\d{1,2}/,Zb=/\d/,$b=/\d\d/,_b=/\d{3}/,ac=/\d{4}/,bc=/[+-]?\d{6}/,cc=/[+-]?\d+/,dc=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ec="YYYY-MM-DDTHH:mm:ssZ",fc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],gc=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hc=/([\+\-]|\d\d)/gi,ic=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),jc={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},kc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lc={},mc={s:45,m:45,h:22,d:26,M:11},nc="DDD w W M D d".split(" "),oc="M D H h m s w W".split(" "),pc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return p(this.year()%100,2)},YYYY:function(){return p(this.year(),4)},YYYYY:function(){return p(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+p(Math.abs(a),6)},gg:function(){return p(this.weekYear()%100,2)},gggg:function(){return p(this.weekYear(),4)},ggggg:function(){return p(this.weekYear(),5)},GG:function(){return p(this.isoWeekYear()%100,2)},GGGG:function(){return p(this.isoWeekYear(),4)},GGGGG:function(){return p(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return A(this.milliseconds()/100)},SS:function(){return p(A(this.milliseconds()/10),2)},SSS:function(){return p(this.milliseconds(),3)},SSSS:function(){return p(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+p(A(a/60),2)+":"+p(A(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+p(A(a/60),2)+p(A(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},qc={},rc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];nc.length;)vb=nc.pop(),pc[vb+"o"]=i(pc[vb],vb);for(;oc.length;)vb=oc.pop(),pc[vb+vb]=h(pc[vb],2);pc.DDDD=h(pc.DDD,3),m(j.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=tb.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=tb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return hb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),tb=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=c,g._l=e,g._strict=f,g._isUTC=!1,g._pf=d(),jb(g)},tb.suppressDeprecationWarnings=!1,tb.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),tb.min=function(){var a=[].slice.call(arguments,0);return kb("isBefore",a)},tb.max=function(){var a=[].slice.call(arguments,0);return kb("isAfter",a)},tb.utc=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=c,g._strict=f,g._pf=d(),jb(g).utc()},tb.unix=function(a){return tb(1e3*a)},tb.duration=function(a,b){var d,e,f,g,h=a,i=null;return tb.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=Lb.exec(a))?(d="-"===i[1]?-1:1,h={y:0,d:A(i[Cb])*d,h:A(i[Db])*d,m:A(i[Eb])*d,s:A(i[Fb])*d,ms:A(i[Gb])*d}):(i=Mb.exec(a))?(d="-"===i[1]?-1:1,f=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*d},h={y:f(i[2]),M:f(i[3]),d:f(i[4]),h:f(i[5]),m:f(i[6]),s:f(i[7]),w:f(i[8])}):"object"==typeof h&&("from"in h||"to"in h)&&(g=r(tb(h.from),tb(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),e=new l(h),tb.isDuration(a)&&c(a,"_locale")&&(e._locale=a._locale),e},tb.version=wb,tb.defaultFormat=ec,tb.ISO_8601=function(){},tb.momentProperties=Ib,tb.updateOffset=function(){},tb.relativeTimeThreshold=function(b,c){return mc[b]===a?!1:c===a?mc[b]:(mc[b]=c,!0)},tb.lang=f("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return tb.locale(a,b)}),tb.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?tb.defineLocale(a,b):tb.localeData(a),c&&(tb.duration._locale=tb._locale=c)),tb._locale._abbr},tb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Hb[a]||(Hb[a]=new j),Hb[a].set(b),tb.locale(a),Hb[a]):(delete Hb[a],null)},tb.langData=f("moment.langData is deprecated. Use moment.localeData instead.",function(a){return tb.localeData(a)}),tb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return tb._locale;if(!u(a)){if(b=J(a))return b;a=[a]}return I(a)},tb.isMoment=function(a){return a instanceof k||null!=a&&c(a,"_isAMomentObject")},tb.isDuration=function(a){return a instanceof l};for(vb=rc.length-1;vb>=0;--vb)z(rc[vb]);tb.normalizeUnits=function(a){return x(a)},tb.invalid=function(a){var b=tb.utc(0/0);return null!=a?m(b._pf,a):b._pf.userInvalidated=!0,b},tb.parseZone=function(){return tb.apply(null,arguments).parseZone()},tb.parseTwoDigitYear=function(a){return A(a)+(A(a)>68?1900:2e3)},m(tb.fn=k.prototype,{clone:function(){return tb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=tb(this).utc();return 0<a.year()&&a.year()<=9999?N(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return G(this)},isDSTShifted:function(){return this._a?this.isValid()&&w(this._a,(this._isUTC?tb.utc(this._a):tb(this._a)).toArray())>0:!1},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._dateTzOffset(),"m")),this},format:function(a){var b=N(this,a||tb.defaultFormat);return this.localeData().postformat(b)},add:s(1,"add"),subtract:s(-1,"subtract"),diff:function(a,b,c){var d,e,f,g=K(a,this),h=6e4*(this.zone()-g.zone());return b=x(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+g.daysInMonth()),e=12*(this.year()-g.year())+(this.month()-g.month()),f=this-tb(this).startOf("month")-(g-tb(g).startOf("month")),f-=6e4*(this.zone()-tb(this).startOf("month").zone()-(g.zone()-tb(g).startOf("month").zone())),e+=f/d,"year"===b&&(e/=12)):(d=this-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-h)/864e5:"week"===b?(d-h)/6048e5:d),c?e:o(e)},from:function(a,b){return tb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(tb(),a)},calendar:function(a){var b=a||tb(),c=K(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this))},isLeapYear:function(){return E(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=eb(a,this.localeData()),this.add(a-b,"d")):b},month:ob("Month",!0),startOf:function(a){switch(a=x(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=x(a),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){return b=x("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=tb.isMoment(a)?a:tb(a),+this>+a):+this.clone().startOf(b)>+tb(a).startOf(b)},isBefore:function(a,b){return b=x("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=tb.isMoment(a)?a:tb(a),+a>+this):+this.clone().startOf(b)<+tb(a).startOf(b)},isSame:function(a,b){return b=x(b||"millisecond"),"millisecond"===b?(a=tb.isMoment(a)?a:tb(a),+this===+a):+this.clone().startOf(b)===+K(a,this).startOf(b)},min:f("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=tb.apply(null,arguments),this>a?this:a}),max:f("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=tb.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._dateTzOffset():("string"==typeof a&&(a=Q(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._dateTzOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?t(this,tb.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,tb.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?tb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return B(this.year(),this.month())},dayOfYear:function(a){var b=yb((tb(this).startOf("day")-tb(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=hb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=hb(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=hb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return C(this.year(),a.dow,a.doy)},get:function(a){return a=x(a),this[a]()},set:function(a,b){return a=x(a),"function"==typeof this[a]&&this[a](b),this},locale:function(b){var c;return b===a?this._locale._abbr:(c=tb.localeData(b),null!=c&&(this._locale=c),this)},lang:f("moment().lang() is deprecated. Use moment().localeData() instead.",function(b){return b===a?this.localeData():this.locale(b)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),tb.fn.millisecond=tb.fn.milliseconds=ob("Milliseconds",!1),tb.fn.second=tb.fn.seconds=ob("Seconds",!1),tb.fn.minute=tb.fn.minutes=ob("Minutes",!1),tb.fn.hour=tb.fn.hours=ob("Hours",!0),tb.fn.date=ob("Date",!0),tb.fn.dates=f("dates accessor is deprecated. Use date instead.",ob("Date",!0)),tb.fn.year=ob("FullYear",!0),tb.fn.years=f("years accessor is deprecated. Use year instead.",ob("FullYear",!0)),tb.fn.days=tb.fn.day,tb.fn.months=tb.fn.month,tb.fn.weeks=tb.fn.week,tb.fn.isoWeeks=tb.fn.isoWeek,tb.fn.quarters=tb.fn.quarter,tb.fn.toJSON=tb.fn.toISOString,m(tb.duration.fn=l.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=o(d/1e3),g.seconds=a%60,b=o(a/60),g.minutes=b%60,c=o(b/60),g.hours=c%24,e+=o(c/24),h=o(pb(e)),e-=o(qb(h)),f+=o(e/30),e%=30,h+=o(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*A(this._months/12)},humanize:function(a){var b=gb(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=tb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=tb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=x(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=x(a),"month"===a||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*pb(b),"month"===a?c:c/12;switch(b=this._days+qb(this._months/12),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:tb.fn.lang,locale:tb.fn.locale,toIsoString:f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}}),tb.duration.fn.toString=tb.duration.fn.toISOString;for(vb in ic)c(ic,vb)&&rb(vb.toLowerCase());tb.duration.fn.asMilliseconds=function(){return this.as("ms")},tb.duration.fn.asSeconds=function(){return this.as("s")},tb.duration.fn.asMinutes=function(){return this.as("m")},tb.duration.fn.asHours=function(){return this.as("h")},tb.duration.fn.asDays=function(){return this.as("d")},tb.duration.fn.asWeeks=function(){return this.as("weeks")},tb.duration.fn.asMonths=function(){return this.as("M")},tb.duration.fn.asYears=function(){return this.as("y")},tb.locale("en",{ordinal:function(a){var b=a%10,c=1===A(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";
return a+c}}),Jb?module.exports=tb:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(xb.moment=ub),tb}),sb(!0)):sb()}).call(this);



/*!
	Colorbox 1.5.14
	license: MIT
	http://www.jacklmoore.com/colorbox
*/
(function(t,e,i){function n(i,n,o){var r=e.createElement(i);return n&&(r.id=Z+n),o&&(r.style.cssText=o),t(r)}function o(){return i.innerHeight?i.innerHeight:t(i).height()}function r(e,i){i!==Object(i)&&(i={}),this.cache={},this.el=e,this.value=function(e){var n;return void 0===this.cache[e]&&(n=t(this.el).attr("data-cbox-"+e),void 0!==n?this.cache[e]=n:void 0!==i[e]?this.cache[e]=i[e]:void 0!==X[e]&&(this.cache[e]=X[e])),this.cache[e]},this.get=function(e){var i=this.value(e);return t.isFunction(i)?i.call(this.el,this):i}}function h(t){var e=W.length,i=(z+t)%e;return 0>i?e+i:i}function a(t,e){return Math.round((/%/.test(t)?("x"===e?E.width():o())/100:1)*parseInt(t,10))}function s(t,e){return t.get("photo")||t.get("photoRegex").test(e)}function l(t,e){return t.get("retinaUrl")&&i.devicePixelRatio>1?e.replace(t.get("photoRegex"),t.get("retinaSuffix")):e}function d(t){"contains"in y[0]&&!y[0].contains(t.target)&&t.target!==v[0]&&(t.stopPropagation(),y.focus())}function c(t){c.str!==t&&(y.add(v).removeClass(c.str).addClass(t),c.str=t)}function g(e){z=0,e&&e!==!1&&"nofollow"!==e?(W=t("."+te).filter(function(){var i=t.data(this,Y),n=new r(this,i);return n.get("rel")===e}),z=W.index(_.el),-1===z&&(W=W.add(_.el),z=W.length-1)):W=t(_.el)}function u(i){t(e).trigger(i),ae.triggerHandler(i)}function f(i){var o;if(!G){if(o=t(i).data(Y),_=new r(i,o),g(_.get("rel")),!$){$=q=!0,c(_.get("className")),y.css({visibility:"hidden",display:"block",opacity:""}),L=n(se,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),b.css({width:"",height:""}).append(L),D=T.height()+k.height()+b.outerHeight(!0)-b.height(),j=C.width()+H.width()+b.outerWidth(!0)-b.width(),A=L.outerHeight(!0),N=L.outerWidth(!0);var h=a(_.get("initialWidth"),"x"),s=a(_.get("initialHeight"),"y"),l=_.get("maxWidth"),f=_.get("maxHeight");_.w=(l!==!1?Math.min(h,a(l,"x")):h)-N-j,_.h=(f!==!1?Math.min(s,a(f,"y")):s)-A-D,L.css({width:"",height:_.h}),J.position(),u(ee),_.get("onOpen"),O.add(F).hide(),y.focus(),_.get("trapFocus")&&e.addEventListener&&(e.addEventListener("focus",d,!0),ae.one(re,function(){e.removeEventListener("focus",d,!0)})),_.get("returnFocus")&&ae.one(re,function(){t(_.el).focus()})}var p=parseFloat(_.get("opacity"));v.css({opacity:p===p?p:"",cursor:_.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),_.get("closeButton")?B.html(_.get("close")).appendTo(b):B.appendTo("<div/>"),w()}}function p(){y||(V=!1,E=t(i),y=n(se).attr({id:Y,"class":t.support.opacity===!1?Z+"IE":"",role:"dialog",tabindex:"-1"}).hide(),v=n(se,"Overlay").hide(),S=t([n(se,"LoadingOverlay")[0],n(se,"LoadingGraphic")[0]]),x=n(se,"Wrapper"),b=n(se,"Content").append(F=n(se,"Title"),I=n(se,"Current"),P=t('<button type="button"/>').attr({id:Z+"Previous"}),K=t('<button type="button"/>').attr({id:Z+"Next"}),R=n("button","Slideshow"),S),B=t('<button type="button"/>').attr({id:Z+"Close"}),x.append(n(se).append(n(se,"TopLeft"),T=n(se,"TopCenter"),n(se,"TopRight")),n(se,!1,"clear:left").append(C=n(se,"MiddleLeft"),b,H=n(se,"MiddleRight")),n(se,!1,"clear:left").append(n(se,"BottomLeft"),k=n(se,"BottomCenter"),n(se,"BottomRight"))).find("div div").css({"float":"left"}),M=n(se,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),O=K.add(P).add(I).add(R)),e.body&&!y.parent().length&&t(e.body).append(v,y.append(x,M))}function m(){function i(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),f(this))}return y?(V||(V=!0,K.click(function(){J.next()}),P.click(function(){J.prev()}),B.click(function(){J.close()}),v.click(function(){_.get("overlayClose")&&J.close()}),t(e).bind("keydown."+Z,function(t){var e=t.keyCode;$&&_.get("escKey")&&27===e&&(t.preventDefault(),J.close()),$&&_.get("arrowKey")&&W[1]&&!t.altKey&&(37===e?(t.preventDefault(),P.click()):39===e&&(t.preventDefault(),K.click()))}),t.isFunction(t.fn.on)?t(e).on("click."+Z,"."+te,i):t("."+te).live("click."+Z,i)),!0):!1}function w(){var e,o,r,h=J.prep,d=++le;if(q=!0,U=!1,u(he),u(ie),_.get("onLoad"),_.h=_.get("height")?a(_.get("height"),"y")-A-D:_.get("innerHeight")&&a(_.get("innerHeight"),"y"),_.w=_.get("width")?a(_.get("width"),"x")-N-j:_.get("innerWidth")&&a(_.get("innerWidth"),"x"),_.mw=_.w,_.mh=_.h,_.get("maxWidth")&&(_.mw=a(_.get("maxWidth"),"x")-N-j,_.mw=_.w&&_.w<_.mw?_.w:_.mw),_.get("maxHeight")&&(_.mh=a(_.get("maxHeight"),"y")-A-D,_.mh=_.h&&_.h<_.mh?_.h:_.mh),e=_.get("href"),Q=setTimeout(function(){S.show()},100),_.get("inline")){var c=t(e);r=t("<div>").hide().insertBefore(c),ae.one(he,function(){r.replaceWith(c)}),h(c)}else _.get("iframe")?h(" "):_.get("html")?h(_.get("html")):s(_,e)?(e=l(_,e),U=new Image,t(U).addClass(Z+"Photo").bind("error",function(){h(n(se,"Error").html(_.get("imgError")))}).one("load",function(){d===le&&setTimeout(function(){var e;t.each(["alt","longdesc","aria-describedby"],function(e,i){var n=t(_.el).attr(i)||t(_.el).attr("data-"+i);n&&U.setAttribute(i,n)}),_.get("retinaImage")&&i.devicePixelRatio>1&&(U.height=U.height/i.devicePixelRatio,U.width=U.width/i.devicePixelRatio),_.get("scalePhotos")&&(o=function(){U.height-=U.height*e,U.width-=U.width*e},_.mw&&U.width>_.mw&&(e=(U.width-_.mw)/U.width,o()),_.mh&&U.height>_.mh&&(e=(U.height-_.mh)/U.height,o())),_.h&&(U.style.marginTop=Math.max(_.mh-U.height,0)/2+"px"),W[1]&&(_.get("loop")||W[z+1])&&(U.style.cursor="pointer",U.onclick=function(){J.next()}),U.style.width=U.width+"px",U.style.height=U.height+"px",h(U)},1)}),U.src=e):e&&M.load(e,_.get("data"),function(e,i){d===le&&h("error"===i?n(se,"Error").html(_.get("xhrError")):t(this).contents())})}var v,y,x,b,T,C,H,k,W,E,L,M,S,F,I,R,K,P,B,O,_,D,j,A,N,z,U,$,q,G,Q,J,V,X={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return t(this).attr("href")},title:function(){return this.title}},Y="colorbox",Z="cbox",te=Z+"Element",ee=Z+"_open",ie=Z+"_load",ne=Z+"_complete",oe=Z+"_cleanup",re=Z+"_closed",he=Z+"_purge",ae=t("<a/>"),se="div",le=0,de={},ce=function(){function t(){clearTimeout(h)}function e(){(_.get("loop")||W[z+1])&&(t(),h=setTimeout(J.next,_.get("slideshowSpeed")))}function i(){R.html(_.get("slideshowStop")).unbind(s).one(s,n),ae.bind(ne,e).bind(ie,t),y.removeClass(a+"off").addClass(a+"on")}function n(){t(),ae.unbind(ne,e).unbind(ie,t),R.html(_.get("slideshowStart")).unbind(s).one(s,function(){J.next(),i()}),y.removeClass(a+"on").addClass(a+"off")}function o(){r=!1,R.hide(),t(),ae.unbind(ne,e).unbind(ie,t),y.removeClass(a+"off "+a+"on")}var r,h,a=Z+"Slideshow_",s="click."+Z;return function(){r?_.get("slideshow")||(ae.unbind(oe,o),o()):_.get("slideshow")&&W[1]&&(r=!0,ae.one(oe,o),_.get("slideshowAuto")?i():n(),R.show())}}();t[Y]||(t(p),J=t.fn[Y]=t[Y]=function(e,i){var n,o=this;if(e=e||{},t.isFunction(o))o=t("<a/>"),e.open=!0;else if(!o[0])return o;return o[0]?(p(),m()&&(i&&(e.onComplete=i),o.each(function(){var i=t.data(this,Y)||{};t.data(this,Y,t.extend(i,e))}).addClass(te),n=new r(o[0],e),n.get("open")&&f(o[0])),o):o},J.position=function(e,i){function n(){T[0].style.width=k[0].style.width=b[0].style.width=parseInt(y[0].style.width,10)-j+"px",b[0].style.height=C[0].style.height=H[0].style.height=parseInt(y[0].style.height,10)-D+"px"}var r,h,s,l=0,d=0,c=y.offset();if(E.unbind("resize."+Z),y.css({top:-9e4,left:-9e4}),h=E.scrollTop(),s=E.scrollLeft(),_.get("fixed")?(c.top-=h,c.left-=s,y.css({position:"fixed"})):(l=h,d=s,y.css({position:"absolute"})),d+=_.get("right")!==!1?Math.max(E.width()-_.w-N-j-a(_.get("right"),"x"),0):_.get("left")!==!1?a(_.get("left"),"x"):Math.round(Math.max(E.width()-_.w-N-j,0)/2),l+=_.get("bottom")!==!1?Math.max(o()-_.h-A-D-a(_.get("bottom"),"y"),0):_.get("top")!==!1?a(_.get("top"),"y"):Math.round(Math.max(o()-_.h-A-D,0)/2),y.css({top:c.top,left:c.left,visibility:"visible"}),x[0].style.width=x[0].style.height="9999px",r={width:_.w+N+j,height:_.h+A+D,top:l,left:d},e){var g=0;t.each(r,function(t){return r[t]!==de[t]?(g=e,void 0):void 0}),e=g}de=r,e||y.css(r),y.dequeue().animate(r,{duration:e||0,complete:function(){n(),q=!1,x[0].style.width=_.w+N+j+"px",x[0].style.height=_.h+A+D+"px",_.get("reposition")&&setTimeout(function(){E.bind("resize."+Z,J.position)},1),t.isFunction(i)&&i()},step:n})},J.resize=function(t){var e;$&&(t=t||{},t.width&&(_.w=a(t.width,"x")-N-j),t.innerWidth&&(_.w=a(t.innerWidth,"x")),L.css({width:_.w}),t.height&&(_.h=a(t.height,"y")-A-D),t.innerHeight&&(_.h=a(t.innerHeight,"y")),t.innerHeight||t.height||(e=L.scrollTop(),L.css({height:"auto"}),_.h=L.height()),L.css({height:_.h}),e&&L.scrollTop(e),J.position("none"===_.get("transition")?0:_.get("speed")))},J.prep=function(i){function o(){return _.w=_.w||L.width(),_.w=_.mw&&_.mw<_.w?_.mw:_.w,_.w}function a(){return _.h=_.h||L.height(),_.h=_.mh&&_.mh<_.h?_.mh:_.h,_.h}if($){var d,g="none"===_.get("transition")?0:_.get("speed");L.remove(),L=n(se,"LoadedContent").append(i),L.hide().appendTo(M.show()).css({width:o(),overflow:_.get("scrolling")?"auto":"hidden"}).css({height:a()}).prependTo(b),M.hide(),t(U).css({"float":"none"}),c(_.get("className")),d=function(){function i(){t.support.opacity===!1&&y[0].style.removeAttribute("filter")}var n,o,a=W.length;$&&(o=function(){clearTimeout(Q),S.hide(),u(ne),_.get("onComplete")},F.html(_.get("title")).show(),L.show(),a>1?("string"==typeof _.get("current")&&I.html(_.get("current").replace("{current}",z+1).replace("{total}",a)).show(),K[_.get("loop")||a-1>z?"show":"hide"]().html(_.get("next")),P[_.get("loop")||z?"show":"hide"]().html(_.get("previous")),ce(),_.get("preloading")&&t.each([h(-1),h(1)],function(){var i,n=W[this],o=new r(n,t.data(n,Y)),h=o.get("href");h&&s(o,h)&&(h=l(o,h),i=e.createElement("img"),i.src=h)})):O.hide(),_.get("iframe")?(n=e.createElement("iframe"),"frameBorder"in n&&(n.frameBorder=0),"allowTransparency"in n&&(n.allowTransparency="true"),_.get("scrolling")||(n.scrolling="no"),t(n).attr({src:_.get("href"),name:(new Date).getTime(),"class":Z+"Iframe",allowFullScreen:!0}).one("load",o).appendTo(L),ae.one(he,function(){n.src="//about:blank"}),_.get("fastIframe")&&t(n).trigger("load")):o(),"fade"===_.get("transition")?y.fadeTo(g,1,i):i())},"fade"===_.get("transition")?y.fadeTo(g,0,function(){J.position(0,d)}):J.position(g,d)}},J.next=function(){!q&&W[1]&&(_.get("loop")||W[z+1])&&(z=h(1),f(W[z]))},J.prev=function(){!q&&W[1]&&(_.get("loop")||z)&&(z=h(-1),f(W[z]))},J.close=function(){$&&!G&&(G=!0,$=!1,u(oe),_.get("onCleanup"),E.unbind("."+Z),v.fadeTo(_.get("fadeOut")||0,0),y.stop().fadeTo(_.get("fadeOut")||0,0,function(){y.hide(),v.hide(),u(he),L.remove(),setTimeout(function(){G=!1,u(re),_.get("onClosed")},1)}))},J.remove=function(){y&&(y.stop(),t[Y].close(),y.stop(!1,!0).remove(),v.remove(),G=!1,y=null,t("."+te).removeData(Y).removeClass(te),t(e).unbind("click."+Z).unbind("keydown."+Z))},J.element=function(){return t(_.el)},J.settings=X)})(jQuery,document,window);



(function(g){"function"===typeof define&&define.amd?define(["jquery","moment"],g):g(jQuery,moment)})(function(g,p){function D(a){w(Q,a)}function w(a){function b(b,c){g.isPlainObject(c)&&g.isPlainObject(a[b])&&!/(Time|Duration)$/.test(b)?a[b]=w({},a[b],c):void 0!==c&&(a[b]=c)}for(var c=1;c<arguments.length;c++)g.each(arguments[c],b);return a}function R(a,b){function c(){return a.is(":visible")}function d(a){e(0,a)}function e(a,b){z++;t&&b&&t.name!==b&&(u.deactivateButton(t.name),r(),t.start&&t.destroy(),
t.el.remove(),t=null);!t&&b&&(t=new M[b](m),t.el=g("<div class='fc-view fc-"+b+"-view' />").appendTo(A),u.activateButton(b));t&&(a&&(F=t.incrementDate(F,a)),t.start&&!a&&F.isWithin(t.intervalStart,t.intervalEnd)||!c()||(r(),t.start&&t.destroy(),t.render(F),q(),u.updateTitle(t.title),m.getNow().isWithin(t.intervalStart,t.intervalEnd)?u.disableButton("today"):u.enableButton("today"),!k.lazyFetching||x(t.start,t.end)?v(t.start,t.end):l()));q();z--}function f(a){if(c())return a&&h(),z++,t.updateSize(!0),
z--,!0}function h(){N="number"===typeof k.contentHeight?k.contentHeight:"number"===typeof k.height?k.height-(B?B.outerHeight(!0):0):Math.round(A.width()/Math.max(k.aspectRatio,.5))}function n(a){!z&&a.target===window&&t.start&&f(!0)&&t.trigger("windowResize",S)}function l(){c()&&(r(),t.destroyEvents(),t.renderEvents(sa),q())}function r(){A.css({width:"100%",height:A.height(),overflow:"hidden"})}function q(){A.css({width:"",height:"",overflow:""})}var m=this;b=b||{};var k=w({},Q,b),T;(T=k.lang in O?
O[k.lang]:O[Q.lang])&&(k=w({},Q,T,b));k.isRTL&&(k=w({},Q,Pa,T||{},b));m.options=k;m.render=function(b){A?c()&&(c()&&h(),e(b)):(a.addClass("fc"),k.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),k.theme?a.addClass("ui-widget"):a.addClass("fc-unthemed"),A=g("<div class='fc-view-container'/>").prependTo(a),u=new Qa(m,k),(B=u.render())&&a.prepend(B),d(k.defaultView),k.handleWindowResize&&(U=ta(n,k.windowResizeDelay),g(window).resize(U)))};m.destroy=function(){t&&t.destroy();u.destroy();A.remove();a.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");
g(window).unbind("resize",U)};m.refetchEvents=function(){r();t.destroyEvents();q();v(t.start,t.end)};m.reportEvents=function(a){sa=a;l()};m.reportEventChange=function(){l()};m.rerenderEvents=l;m.changeView=d;m.select=function(a,b){a=m.moment(a);b=b?m.moment(b):a.hasTime()?a.clone().add(m.defaultTimedEventDuration):a.clone().add(m.defaultAllDayEventDuration);t.select(a,b)};m.unselect=function(){t&&t.unselect()};m.prev=function(){e(-1)};m.next=function(){e(1)};m.prevYear=function(){F.add(-1,"years");
e()};m.nextYear=function(){F.add(1,"years");e()};m.today=function(){F=m.getNow();e()};m.gotoDate=function(a){F=m.moment(a);e()};m.incrementDate=function(a){F.add(p.duration(a));e()};m.zoomTo=function(a,b){var c,e;b&&void 0!==M[b]||(b=b||"day",c=u.getViewsWithButtons().join(" "),(e=c.match(new RegExp("\\w+"+ua(b))))||(e=c.match(/\w+Day/)),b=e?e[0]:"agendaDay");F=a;d(b)};m.getDate=function(){return F.clone()};m.getCalendar=function(){return m};m.getView=function(){return t};m.option=function(a,b){if(void 0===
b)return k[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)k[a]=b,f(!0)};m.trigger=function(a,b){if(k[a])return k[a].apply(b||S,Array.prototype.slice.call(arguments,2))};var G=H(function(a){var b=p.localeData||p.langData;return b.call(p,a)||b.call(p,"en")}(k.lang));k.monthNames&&(G._months=k.monthNames);k.monthNamesShort&&(G._monthsShort=k.monthNamesShort);k.dayNames&&(G._weekdays=k.dayNames);k.dayNamesShort&&(G._weekdaysShort=k.dayNamesShort);null!=k.firstDay&&(T=H(G._week),T.dow=k.firstDay,
G._week=T);m.defaultAllDayEventDuration=p.duration(k.defaultAllDayEventDuration);m.defaultTimedEventDuration=p.duration(k.defaultTimedEventDuration);m.moment=function(){var a;"local"===k.timezone?(a=y.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===k.timezone?y.moment.utc.apply(null,arguments):y.moment.parseZone.apply(null,arguments);"_locale"in a?a._locale=G:a._lang=G;return a};m.getIsAmbigTimezone=function(){return"local"!==k.timezone&&"UTC"!==k.timezone};m.rezoneDate=function(a){return m.moment(a.toArray())};
m.getNow=function(){var a=k.now;"function"===typeof a&&(a=a());return m.moment(a)};m.calculateWeekNumber=function(a){var b=k.weekNumberCalculation;if("function"===typeof b)return b(a);if("local"===b)return a.week();if("ISO"===b.toUpperCase())return a.isoWeek()};m.getEventEnd=function(a){return a.end?a.end.clone():m.getDefaultEventEnd(a.allDay,a.start)};m.getDefaultEventEnd=function(a,b){var c=b.clone();a?c.stripTime().add(m.defaultAllDayEventDuration):c.add(m.defaultTimedEventDuration);m.getIsAmbigTimezone()&&
c.stripZone();return c};m.formatRange=function(a,b,c){"function"===typeof c&&(c=c.call(m,k,G));return va(a,b,c,null,k.isRTL)};m.formatDate=function(a,b){"function"===typeof b&&(b=b.call(m,k,G));return da(a,ea(b))};fa.call(m,k);var x=m.isFetchNeeded,v=m.fetchEvents,S=a[0],u,B,A,t,N,U,z=0,F,sa=[];F=null!=k.defaultDate?m.moment(k.defaultDate):m.getNow();m.getSuggestedViewHeight=function(){void 0===N&&c()&&h();return N};m.isHeightAuto=function(){return"auto"===k.contentHeight||"auto"===k.height}}function Qa(a,
b){function c(c){var d=g('<div class="fc-'+c+'"/>');(c=b.header[c])&&g.each(c.split(" "),function(c){var h=g(),q=!0;g.each(this.split(","),function(c,d){var n,l,p,v,w,u;"title"==d?(h=h.add(g("<h2>&nbsp;</h2>")),q=!1):(a[d]?n=function(){a[d]()}:M[d]&&(n=function(){a.changeView(d)},e.push(d)),n&&(l=X(b.themeButtonIcons,d),p=X(b.buttonIcons,d),v=X(b.defaultButtonText,d),l=(w=X(b.buttonText,d))?C(w):l&&b.theme?"<span class='ui-icon ui-icon-"+l+"'></span>":p&&!b.theme?"<span class='fc-icon fc-icon-"+p+
"'></span>":C(v||d),p=["fc-"+d+"-button",f+"-button",f+"-state-default"],u=g('<button type="button" class="'+p.join(" ")+'">'+l+"</button>").click(function(){u.hasClass(f+"-state-disabled")||(n(),(u.hasClass(f+"-state-active")||u.hasClass(f+"-state-disabled"))&&u.removeClass(f+"-state-hover"))}).mousedown(function(){u.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){u.removeClass(f+"-state-down")}).hover(function(){u.not("."+f+"-state-active").not("."+
f+"-state-disabled").addClass(f+"-state-hover")},function(){u.removeClass(f+"-state-hover").removeClass(f+"-state-down")}),h=h.add(u)))});q&&h.first().addClass(f+"-corner-left").end().last().addClass(f+"-corner-right").end();1<h.length?(c=g("<div/>"),q&&c.addClass("fc-button-group"),c.append(h),d.append(c)):d.append(h)});return d}this.render=function(){var a=b.header;f=b.theme?"ui":"fc";if(a)return d=g("<div class='fc-toolbar'/>").append(c("left")).append(c("right")).append(c("center")).append('<div class="fc-clear"/>')};
this.destroy=function(){d.remove()};this.updateTitle=function(a){d.find("h2").text(a)};this.activateButton=function(a){d.find(".fc-"+a+"-button").addClass(f+"-state-active")};this.deactivateButton=function(a){d.find(".fc-"+a+"-button").removeClass(f+"-state-active")};this.disableButton=function(a){d.find(".fc-"+a+"-button").attr("disabled","disabled").addClass(f+"-state-disabled")};this.enableButton=function(a){d.find(".fc-"+a+"-button").removeAttr("disabled").removeClass(f+"-state-disabled")};this.getViewsWithButtons=
function(){return e};var d=g(),e=[],f}function fa(a){function b(a,b){c(a,function(c){var d=g.isArray(a.events),e,f;if(b==t){if(c)for(e=0;e<c.length;e++)f=c[e],d||(f=r(f,a)),f&&z.push(f);N--;N||x(z)}})}function c(b,d){var e,f=y.sourceFetchers,h;for(e=0;e<f.length;e++){h=f[e].call(k,b,B.clone(),A.clone(),a.timezone,d);if(!0===h)return;if("object"==typeof h){c(h,d);return}}if(e=b.events)g.isFunction(e)?(n(),e.call(k,B.clone(),A.clone(),a.timezone,function(a){d(a);l()})):g.isArray(e)?d(e):d();else if(b.url){var t=
b.success,q=b.error,m=b.complete;e=g.isFunction(b.data)?b.data():b.data;e=g.extend({},e||{});f=V(b.startParam,a.startParam);h=V(b.endParam,a.endParam);var r=V(b.timezoneParam,a.timezoneParam);f&&(e[f]=B.format());h&&(e[h]=A.format());a.timezone&&"local"!=a.timezone&&(e[r]=a.timezone);n();g.ajax(g.extend({},Ra,b,{data:e,success:function(a){a=a||[];var b=aa(t,this,arguments);g.isArray(b)&&(a=b);d(a)},error:function(){aa(q,this,arguments);d()},complete:function(){aa(m,this,arguments);l()}}))}else d()}
function d(a){var b=y.sourceNormalizers,c;g.isFunction(a)||g.isArray(a)?c={events:a}:"string"===typeof a?c={url:a}:"object"===typeof a&&(c=g.extend({},a));if(c){c.className?"string"===typeof c.className&&(c.className=c.className.split(/\s+/)):c.className=[];g.isArray(c.events)&&(c.origArray=c.events,c.events=g.map(c.events,function(a){return r(a,c)}));for(a=0;a<b.length;a++)b[a].call(k,c);return c}}function e(a,b){return a&&b&&f(a)==f(b)}function f(a){return("object"===typeof a?a.origArray||a.url||
a.events:null)||a}function h(a){return g.isFunction(a)?g.grep(z,a):null!=a?(a+="",g.grep(z,function(b){return b._id==a})):z}function n(){U++||p("loading",null,!0,w())}function l(){--U||p("loading",null,!1,w())}function r(b,c){var d={},e,f,h;a.eventDataTransform&&(b=a.eventDataTransform(b));c&&c.eventDataTransform&&(b=c.eventDataTransform(b));e=k.moment(b.start||b.date);if(e.isValid()){f=null;if(b.end&&(f=k.moment(b.end),!f.isValid()))return;h=b.allDay;void 0===h&&(h=V(c?c.allDayDefault:void 0,a.allDayDefault),
h=void 0!==h?h:!e.hasTime()&&(!f||!f.hasTime()));h?(e.hasTime()&&e.stripTime(),f&&f.hasTime()&&f.stripTime()):(e.hasTime()||(e=k.rezoneDate(e)),f&&!f.hasTime()&&(f=k.rezoneDate(f)));g.extend(d,b);c&&(d.source=c);d._id=b._id||(void 0===b.id?"_fc"+Sa++:b.id+"");d.className=b.className?"string"==typeof b.className?b.className.split(/\s+/):b.className:[];d.allDay=h;d.start=e;d.end=f;d.type=b.type;d.state=b.state;a.forceEventDuration&&!d.end&&(d.end=v(d));ga(d);return d}}function q(a,b,c){var d=a._allDay,
e=a._start,f=a._end,g=!1,n,l,t;b||c||(b=a.start,c=a.end);if(n=a.allDay!=d?a.allDay:!(b||c).hasTime())b&&(b=b.clone().stripTime()),c&&(c=c.clone().stripTime());b&&(l=n?Y(b,e.clone().stripTime()):Y(b,e));n!=d?g=!0:c&&(t=Y(c||k.getDefaultEventEnd(n,b||e),b||e).subtract(Y(f||k.getDefaultEventEnd(d,e),e)));a=m(h(a._id),g,n,l,t);return{dateDelta:l,durationDelta:t,undo:a}}function m(b,c,d,e,f){var h=k.getIsAmbigTimezone(),n=[];g.each(b,function(b,g){var l=g._allDay,t=g._start,q=g._end,A=null!=d?d:l,m=t.clone(),
r=!c&&q?q.clone():null;A?(m.stripTime(),r&&r.stripTime()):(m.hasTime()||(m=k.rezoneDate(m)),r&&!r.hasTime()&&(r=k.rezoneDate(r)));r||!a.forceEventDuration&&!+f||(r=k.getDefaultEventEnd(A,m));m.add(e);r&&r.add(e).add(f);h&&(+e||+f)&&(m.stripZone(),r&&r.stripZone());g.allDay=A;g.start=m;g.end=r;ga(g);n.push(function(){g.allDay=l;g.start=t;g.end=q;ga(g)})});return function(){for(var a=0;a<n.length;a++)n[a]()}}var k=this;k.isFetchNeeded=function(a,b){return!B||a.clone().stripZone()<B.clone().stripZone()||
b.clone().stripZone()>A.clone().stripZone()};k.fetchEvents=function(a,c){B=a;A=c;z=[];var d=++t,e=u.length;N=e;for(var f=0;f<e;f++)b(u[f],d)};k.addEventSource=function(a){if(a=d(a))u.push(a),N++,b(a,t)};k.removeEventSource=function(a){u=g.grep(u,function(b){return!e(b,a)});z=g.grep(z,function(b){return!e(b.source,a)});x(z)};k.updateEvent=function(a){a.start=k.moment(a.start);a.end&&(a.end=k.moment(a.end));q(a);var b,c,d,e;for(b=0;b<z.length;b++)if(c=z[b],c._id==a._id&&c!==a)for(d=0;d<F.length;d++)e=
F[d],void 0!==a[e]&&(c[e]=a[e]);x(z)};k.renderEvent=function(a,b){var c=r(a);c&&(c.source||(b&&(S.events.push(c),c.source=S),z.push(c)),x(z))};k.removeEvents=function(a){var b,c;null==a?a=function(){return!0}:g.isFunction(a)||(b=a+"",a=function(a){return a._id==b});z=g.grep(z,a,!0);for(c=0;c<u.length;c++)g.isArray(u[c].events)&&(u[c].events=g.grep(u[c].events,a,!0));x(z)};k.clientEvents=h;k.mutateEvent=q;var p=k.trigger,w=k.getView,x=k.reportEvents,v=k.getEventEnd,S={events:[]},u=[S],B,A,t=0,N=0,
U=0,z=[];g.each((a.events?[a.events]:[]).concat(a.eventSources||[]),function(a,b){var c=d(b);c&&u.push(c)});var F="title url allDay className editable color backgroundColor borderColor textColor".split(" ")}function ga(a){a._allDay=a.allDay;a._start=a.start.clone();a._end=a.end?a.end.clone():null}function wa(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1});b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function xa(a){a.css({"margin-left":"","margin-right":"","border-left-width":"",
"border-right-width":""})}function ya(a,b,c){var d=Math.floor(b/a.length),e=Math.floor(b-d*(a.length-1)),f=[],h=[],n=[],l=0;a.height("");a.each(function(b,c){var m=b===a.length-1?e:d,k=g(c).outerHeight(!0);k<m?(f.push(c),h.push(k),n.push(g(c).height())):l+=k});c&&(b-=l,d=Math.floor(b/f.length),e=Math.floor(b-d*(f.length-1)));g(f).each(function(a,b){var c=a===f.length-1?e:d,l=h[a],p=c-(l-n[a]);l<c&&g(b).height(p)})}function za(a){var b=0;a.find("> *").each(function(a,d){var e=g(d).outerWidth();e>b&&
(b=e)});b++;a.width(b);return b}function Aa(a,b){a.height(b).addClass("fc-scroller");if(a[0].scrollHeight-1>a[0].clientHeight)return!0;ha(a);return!1}function ha(a){a.height("").removeClass("fc-scroller")}function Ba(a){var b=a.css("position"),c=a.parents().filter(function(){var a=g(this);return/(auto|scroll)/.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==b&&c.length?c:g(a[0].ownerDocument||document)}function Ca(a){var b=a.offset().left,c=b+a.width(),d=a.children();
a=d.offset().left;d=a+d.outerWidth();return{left:a-b,right:c-d}}function Da(a,b,c,d){if(b>c&&a<d)return a>=c?(a=a.clone(),c=!0):(a=c.clone(),c=!1),b<=d?(b=b.clone(),d=!0):(b=d.clone(),d=!1),{start:a,end:b,isStart:c,isEnd:d}}function X(a,b){a=a||{};if(void 0!==a[b])return a[b];for(var c=b.split(/(?=[A-Z])/),d=c.length-1,e;0<=d;d--)if(e=a[c[d].toLowerCase()],void 0!==e)return e;return a["default"]}function Y(a,b){return p.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days"),ms:a.time()-
b.time()})}function Ta(a,b){return a-b}function H(a){var b=function(){};b.prototype=a;return new b}function aa(a,b,c){g.isFunction(a)&&(a=[a]);if(a){var d,e;for(d=0;d<a.length;d++)e=a[d].apply(b,c)||e;return e}}function V(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function C(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ua(a){return a.charAt(0).toUpperCase()+
a.slice(1)}function ta(a,b){var c,d,e,f,h=function(){var g=+new Date-f;g<b&&0<g?c=setTimeout(h,b-g):(c=null,a.apply(e,d),c||(e=d=null))};return function(){e=this;d=arguments;f=+new Date;c||(c=setTimeout(h,b))}}function ba(a,b,c){var d=a[0],e=1==a.length&&"string"===typeof d,f,h,n;if(p.isMoment(d))a=p.apply(null,a),d._ambigTime&&(a._ambigTime=!0),d._ambigZone&&(a._ambigZone=!0);else if(f=d,"[object Date]"===Object.prototype.toString.call(f)||f instanceof Date||void 0===d)a=p.apply(null,a);else{h=f=
!1;if(e)if(Ua.test(d))d+="-01",a=[d],h=f=!0;else{if(n=Va.exec(d))f=!n[5],h=!0}else g.isArray(d)&&(h=!0);a=b?p.utc.apply(p,a):p.apply(null,a);f?(a._ambigTime=!0,a._ambigZone=!0):c&&(h?a._ambigZone=!0:e&&a.zone(d))}return new E(a)}function E(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function ia(a,b){var c=[],d=!1,e=!1,f;for(f=0;f<a.length;f++)c.push(y.moment.parseZone(a[f])),d=d||c[f]._ambigTime,e=e||c[f]._ambigZone;for(f=0;f<c.length;f++)d&&!b?c[f].stripTime():e&&c[f].stripZone();return c}
function L(a,b){return p.fn.format.call(a,b)}function da(a,b){var c="",d;for(d=0;d<b.length;d++)c+=ja(a,b[d]);return c}function ja(a,b){var c;return"string"===typeof b?b:(c=b.token)?Ea[c]?Ea[c](a):L(a,c):b.maybe&&(c=da(a,b.maybe),c.match(/[1-9]/))?c:""}function va(a,b,c,d,e){a=y.moment.parseZone(a);b=y.moment.parseZone(b);c=(a.localeData||a.lang).call(a).longDateFormat(c)||c;d=d||" - ";c=ea(c);var f,h,g="",l,r="",q="",m="",k="";for(h=0;h<c.length;h++){f=Fa(a,b,c[h]);if(!1===f)break;g+=f}for(l=c.length-
1;l>h;l--){f=Fa(a,b,c[l]);if(!1===f)break;r=f+r}for(f=h;f<=l;f++)q+=ja(a,c[f]),m+=ja(b,c[f]);if(q||m)k=e?m+d+q:q+d+m;return g+k+r}function Fa(a,b,c){var d;return"string"===typeof c?c:(c=c.token)&&(d=Wa[c.charAt(0)])&&a.isSame(b,d)?L(a,c):!1}function ea(a){return a in ka?ka[a]:ka[a]=Ga(a)}function Ga(a){for(var b=[],c=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g,d;d=c.exec(a);)d[1]?b.push(d[1]):d[2]?b.push({maybe:Ga(d[2])}):d[3]?b.push({token:d[3]}):d[5]&&b.push(d[5]);return b}function Ha(a){this.options=
a||{}}function Ia(a){this.grid=a}function Ja(a){this.coordMaps=a}function Z(a,b){this.coordMap=a;this.options=b||{}}function Ka(a,b){this.options=b=b||{};this.sourceEl=a;this.parentEl=b.parentEl?g(b.parentEl):a.parent()}function La(a){this.view=a}function J(a){this.view=a;this.coordMap=new Ia(this)}function la(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||(a.event.title||"").localeCompare(b.event.title)}function W(a){J.call(this,a)}
function Xa(a,b){return a.leftCol-b.leftCol}function ca(a){J.call(this,a)}function Ma(a){var b=a.forwardSegs,c=0,d,e;if(void 0===a.forwardPressure){for(d=0;d<b.length;d++)e=b[d],Ma(e),c=Math.max(c,1+e.forwardPressure);a.forwardPressure=c}}function ma(a,b,c){var d=a.forwardSegs;if(void 0===a.forwardCoord)for(d.length?(d.sort(Ya),ma(d[0],b+1,c),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),b=0;b<d.length;b++)ma(d[b],0,a.forwardCoord)}function Na(a,
b,c){c=c||[];for(var d=0;d<b.length;d++){var e=b[d];a.bottom>e.top&&a.top<e.bottom&&c.push(b[d])}return c}function Ya(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||la(a,b)}function I(a){function b(a){var b=k[a];return g.isPlainObject(b)&&!/(Time|Duration)$/.test(a)?X(b,q.name):b}function c(b,c){return a.trigger.apply(a,[b,c||q].concat(Array.prototype.slice.call(arguments,2),[q]))}function d(a,b){var c=q.colCnt,d=B?-1:1,e=B?c-1:0;"object"==typeof a&&(b=
a.col,a=a.row);return a*c+(b*d+e)}function e(a){var b=q.start.day();a+=y[b];return 7*Math.floor(a/v)+u[(a%v+v)%v]-b}function f(a){return q.start.clone().add(a,"days")}function h(a){return a.clone().stripTime().diff(q.start,"days")}function n(a){var b=q.start.day();a+=b;return Math.floor(a/7)*v+y[(a%7+7)%7]-y[b]}function l(a){var b=q.colCnt;return{row:Math.floor(a/b),col:(a%b+b)%b*(B?-1:1)+(B?b-1:0)}}function r(a,b){var c=a.clone().stripTime(),d,e;b&&(d=b.clone().stripTime(),(e=+b.time())&&e>=w&&d.add(1,
"days"));if(!b||d<=c)d=c.clone().add(1,"days");return{start:c,end:d}}var q=this;q.calendar=a;q.opt=b;q.trigger=c;q.isEventDraggable=function(a){var c=a.source||{};return V(a.startEditable,c.startEditable,b("eventStartEditable"),a.editable,c.editable,b("editable"))};q.isEventResizable=function(a){var c=a.source||{};return V(a.durationEditable,c.durationEditable,b("eventDurationEditable"),a.editable,c.editable,b("editable"))};q.eventDrop=function(b,d,e,f){var h=a.mutateEvent(d,e,null);c("eventDrop",
b,d,h.dateDelta,function(){h.undo();m()},f,{});m()};q.eventResize=function(b,d,e,f){var h=a.mutateEvent(d,null,e);c("eventResize",b,d,h.durationDelta,function(){h.undo();m()},f,{});m()};var m=a.reportEventChange,k=a.options,w=p.duration(k.nextDayThreshold);q.init();q.getEventTimeText=function(c,d,e){var f;"object"===typeof c&&"object"===typeof d?(f=c,c=d,d=e):(f=c.start,c=c.end);d=d||b("timeFormat");return c&&b("displayEventEnd")?a.formatRange(f,c,d):a.formatDate(f,d)};q.isHiddenDay=function(a){p.isMoment(a)&&
(a=a.day());return x[a]};q.skipHiddenDays=function(a,b,c){a=a.clone();for(b=b||1;x[(a.day()+(c?b:0)+7)%7];)a.add(b,"days");return a};q.getCellsPerWeek=function(){return v};q.dateToCell=function(a){a=h(a);a=n(a);return l(a)};q.dateToDayOffset=h;q.dayOffsetToCellOffset=n;q.cellOffsetToCell=l;q.cellToDate=function(){var a=d.apply(null,arguments),a=e(a);return f(a)};q.cellToCellOffset=d;q.cellOffsetToDayOffset=e;q.dayOffsetToDate=f;q.rangeToSegments=function(a,b){for(var c=q.rowCnt,d=q.colCnt,f=[],g=
r(a,b),k=h(g.start),g=h(g.end),m=n(k),p=n(g)-1,w=0;w<c;w++){var u=w*d,v=u+d-1,u=Math.max(m,u),v=Math.min(p,v);if(u<=v){var x=l(u),G=l(v),x=[x.col,G.col].sort(),u=e(u)==k,v=e(v)+1==g;f.push({row:w,leftCol:x[0],rightCol:x[1],isStart:u,isEnd:v})}}return f};q.isMultiDayEvent=function(a){a=r(a.start,a.end);return 1<a.end.diff(a.start,"days")};var G=b("hiddenDays")||[],x=[],v,y=[],u=[],B=b("isRTL");(function(){!1===b("weekends")&&G.push(0,6);for(var a=0,c=0;7>a;a++)y[a]=c,x[a]=-1!=g.inArray(a,G),x[a]||
(u[c]=a,c++);v=c;if(!v)throw"invalid hiddenDays";})()}function K(a){I.call(this,a);this.dayGrid=new W(this);this.coordMap=this.dayGrid.coordMap}function na(a){K.call(this,a)}function oa(a){K.call(this,a)}function pa(a){K.call(this,a)}function P(a){I.call(this,a);this.timeGrid=new ca(this);this.opt("allDaySlot")?(this.dayGrid=new W(this),this.coordMap=new Ja([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap}function qa(a){P.call(this,a)}function ra(a){P.call(this,
a)}var Q={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:function(a,b){var c=
b.longDateFormat("L"),c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");return c=a.isRTL?c+" ddd":"ddd "+c},day:"dddd"},timeFormat:{"default":function(a,b){return b.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}},displayEventEnd:{month:!1,basicWeek:!1,"default":!0},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",
prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},O={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}},Pa={header:{left:"next,prev today",center:"",
right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},y=g.fullCalendar={version:"2.1.1"},M=y.views={};g.fn.fullCalendar=function(a){var b=Array.prototype.slice.call(arguments,1),c=this;this.each(function(d,e){var f=g(e),h=f.data("fullCalendar");"string"===typeof a?h&&g.isFunction(h[a])&&(h=h[a].apply(h,
b),d||(c=h),"destroy"===a&&f.removeData("fullCalendar")):h||(h=new R(f,a),f.data("fullCalendar",h),h.render())});return c};y.langs=O;y.datepickerLang=function(a,b,c){var d=O[a];d||(d=O[a]={});w(d,{isRTL:c.isRTL,weekNumberTitle:c.weekHeader,titleFormat:{month:c.showMonthAfterYear?"YYYY["+c.yearSuffix+"] MMMM":"MMMM YYYY["+c.yearSuffix+"]"},defaultButtonText:{prev:c.prevText.replace(/&.*?;/g,""),next:c.nextText.replace(/&.*?;/g,""),today:c.currentText.replace(/&.*?;/g,"")}});g.datepicker&&(g.datepicker.regional[b]=
g.datepicker.regional[a]=c,g.datepicker.regional.en=g.datepicker.regional[""],g.datepicker.setDefaults(c))};y.lang=function(a,b){var c;b&&((c=O[a])||(c=O[a]={}),w(c,b||{}));Q.lang=a};y.sourceNormalizers=[];y.sourceFetchers=[];var Ra={dataType:"json",cache:!1},Sa=1,Oa="sun mon tue wed thu fri sat".split(" ");y.applyAll=aa;var Ua=/^\s*\d{4}-\d\d$/,Va=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;y.moment=function(){return ba(arguments)};y.moment.utc=
function(){var a=ba(arguments,!0);a.hasTime()&&a.utc();return a};y.moment.parseZone=function(){return ba(arguments,!0,!0)};E.prototype=H(p.fn);E.prototype.clone=function(){return ba([this])};E.prototype.time=function(a){if(null==a)return p.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});delete this._ambigTime;p.isDuration(a)||p.isMoment(a)||(a=p.duration(a));var b=0;p.isDuration(a)&&(b=24*Math.floor(a.asDays()));return this.hours(b+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())};
E.prototype.stripTime=function(){var a=this.toArray();p.fn.utc.call(this);this.year(a[0]).month(a[1]).date(a[2]).hours(0).minutes(0).seconds(0).milliseconds(0);this._ambigZone=this._ambigTime=!0;return this};E.prototype.hasTime=function(){return!this._ambigTime};E.prototype.stripZone=function(){var a=this.toArray(),b=this._ambigTime;p.fn.utc.call(this);this.year(a[0]).month(a[1]).date(a[2]).hours(a[3]).minutes(a[4]).seconds(a[5]).milliseconds(a[6]);b&&(this._ambigTime=!0);this._ambigZone=!0;return this};
E.prototype.hasZone=function(){return!this._ambigZone};E.prototype.zone=function(a){null!=a&&(delete this._ambigTime,delete this._ambigZone);return p.fn.zone.apply(this,arguments)};E.prototype.local=function(){var a=this.toArray(),b=this._ambigZone;delete this._ambigTime;delete this._ambigZone;p.fn.local.apply(this,arguments);b&&this.year(a[0]).month(a[1]).date(a[2]).hours(a[3]).minutes(a[4]).seconds(a[5]).milliseconds(a[6]);return this};E.prototype.utc=function(){delete this._ambigTime;delete this._ambigZone;
return p.fn.utc.apply(this,arguments)};E.prototype.format=function(a){return a?da(this,ea(a)):this._ambigTime?L(this,"YYYY-MM-DD"):this._ambigZone?L(this,"YYYY-MM-DD[T]HH:mm:ss"):L(this)};E.prototype.toISOString=function(){return this._ambigTime?L(this,"YYYY-MM-DD"):this._ambigZone?L(this,"YYYY-MM-DD[T]HH:mm:ss"):p.fn.toISOString.apply(this,arguments)};E.prototype.isWithin=function(a,b){var c=ia([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]};E.prototype.isSame=function(a,b){var c;if(b)return c=ia([this,
a],!0),p.fn.isSame.call(c[0],c[1],b);a=y.moment.parseZone(a);return p.fn.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)};g.each(["isBefore","isAfter"],function(a,b){E.prototype[b]=function(a,d){var e=ia([this,a]);return p.fn[b].call(e[0],e[1],d)}});var Ea={t:function(a){return L(a,"a").charAt(0)},T:function(a){return L(a,"A").charAt(0)}};y.formatRange=va;var Wa={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",
t:"second",H:"second",h:"second",m:"second",s:"second"},ka={};Ha.prototype={isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var a=this,b=this.options;this.el=g('<div class="fc-popover"/>').addClass(b.className||"").css({top:0,left:0}).append(b.content).appendTo(b.parentEl);
this.el.on("click",".fc-close",function(){a.hide()});if(b.autoHide)g(document).on("mousedown",this.documentMousedownProxy=g.proxy(this,"documentMousedown"))},documentMousedown:function(a){this.el&&!g(a.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide();this.el&&(this.el.remove(),this.el=null);g(document).off("mousedown",this.documentMousedownProxy)},position:function(){var a=this.options,b=this.el.offsetParent().offset(),c=this.el.outerWidth(),d=this.el.outerHeight(),e=g(window),
f=Ba(this.el),h,n,l,r;l=a.top||0;r=void 0!==a.left?a.left:void 0!==a.right?a.right-c:0;f.is(window)||f.is(document)?(f=e,n=h=0):(n=f.offset(),h=n.top,n=n.left);h+=e.scrollTop();n+=e.scrollLeft();!1!==a.viewportConstrain&&(l=Math.min(l,h+f.outerHeight()-d-this.margin),l=Math.max(l,h+this.margin),r=Math.min(r,n+f.outerWidth()-c-this.margin),r=Math.max(r,n+this.margin));this.el.css({top:l-b.top,left:r-b.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,
1))}};Ia.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]);this.computeBounds()},getCell:function(a,b){var c=null,d=this.rows,e=this.cols,f=-1,h=-1,g;if(this.inBounds(a,b)){for(g=0;g<d.length;g++)if(b>=d[g][0]&&b<d[g][1]){f=g;break}for(g=0;g<e.length;g++)if(a>=e[g][0]&&a<e[g][1]){h=g;break}0<=f&&0<=h&&(c={row:f,col:h},c.grid=this.grid,c.date=this.grid.getCellDate(c))}return c},computeBounds:function(){var a;
this.containerEl&&(a=this.containerEl.offset(),this.minX=a.left,this.maxX=a.left+this.containerEl.outerWidth(),this.minY=a.top,this.maxY=a.top+this.containerEl.outerHeight())},inBounds:function(a,b){return this.containerEl?a>=this.minX&&a<this.maxX&&b>=this.minY&&b<this.maxY:!0}};Ja.prototype={coordMaps:null,build:function(){var a=this.coordMaps,b;for(b=0;b<a.length;b++)a[b].build()},getCell:function(a,b){var c=this.coordMaps,d=null,e;for(e=0;e<c.length&&!d;e++)d=c[e].getCell(a,b);return d}};Z.prototype=
{coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(a){1!=a.which||a.ctrlKey||(a.preventDefault(),this.startListening(a),this.options.distance||this.startDrag(a))},startListening:function(a){var b;
this.isListening||(a&&this.options.scroll&&(b=Ba(g(a.target)),b.is(window)||b.is(document)||(this.scrollEl=b,this.scrollHandlerProxy=ta(g.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),a&&(this.origDate=(this.origCell=b=this.getCell(a))?b.date:null,this.mouseX0=a.pageX,this.mouseY0=a.pageY),g(document).on("mousemove",this.mousemoveProxy=g.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=g.proxy(this,"mouseup")).on("selectstart",this.preventDefault),
this.isListening=!0,this.trigger("listenStart",a))},computeCoords:function(){this.coordMap.build();this.computeScrollBounds()},mousemove:function(a){var b,c;this.isDragging||(b=this.options.distance||1,c=Math.pow(a.pageX-this.mouseX0,2)+Math.pow(a.pageY-this.mouseY0,2),c>=b*b&&this.startDrag(a));this.isDragging&&this.drag(a)},startDrag:function(a){this.isListening||this.startListening();this.isDragging||(this.isDragging=!0,this.trigger("dragStart",a),(a=this.getCell(a))&&this.cellOver(a,!0))},drag:function(a){var b;
if(this.isDragging){b=this.getCell(a);var c;c=this.cell;c=b||c?b&&c?b.grid===c.grid&&b.row===c.row&&b.col===c.col:!1:!0;c||(this.cell&&this.cellOut(),b&&this.cellOver(b));this.dragScroll(a)}},cellOver:function(a){this.cell=a;this.date=a.date;this.trigger("cellOver",a,a.date)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.date=this.cell=null)},mouseup:function(a){this.stopDrag(a);this.stopListening(a)},stopDrag:function(a){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",
a),this.isDragging=!1)},stopListening:function(a){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),g(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mouseupProxy=this.mousemoveProxy=null,this.isListening=!1,this.trigger("listenStop",a),this.origDate=this.date=this.origCell=this.cell=null)},getCell:function(a){return this.coordMap.getCell(a.pageX,a.pageY)},
trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var a=this.scrollEl,b;a&&(b=a.offset(),this.scrollBounds={top:b.top,left:b.left,bottom:b.top+a.outerHeight(),right:b.left+a.outerWidth()})},dragScroll:function(a){var b=this.scrollSensitivity,c=this.scrollBounds,d,e,f,h=0,g=0;c&&(d=(b-(a.pageY-c.top))/b,e=(b-(c.bottom-a.pageY))/b,f=(b-(a.pageX-c.left))/b,a=(b-(c.right-
a.pageX))/b,0<=d&&1>=d?h=d*this.scrollSpeed*-1:0<=e&&1>=e&&(h=e*this.scrollSpeed),0<=f&&1>=f?g=f*this.scrollSpeed*-1:0<=a&&1>=a&&(g=a*this.scrollSpeed));this.setScrollVel(h,g)},setScrollVel:function(a,b){this.scrollTopVel=a;this.scrollLeftVel=b;this.constrainScrollVel();!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(g.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;0>this.scrollTopVel?0>=
a.scrollTop()&&(this.scrollTopVel=0):0<this.scrollTopVel&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0);0>this.scrollLeftVel?0>=a.scrollLeft()&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1E3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b);this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*
b);this.constrainScrollVel();this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}};Ka.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,start:function(a){this.isFollowing||
(this.isFollowing=!0,this.mouseY0=a.pageY,this.mouseX0=a.pageX,this.leftDelta=this.topDelta=0,this.isHidden||this.updatePosition(),g(document).on("mousemove",this.mousemoveProxy=g.proxy(this,"mousemove")))},stop:function(a,b){function c(){this.isAnimating=!1;d.destroyEl();this.top0=this.left0=null;b&&b()}var d=this,e=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,g(document).off("mousemove",this.mousemoveProxy),a&&e&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,
left:this.left0},{duration:e,complete:c})):c())},getEl:function(){var a=this.el;a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl));return a},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl();
null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left);this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0;this.leftDelta=a.pageX-this.mouseX0;this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}};
La.prototype={view:null,cellHtml:"<td/>",rowHtml:function(a,b){var c=this.view,d=this.getHtmlRenderer("cell",a),e="",f,h;b=b||0;for(f=0;f<c.colCnt;f++)h=c.cellToDate(b,f),e+=d(b,f,h);e=this.bookendCells(e,a,b);return"<tr>"+e+"</tr>"},bookendCells:function(a,b,c){var d=this.view,e=this.getHtmlRenderer("intro",b)(c||0);b=this.getHtmlRenderer("outro",b)(c||0);d=(c=d.opt("isRTL"))?b:e;e=c?e:b;return"string"===typeof a?d+a+e:a.prepend(d).append(e)},getHtmlRenderer:function(a,b){var c=this.view,d,e,f,h;
d=a+"Html";b&&(e=b+ua(a)+"Html");if(e&&(h=c[e]))f=c;else if(e&&(h=this[e]))f=this;else if(h=c[d])f=c;else if(h=this[d])f=this;return"function"===typeof h?function(a){return h.apply(f,arguments)||""}:function(){return h||""}}};J.prototype=H(La.prototype);g.extend(J.prototype,{el:null,coordMap:null,cellDuration:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(a,b){},getCellDate:function(a){},getCellDayEl:function(a){},rangeToSegs:function(a,b){},bindHandlers:function(){var a=
this;this.el.on("mousedown",function(b){g(b.target).is(".fc-event-container *, .fc-more")||g(b.target).closest(".fc-popover").length||a.dayMousedown(b)});this.bindSegHandlers()},dayMousedown:function(a){var b=this,c=this.view,d=c.opt("selectable"),e=null,f,h,g,l=new Z(this.coordMap,{scroll:c.opt("dragScroll"),dragStart:function(){c.unselect()},cellOver:function(a,c){l.origDate&&(g=b.getCellDayEl(a),e=[c,l.origDate].sort(Ta),f=e[0],h=e[1].clone().add(b.cellDuration),d&&b.renderSelection(f,h))},cellOut:function(a,
c){e=null;b.destroySelection()},listenStop:function(a){e&&(e[0].isSame(e[1])&&c.trigger("dayClick",g[0],f,a),d&&c.reportSelection(f,h,a))}});l.mousedown(a)},renderDrag:function(a,b,c){},destroyDrag:function(){},renderResize:function(a,b,c){},destroyResize:function(){},renderRangeHelper:function(a,b,c){var d=this.view;!b&&d.opt("forceEventDuration")&&(b=d.calendar.getDefaultEventEnd(!a.hasTime(),a));d=c?H(c.event):{};d.start=a;d.end=b;d.allDay=!(a.hasTime()||b&&b.hasTime());d.className=(d.className||
[]).concat("fc-helper");c||(d.editable=!1);this.renderHelper(d,c)},renderHelper:function(a,b){},destroyHelper:function(){},renderSelection:function(a,b){this.renderHighlight(a,b)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(a,b){},destroyHighlight:function(){},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(a,b,c){a=this.view;b=a.calendar;var d=a.opt("columnFormat");
return'<th class="fc-day-header '+a.widgetHeaderClass+" fc-"+Oa[c.day()]+'">'+C(b.formatDate(c,d))+"</th>"},bgCellHtml:function(a,b,c){a=this.view;b=this.getDayClasses(c);b.unshift("fc-day",a.widgetContentClass);return'<td class="'+b.join(" ")+'" data-date="'+c.format()+'"></td>'},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow().stripTime(),d=["fc-"+Oa[a.day()]];"month"===b.name&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month");a.isSame(c,"day")?d.push("fc-today",b.highlightStateClass):
a<c?d.push("fc-past"):d.push("fc-future");return d}});g.extend(J.prototype,{mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,renderEvents:function(a){},getSegs:function(){},destroyEvents:function(){this.triggerSegMouseout()},renderSegs:function(a,b){var c=this.view,d="",e=[],f;for(f=0;f<a.length;f++)d+=this.renderSegHtml(a[f],b);g(d).each(function(b,d){var f=a[b],r=c.resolveEventEl(f.event,g(d));r&&(r.data("fc-seg",f),f.el=r,e.push(f))});return e},renderSegHtml:function(a,b){},eventsToSegs:function(a,
b,c){var d=this;return g.map(a,function(a){return d.eventToSegs(a,b,c)})},eventToSegs:function(a,b,c){var d=a.start.clone().stripZone(),e=this.view.calendar.getEventEnd(a).stripZone(),f;b=b&&c?(f=Da(d,e,b,c))?[f]:[]:this.rangeToSegs(d,e);for(c=0;c<b.length;c++)f=b[c],f.event=a,f.eventStartMS=+d,f.eventDurationMS=e-d;return b},bindSegHandlers:function(){var a=this,b=this.view;g.each({mouseenter:function(b,d){a.triggerSegMouseover(b,d)},mouseleave:function(b,d){a.triggerSegMouseout(b,d)},click:function(a,
d){return b.trigger("eventClick",this,a.event,d)},mousedown:function(c,d){g(d.target).is(".fc-resizer")&&b.isEventResizable(c.event)?a.segResizeMousedown(c,d):b.isEventDraggable(c.event)&&a.segDragMousedown(c,d)}},function(b,d){a.el.on(b,".fc-event-container > *",function(b){var c=g(this).data("fc-seg");if(c&&!a.isDraggingSeg&&!a.isResizingSeg)return d.call(this,c,b)})})},triggerSegMouseover:function(a,b){this.mousedOverSeg||(this.mousedOverSeg=a,this.view.trigger("eventMouseover",a.el[0],a.event,
b))},triggerSegMouseout:function(a,b){b=b||{};this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",a.el[0],a.event,b))},segDragMousedown:function(a,b){var c=this,d=this.view,e=a.el,f=a.event,h,g,l=new Ka(a.el,{parentEl:d.el,opacity:d.opt("dragOpacity"),revertDuration:d.opt("dragRevertDuration"),zIndex:2}),r=new Z(d.coordMap,{distance:5,scroll:d.opt("dragScroll"),listenStart:function(a){l.hide();l.start(a)},dragStart:function(b){c.triggerSegMouseout(a,
b);c.isDraggingSeg=!0;d.hideEvent(f);d.trigger("eventDragStart",e[0],f,b,{})},cellOver:function(b,e){var f=c.computeDraggedEventDates(a,a.cellDate||r.origDate,e);h=f.start;g=f.end;d.renderDrag(h,g,a)?l.hide():l.show()},cellOut:function(){h=null;d.destroyDrag();l.show()},dragStop:function(a){var b=h&&!h.isSame(f.start);l.stop(!b,function(){c.isDraggingSeg=!1;d.destroyDrag();d.showEvent(f);d.trigger("eventDragStop",e[0],f,a,{});b&&d.eventDrop(e[0],f,h,a)})},listenStop:function(){l.stop()}});r.mousedown(b)},
computeDraggedEventDates:function(a,b,c){a=a.event;var d=a.start,e=this.view.calendar.getEventEnd(a);c.hasTime()===b.hasTime()?(b=Y(c,b),c=d.clone().add(b),a=null===a.end?null:e.clone().add(b)):a=null;return{start:c,end:a}},segResizeMousedown:function(a,b){function c(){d.destroyResize();e.showEvent(h)}var d=this,e=this.view,f=a.el,h=a.event,g=h.start,l=e.calendar.getEventEnd(h),r=null;(new Z(this.coordMap,{distance:5,scroll:e.opt("dragScroll"),dragStart:function(b){d.triggerSegMouseout(a,b);d.isResizingSeg=
!0;e.trigger("eventResizeStart",f[0],h,b,{})},cellOver:function(b,f){f.isBefore(g)&&(f=g);r=f.clone().add(d.cellDuration);r.isSame(l)?(r=null,c()):(d.renderResize(g,r,a),e.hideEvent(h))},cellOut:function(){r=null;c()},dragStop:function(a){d.isResizingSeg=!1;c();e.trigger("eventResizeStop",f[0],h,a,{});r&&e.eventResize(f[0],h,r,a)}})).mousedown(b)},getSegClasses:function(a,b,c){var d=a.event;a=["fc-event","fc-event-type"+a.event.type,"fc-event-state"+a.event.state,a.isStart?"fc-start":"fc-not-start",
a.isEnd?"fc-end":"fc-not-end"].concat(d.className,d.source?d.source.className:[]);b&&a.push("fc-draggable");c&&a.push("fc-resizable");return a},getEventSkinCss:function(a){var b=this.view,c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor"),g=a.backgroundColor||d||c.backgroundColor||e||b.opt("eventBackgroundColor")||f,d=a.borderColor||d||c.borderColor||e||b.opt("eventBorderColor")||f;a=a.textColor||c.textColor||b.opt("eventTextColor");b=[];g&&b.push("background-color:"+g);d&&b.push("border-color:"+
d);a&&b.push("color:"+a);return b.join(";")}});W.prototype=H(J.prototype);g.extend(W.prototype,{numbersVisible:!1,cellDuration:p.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,highlightEls:null,render:function(a){var b=this.view,c="",d;for(d=0;d<b.rowCnt;d++)c+=this.dayRowHtml(d,a);this.el.html(c);this.rowEls=this.el.find(".fc-row");this.dayEls=this.el.find(".fc-day");this.dayEls.each(function(a,c){var d=b.cellToDate(Math.floor(a/b.colCnt),a%b.colCnt);b.trigger("dayRender",
null,d,g(c))});J.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(a,b){var c=["fc-row","fc-week",this.view.widgetContentClass];b&&c.push("fc-rigid");return'<div class="'+c.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",a)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a,b,c){return this.bgCellHtml(a,b,c)},buildCoords:function(a,
b){var c,d,e;this.dayEls.slice(0,this.view.colCnt).each(function(a,h){c=g(h);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();this.rowEls.each(function(b,h){c=g(h);d=c.offset().top;b&&(e[1]=d);e=[d];a[b]=e});e[1]=d+c.outerHeight()+this.bottomCoordPadding},getCellDate:function(a){return this.view.cellToDate(a)},getCellDayEl:function(a){return this.dayEls.eq(a.row*this.view.colCnt+a.col)},rangeToSegs:function(a,b){return this.view.rangeToSegments(a,b)},renderDrag:function(a,b,c){this.renderHighlight(a,
b||this.view.calendar.getDefaultEventEnd(!0,a));if(c&&!c.el.closest(this.el).length)return this.renderRangeHelper(a,b,c),a=this.view.opt("dragOpacity"),void 0!==a&&this.helperEls.css("opacity",a),!0},destroyDrag:function(){this.destroyHighlight();this.destroyHelper()},renderResize:function(a,b,c){this.renderHighlight(a,b);this.renderRangeHelper(a,b,c)},destroyResize:function(){this.destroyHighlight();this.destroyHelper()},renderHelper:function(a,b){var c=[],d=this.renderEventRows([a]);this.rowEls.each(function(a,
f){var h=g(f),n=g('<div class="fc-helper-skeleton"><table/></div>'),l;l=b&&b.row===a?b.el.position().top:h.find(".fc-content-skeleton tbody").position().top;n.css("top",l).find("table").append(d[a].tbodyEl);h.append(n);c.push(n[0])});this.helperEls=g(c)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},renderHighlight:function(a,b){var c=this.rangeToSegs(a,b),d=[],e,f,h;for(e=0;e<c.length;e++)f=c[e],h=g(this.highlightSkeletonHtml(f.leftCol,f.rightCol+1)),h.appendTo(this.rowEls[f.row]),
d.push(h[0]);this.highlightEls=g(d)},destroyHighlight:function(){this.highlightEls&&(this.highlightEls.remove(),this.highlightEls=null)},highlightSkeletonHtml:function(a,b){var c=this.view.colCnt,d="";0<a&&(d+='<td colspan="'+a+'"/>');b>a&&(d+='<td colspan="'+(b-a)+'" class="fc-highlight" />');c>b&&(d+='<td colspan="'+(c-b)+'"/>');d=this.bookendCells(d,"highlight");return'<div class="fc-highlight-skeleton"><table><tr>'+d+"</tr></table></div>"}});g.extend(W.prototype,{segs:null,rowStructs:null,renderEvents:function(a){var b=
this.rowStructs=this.renderEventRows(a),c=[];this.rowEls.each(function(a,e){g(e).find(".fc-content-skeleton > table").append(b[a].tbodyEl);c.push.apply(c,b[a].segs)});this.segs=c},getSegs:function(){return(this.segs||[]).concat(this.popoverSegs||[])},destroyEvents:function(){var a,b;J.prototype.destroyEvents.call(this);for(a=this.rowStructs||[];b=a.pop();)b.tbodyEl.remove();this.segs=null;this.destroySegPopover()},renderEventRows:function(a){var b=this.eventsToSegs(a);a=[];var c,b=this.renderSegs(b),
b=this.groupSegRows(b);for(c=0;c<b.length;c++)a.push(this.renderEventRow(c,b[c]));return a},renderSegHtml:function(a,b){var c=this.view,d=c.opt("isRTL"),e=a.event,f=c.isEventDraggable(e),g=!b&&e.allDay&&a.isEnd&&c.isEventResizable(e),f=this.getSegClasses(a,f,g),n=this.getEventSkinCss(e),l="";console.log(e);f.unshift("fc-day-grid-event");!e.allDay&&a.isStart&&(l='<span class="fc-time">'+C(c.getEventTimeText(e))+"</span>");c='<span class="fc-title">'+(C(e.title||"")||"&nbsp;")+"</span>";return'<a class="'+
f.join(" ")+'"'+(e.url?' href="'+C(e.url)+'"':"")+(n?' style="'+n+'"':"")+'><div class="fc-content">'+(d?c+" "+l:l+" "+c)+"</div>"+(g?'<div class="fc-resizer"/>':"")+"</a>"},renderEventRow:function(a,b){function c(a){for(;k<a;)(v=(r[q-1]||[])[k])?v.attr("rowspan",parseInt(v.attr("rowspan")||1,10)+1):(v=g("<td/>"),p.append(v)),l[q][k]=v,r[q][k]=v,k++}var d=this.view.colCnt,e=this.buildSegLevels(b),f=Math.max(1,e.length),h=g("<tbody/>"),n=[],l=[],r=[],q,m,k,p,w,x,v;for(q=0;q<f;q++){m=e[q];k=0;p=g("<tr/>");
n.push([]);l.push([]);r.push([]);if(m)for(w=0;w<m.length;w++){x=m[w];c(x.leftCol);v=g('<td class="fc-event-container"/>').append(x.el);for(x.leftCol!=x.rightCol?v.attr("colspan",x.rightCol-x.leftCol+1):r[q][k]=v;k<=x.rightCol;)l[q][k]=v,n[q][k]=x,k++;p.append(v)}c(d);this.bookendCells(p,"eventSkeleton");h.append(p)}return{row:a,tbodyEl:h,cellMatrix:l,segMatrix:n,segLevels:e,segs:b}},buildSegLevels:function(a){var b=[],c,d,e;a.sort(la);for(c=0;c<a.length;c++){d=a[c];for(e=0;e<b.length;e++){var f;a:{f=
b[e];for(var g=void 0,n=void 0,g=0;g<f.length;g++)if(n=f[g],n.leftCol<=d.rightCol&&n.rightCol>=d.leftCol){f=!0;break a}f=!1}if(!f)break}d.level=e;(b[e]||(b[e]=[])).push(d)}for(e=0;e<b.length;e++)b[e].sort(Xa);return b},groupSegRows:function(a){var b=this.view,c=[],d;for(d=0;d<b.rowCnt;d++)c.push([]);for(d=0;d<a.length;d++)c[a[d].row].push(a[d]);return c}});g.extend(W.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var b=
this.rowStructs||[],c,d;for(c=0;c<b.length;c++)this.unlimitRow(c),d=a?"number"===typeof a?a:this.computeRowLevelLimit(c):!1,!1!==d&&this.limitRow(c,d)},computeRowLevelLimit:function(a){var b=this.rowEls.eq(a).height();a=this.rowStructs[a].tbodyEl.children();var c,d;for(c=0;c<a.length;c++)if(d=a.eq(c).removeClass("fc-limited"),d.position().top+d.outerHeight()>b)return c;return!1},limitRow:function(a,b){function c(c){for(;n<c;)l={row:a,col:n},w=d.getCellSegs(l,b),w.length&&(y=q[b-1][n],R=d.renderMoreLink(l,
w),t=g("<div/>").append(R),y.append(t),h.push(t[0])),n++}var d=this,e=this.view,f=this.rowStructs[a],h=[],n=0,l,r,q,m,k,p,w,x,v,y,u,B,A,t,R;if(b&&b<f.segLevels.length){r=f.segLevels[b-1];q=f.cellMatrix;m=f.tbodyEl.children().slice(b).addClass("fc-limited").get();for(k=0;k<r.length;k++){p=r[k];c(p.leftCol);v=[];for(x=0;n<=p.rightCol;)l={row:a,col:n},w=this.getCellSegs(l,b),v.push(w),x+=w.length,n++;if(x){y=q[b-1][p.leftCol];x=y.attr("rowspan")||1;u=[];for(B=0;B<v.length;B++)A=g('<td class="fc-more-cell"/>').attr("rowspan",
x),w=v[B],l={row:a,col:p.leftCol+B},R=this.renderMoreLink(l,[p].concat(w)),t=g("<div/>").append(R),A.append(t),u.push(A[0]),h.push(A[0]);y.addClass("fc-limited").after(g(u));m.push(y[0])}}c(e.colCnt);f.moreEls=g(h);f.limitedEls=g(m)}},unlimitRow:function(a){a=this.rowStructs[a];a.moreEls&&(a.moreEls.remove(),a.moreEls=null);a.limitedEls&&(a.limitedEls.removeClass("fc-limited"),a.limitedEls=null)},renderMoreLink:function(a,b){var c=this,d=this.view;return g('<a class="fc-more"/>').text(this.getMoreLinkText(b.length)).on("click",
function(e){var f=d.opt("eventLimitClick"),h=d.cellToDate(a),n=g(this),l=c.getCellDayEl(a),r=c.getCellSegs(a),r=c.resliceDaySegs(r,h),q=c.resliceDaySegs(b,h);"function"===typeof f&&(f=d.trigger("eventLimitClick",null,{date:h,dayEl:l,moreEl:n,segs:r,hiddenSegs:q},e));"popover"===f?c.showSegPopover(h,a,n,r):"string"===typeof f&&d.calendar.zoomTo(h,f)})},showSegPopover:function(a,b,c,d){var e=this,f=this.view;c=c.parent();b=1==f.rowCnt?this.view.el:this.rowEls.eq(b.row);a={className:"fc-more-popover",
content:this.renderSegPopoverContent(a,d),parentEl:this.el,top:b.offset().top,autoHide:!0,viewportConstrain:f.opt("popoverViewportConstrain"),hide:function(){e.segPopover.destroy();e.segPopover=null;e.popoverSegs=null}};f.opt("isRTL")?a.right=c.offset().left+c.outerWidth()+1:a.left=c.offset().left-1;this.segPopover=new Ha(a);this.segPopover.show()},renderSegPopoverContent:function(a,b){var c=this.view,d=c.opt("theme"),e=a.format(c.opt("dayPopoverFormat")),c=g('<div class="fc-header '+c.widgetHeaderClass+
'"><span class="fc-close '+(d?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+C(e)+'</span><div class="fc-clear"/></div><div class="fc-body '+c.widgetContentClass+'"><div class="fc-event-container"></div></div>'),d=c.find(".fc-event-container");this.popoverSegs=b=this.renderSegs(b,!0);for(e=0;e<b.length;e++)b[e].cellDate=a,d.append(b[e].el);return c},resliceDaySegs:function(a,b){var c=g.map(a,function(a){return a.event}),d=b.clone().stripTime(),e=d.clone().add(1,
"days");return this.eventsToSegs(c,d,e)},getMoreLinkText:function(a){var b=this.view.opt("eventLimitText");return"function"===typeof b?b(a):"+"+a+" "+b},getCellSegs:function(a,b){for(var c=this.rowStructs[a.row].segMatrix,d=b||0,e=[],f;d<c.length;)(f=c[d][a.col])&&e.push(f),d++;return e}});ca.prototype=H(J.prototype);g.extend(ca.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,highlightEl:null,helperEl:null,render:function(){this.processOptions();
this.el.html(this.renderHtml());this.dayEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.computeSlatTops();J.prototype.render.call(this)},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a,b,c){return this.bgCellHtml(a,b,c)},slatRowHtml:function(){for(var a=this.view,b=a.calendar,c=a.opt("isRTL"),d="",e=0===this.slotDuration.asMinutes()%
15,f=p.duration(+this.minTime),g,n;f<this.maxTime;)g=a.start.clone().time(f),n=g.minutes(),g='<td class="fc-axis fc-time '+a.widgetContentClass+'" '+a.axisStyleAttr()+">"+(e&&n?"<span>"+C(b.formatDate(g,a.opt("axisFormat")))+"</span>":"<span>"+C(b.formatDate(g,a.opt("axisFormat")))+":00</span>")+"</td>",d+="<tr "+(n?'class="fc-minor"':"")+">"+(c?"":g)+'<td class="'+a.widgetContentClass+'"/>'+(c?g:"")+"</tr>",f.add(this.slotDuration);return d},processOptions:function(){var a=this.view,b=a.opt("slotDuration"),
c=a.opt("snapDuration"),b=p.duration(b),c=c?p.duration(c):b;this.slotDuration=b;this.cellDuration=this.snapDuration=c;this.minTime=p.duration(a.opt("minTime"));this.maxTime=p.duration(a.opt("maxTime"))},rangeToSegs:function(a,b){var c=this.view,d=[],e,f,g;a=a.clone().stripZone();b=b.clone().stripZone();for(f=0;f<c.colCnt;f++)if(g=c.cellToDate(0,f),e=g.clone().time(this.minTime),g=g.clone().time(this.maxTime),e=Da(a,b,e,g))e.col=f,d.push(e);return d},resize:function(){this.computeSlatTops();this.updateSegVerticals()},
buildCoords:function(a,b){var c=this.view.colCnt,d=this.el.offset().top,e=p.duration(+this.minTime),f=null,h,n;this.dayEls.slice(0,c).each(function(a,c){h=g(c);n=h.offset().left;f&&(f[1]=n);f=[n];b[a]=f});f[1]=n+h.outerWidth();for(f=null;e<this.maxTime;)n=d+this.computeTimeTop(e),f&&(f[1]=n),f=[n],a.push(f),e.add(this.snapDuration);f[1]=d+this.computeTimeTop(e)},getCellDate:function(a){var b=this.view;return b.calendar.rezoneDate(b.cellToDate(0,a.col).time(this.minTime+this.snapDuration*a.row))},
getCellDayEl:function(a){return this.dayEls.eq(a.col)},computeDateTop:function(a,b){return this.computeTimeTop(p.duration(a.clone().stripZone()-b.clone().stripTime()))},computeTimeTop:function(a){var b=(a-this.minTime)/this.slotDuration,c,b=Math.max(0,b),b=Math.min(this.slatEls.length,b);a=Math.floor(b);b-=a;c=this.slatTops[a];return b?(a=this.slatTops[a+1],c+(a-c)*b):c},computeSlatTops:function(){var a=[],b;this.slatEls.each(function(c,d){b=g(d).position().top;a.push(b)});a.push(b+this.slatEls.last().outerHeight());
this.slatTops=a},renderDrag:function(a,b,c){if(c)return this.renderRangeHelper(a,b,c),a=this.view.opt("dragOpacity"),void 0!==a&&this.helperEl.css("opacity",a),!0;this.renderHighlight(a,b||this.view.calendar.getDefaultEventEnd(!1,a))},destroyDrag:function(){this.destroyHelper();this.destroyHighlight()},renderResize:function(a,b,c){this.renderRangeHelper(a,b,c)},destroyResize:function(){this.destroyHelper()},renderHelper:function(a,b){var c=this.renderEventTable([a]),d=c.tableEl,c=c.segs,e,f,h;for(e=
0;e<c.length;e++)f=c[e],b&&b.col===f.col&&(h=b.el,f.el.css({left:h.css("left"),right:h.css("right"),"margin-left":h.css("margin-left"),"margin-right":h.css("margin-right")}));this.helperEl=g('<div class="fc-helper-skeleton"/>').append(d).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(a,b){this.view.opt("selectHelper")?this.renderRangeHelper(a,b):this.renderHighlight(a,b)},destroySelection:function(){this.destroyHelper();
this.destroyHighlight()},renderHighlight:function(a,b){this.highlightEl=g(this.highlightSkeletonHtml(a,b)).appendTo(this.el)},destroyHighlight:function(){this.highlightEl&&(this.highlightEl.remove(),this.highlightEl=null)},highlightSkeletonHtml:function(a,b){var c=this.view,d=this.rangeToSegs(a,b),e="",f=0,g,n,l,r;for(g=0;g<d.length;g++)n=d[g],f<n.col&&(e+='<td colspan="'+(n.col-f)+'"/>',f=n.col),l=c.cellToDate(0,f),r=this.computeDateTop(n.start,l),n=this.computeDateTop(n.end,l),e+='<td><div class="fc-highlight-container"><div class="fc-highlight" style="top:'+
r+"px;bottom:-"+n+'px"/></div></td>',f++;f<c.colCnt&&(e+='<td colspan="'+(c.colCnt-f)+'"/>');e=this.bookendCells(e,"highlight");return'<div class="fc-highlight-skeleton"><table><tr>'+e+"</tr></table></div>"}});g.extend(ca.prototype,{segs:null,eventSkeletonEl:null,renderEvents:function(a){a=this.renderEventTable(a);this.eventSkeletonEl=g('<div class="fc-content-skeleton"/>').append(a.tableEl);this.el.append(this.eventSkeletonEl);this.segs=a.segs},getSegs:function(){return this.segs||[]},destroyEvents:function(){J.prototype.destroyEvents.call(this);
this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null);this.segs=null},renderEventTable:function(a){var b=g("<table><tr/></table>"),c=b.find("tr");a=this.eventsToSegs(a);var d,e,f,h,n,l;a=this.renderSegs(a);d=this.groupSegCols(a);this.computeSegVerticals(a);for(h=0;h<d.length;h++){f=n=d[h];l=e=e=void 0;f.sort(la);e=f;f=[];var r=l=void 0,q=void 0;for(l=0;l<e.length;l++){r=e[l];for(q=0;q<f.length&&Na(r,f[q]).length;q++);r.level=q;(f[q]||(f[q]=[])).push(r)}f=e=f;var m=q=r=l=
void 0,k=void 0;for(l=0;l<f.length;l++)for(r=f[l],q=0;q<r.length;q++)for(m=r[q],m.forwardSegs=[],k=l+1;k<f.length;k++)Na(m,f[k],m.forwardSegs);if(e=e[0]){for(l=0;l<e.length;l++)Ma(e[l]);for(l=0;l<e.length;l++)ma(e[l],0,0)}l=g('<div class="fc-event-container"/>');for(e=0;e<n.length;e++)f=n[e],f.el.css(this.generateSegPositionCss(f)),30>f.bottom-f.top&&f.el.addClass("fc-short"),l.append(f.el);c.append(g("<td/>").append(l))}this.bookendCells(c,"eventSkeleton");return{tableEl:b,segs:a}},updateSegVerticals:function(){var a=
this.segs,b;if(a)for(this.computeSegVerticals(a),b=0;b<a.length;b++)a[b].el.css(this.generateSegVerticalCss(a[b]))},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},renderSegHtml:function(a,b){var c=this.view,d=a.event,e=c.isEventDraggable(d),f=!b&&a.isEnd&&c.isEventResizable(d),e=this.getSegClasses(a,e,f),g=this.getEventSkinCss(d),n,l,r;e.unshift("fc-time-grid-event");if(c.isMultiDayEvent(d)){if(a.isStart||
a.isEnd)n=c.getEventTimeText(a.start,a.end),l=c.getEventTimeText(a.start,a.end,"LT"),r=c.getEventTimeText(a.start,null)}else n=c.getEventTimeText(d),l=c.getEventTimeText(d,"LT"),r=c.getEventTimeText(d.start,null);return'<a class="'+e.join(" ")+'"'+(d.url?' href="'+C(d.url)+'"':"")+(g?' style="'+g+'"':"")+'><div class="fc-content">'+(n?'<div class="fc-time" data-start="'+C(r)+'" data-full="'+C(l)+'"><span>'+C(n)+"</span></div>":"")+(d.title?'<div class="fc-title">'+C(d.title)+"</div>":"")+'</div><div class="fc-bg"/>'+
(f?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(a){var b=this.view,c=b.opt("isRTL"),b=b.opt("slotEventOverlap"),d=a.backwardCoord,e=a.forwardCoord,f=this.generateSegVerticalCss(a),g;b&&(e=Math.min(1,d+2*(e-d)));c?g=1-e:(g=d,d=1-e);f.zIndex=a.level+1;f.left=100*g+"%";f.right=100*d+"%";b&&a.forwardPressure&&(f[c?"marginLeft":"marginRight"]=20);return f},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(a){var b=this.view,c=[],d;for(d=
0;d<b.colCnt;d++)c.push([]);for(d=0;d<a.length;d++)c[a[d].col].push(a[d]);return c}});I.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header";this.widgetContentClass=
a+"-widget-content";this.highlightStateClass=a+"-state-highlight";this.documentMousedownProxy=g.proxy(this,"documentMousedown");this.documentDragStartProxy=g.proxy(this,"documentDragStart")},render:function(){this.updateSize();this.trigger("viewRender",this,this,this.el);g(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect();this.trigger("viewDestroy",this,this,this.el);this.destroyEvents();this.el.empty();g(document).off("mousedown",
this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(a,b){},updateSize:function(a){a&&this.recordScroll();this.updateHeight();this.updateWidth()},updateWidth:function(){},updateHeight:function(){var a=this.calendar;this.setHeight(a.getSuggestedViewHeight(),a.isHeightAuto())},setHeight:function(a,b){},computeScrollerHeight:function(a){var b=this.el.add(this.scrollerEl),c;b.css({position:"relative",left:-1});c=this.el.outerHeight()-this.scrollerEl.height();
b.css({position:"",left:""});return a-c},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderEvents:function(a){this.segEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)});this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)})},resolveEventEl:function(a,b){var c=this.trigger("eventRender",
a,a,b);!1===c?b=null:c&&!0!==c&&(b=g(c));return b},showEvent:function(a){this.segEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.segEach(function(a){a.el.css("visibility","hidden")},a)},segEach:function(a,b){var c=this.getSegs(),d;for(d=0;d<c.length;d++)b&&c[d].event._id!==b._id||a.call(this,c[d])},getSegs:function(){},renderDrag:function(a,b,c){},destroyDrag:function(){},documentDragStart:function(a,b){var c=this,d=null,e;this.opt("droppable")&&(e=new Z(this.coordMap,{cellOver:function(a,
b){d=b;c.renderDrag(b)},cellOut:function(){d=null;c.destroyDrag()}}),g(document).one("dragstop",function(a,b){c.destroyDrag();d&&c.trigger("drop",a.target,d,a,b)}),e.startDrag(a))},select:function(a,b,c){this.unselect(c);this.renderSelection(a,b);this.reportSelection(a,b,c)},renderSelection:function(a,b){},reportSelection:function(a,b,c){this.isSelected=!0;this.trigger("select",null,a,b,c)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,
a))},destroySelection:function(){},documentMousedown:function(a){var b;this.isSelected&&this.opt("unselectAuto")&&1==a.which&&!a.ctrlKey&&((b=this.opt("unselectCancel"))&&g(a.target).closest(b).length||this.unselect(a))}};K.prototype=H(I.prototype);g.extend(K.prototype,{dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,render:function(a,b,c){this.rowCnt=a;this.colCnt=b;this.dayNumbersVisible=c;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=
this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderHtml());this.headRowEl=this.el.find("thead .fc-row");this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.coordMap.containerEl=this.scrollerEl;this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render(this.hasRigidRows());I.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy();I.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+
this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+C(this.opt("weekNumberTitle"))+"</span></th>"},numberIntroHtml:function(a){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+
this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.cellToDate(a,0))+"</span></td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"},numberCellHtml:function(a,b,c){if(!this.dayNumbersVisible)return"<td/>";a=this.dayGrid.getDayClasses(c);a.unshift("fc-day-number");
return'<td class="'+a.join(" ")+'" data-date="'+c.format()+'">'+c.date()+"</td>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!==typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=za(this.el.find(".fc-week-number")))},setHeight:function(a,b){var c=this.opt("eventLimit"),d;ha(this.scrollerEl);xa(this.headRowEl);this.dayGrid.destroySegPopover();
c&&"number"===typeof c&&this.dayGrid.limitRows(c);d=this.computeScrollerHeight(a);this.setGridHeight(d,b);c&&"number"!==typeof c&&this.dayGrid.limitRows(c);!b&&Aa(this.scrollerEl,d)&&(wa(this.headRowEl,Ca(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d),this.restoreScroll())},setGridHeight:function(a,b){b?this.dayGrid.rowEls.height(""):ya(this.dayGrid.rowEls,a,!0)},renderEvents:function(a){this.dayGrid.renderEvents(a);this.updateHeight();I.prototype.renderEvents.call(this,
a)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){I.prototype.destroyEvents.call(this);this.recordScroll();this.dayGrid.destroyEvents()},renderDrag:function(a,b,c){return this.dayGrid.renderDrag(a,b,c)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(a,b){this.dayGrid.renderSelection(a,b)},destroySelection:function(){this.dayGrid.destroySelection()}});D({fixedWeekCount:!0});M.month=na;na.prototype=H(K.prototype);g.extend(na.prototype,{name:"month",
incrementDate:function(a,b){return a.clone().stripTime().add(b,"months").startOf("month")},render:function(a){this.intervalStart=a.clone().stripTime().startOf("month");this.intervalEnd=this.intervalStart.clone().add(1,"months");this.start=this.intervalStart.clone();this.start=this.skipHiddenDays(this.start);this.start.startOf("week");this.start=this.skipHiddenDays(this.start);this.end=this.intervalEnd.clone();this.end=this.skipHiddenDays(this.end,-1,!0);this.end.add((7-this.end.weekday())%7,"days");
this.end=this.skipHiddenDays(this.end,-1,!0);a=Math.ceil(this.end.diff(this.start,"weeks",!0));this.isFixedWeeks()&&(this.end.add(6-a,"weeks"),a=6);this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat"));K.prototype.render.call(this,a,this.getCellsPerWeek(),!0)},setGridHeight:function(a,b){(b=b||"variable"===this.opt("weekMode"))&&(a*=this.rowCnt/6);ya(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}});
M.basicWeek=oa;oa.prototype=H(K.prototype);g.extend(oa.prototype,{name:"basicWeek",incrementDate:function(a,b){return a.clone().stripTime().add(b,"weeks").startOf("week")},render:function(a){this.intervalStart=a.clone().stripTime().startOf("week");this.intervalEnd=this.intervalStart.clone().add(1,"weeks");this.start=this.skipHiddenDays(this.intervalStart);this.end=this.skipHiddenDays(this.intervalEnd,-1,!0);this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat"),
" \u2014 ");K.prototype.render.call(this,1,this.getCellsPerWeek(),!1)}});M.basicDay=pa;pa.prototype=H(K.prototype);g.extend(pa.prototype,{name:"basicDay",incrementDate:function(a,b){var c=a.clone().stripTime().add(b,"days");return c=this.skipHiddenDays(c,0>b?-1:1)},render:function(a){this.start=this.intervalStart=a.clone().stripTime();this.end=this.intervalEnd=this.start.clone().add(1,"days");this.title=this.calendar.formatDate(this.start,this.opt("titleFormat"));K.prototype.render.call(this,1,1,
!1)}});D({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:function(a,b){return b.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},timeFormat:{agenda:function(a,b){return b.longDateFormat("LT").replace(/\s*a$/i,"")}},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});P.prototype=H(I.prototype);g.extend(P.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,
render:function(a){this.rowCnt=1;this.colCnt=a;this.el.addClass("fc-agenda-view").html(this.renderHtml());this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.coordMap.containerEl=this.scrollerEl;this.timeGrid.el=this.el.find(".fc-time-grid");this.timeGrid.render();this.bottomRuleEl=g('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight());
this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)");I.prototype.render.call(this);this.resetScroll()},destroy:function(){this.timeGrid.destroy();this.dayGrid&&this.dayGrid.destroy();I.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},
headIntroHtml:function(){var a,b;return this.opt("weekNumbers")?(a=this.cellToDate(0,0),a=this.calendar.calculateWeekNumber(a),b=this.opt("weekNumberTitle"),a=this.opt("isRTL")?a+b:b+a,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+C(a)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||
C(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(a){a&&this.timeGrid.resize();I.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=za(this.el.find(".fc-axis"))},setHeight:function(a,
b){var c;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight());this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");ha(this.scrollerEl);xa(this.noScrollRowEls);this.dayGrid&&(this.dayGrid.destroySegPopover(),(c=this.opt("eventLimit"))&&"number"!==typeof c&&(c=5),c&&this.dayGrid.limitRows(c));b||(c=this.computeScrollerHeight(a),Aa(this.scrollerEl,c)?(wa(this.noScrollRowEls,Ca(this.scrollerEl)),c=this.computeScrollerHeight(a),this.scrollerEl.height(c),this.restoreScroll()):
(this.scrollerEl.height(c).css("overflow","hidden"),this.bottomRuleEl.show()))},resetScroll:function(){function a(){b.scrollerEl.scrollTop(d)}var b=this,c=p.duration(this.opt("scrollTime")),d=this.timeGrid.computeTimeTop(c);(d=Math.ceil(d))&&d++;a();setTimeout(a,0)},renderEvents:function(a){var b=[],c=[],d;for(d=0;d<a.length;d++)a[d].allDay?b.push(a[d]):c.push(a[d]);this.timeGrid.renderEvents(c);this.dayGrid&&this.dayGrid.renderEvents(b);this.updateHeight();I.prototype.renderEvents.call(this,a)},
getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){I.prototype.destroyEvents.call(this);this.recordScroll();this.timeGrid.destroyEvents();this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(a,b,c){if(a.hasTime())return this.timeGrid.renderDrag(a,b,c);if(this.dayGrid)return this.dayGrid.renderDrag(a,b,c)},destroyDrag:function(){this.timeGrid.destroyDrag();this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(a,
b){a.hasTime()||b.hasTime()?this.timeGrid.renderSelection(a,b):this.dayGrid&&this.dayGrid.renderSelection(a,b)},destroySelection:function(){this.timeGrid.destroySelection();this.dayGrid&&this.dayGrid.destroySelection()}});M.agendaWeek=qa;qa.prototype=H(P.prototype);g.extend(qa.prototype,{name:"agendaWeek",incrementDate:function(a,b){return a.clone().stripTime().add(b,"weeks").startOf("week")},render:function(a){this.intervalStart=a.clone().stripTime().startOf("week");this.intervalEnd=this.intervalStart.clone().add(1,
"weeks");this.start=this.skipHiddenDays(this.intervalStart);this.end=this.skipHiddenDays(this.intervalEnd,-1,!0);this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," \u2014 ");P.prototype.render.call(this,this.getCellsPerWeek())}});M.agendaDay=ra;ra.prototype=H(P.prototype);g.extend(ra.prototype,{name:"agendaDay",incrementDate:function(a,b){var c=a.clone().stripTime().add(b,"days");return c=this.skipHiddenDays(c,0>b?-1:1)},render:function(a){this.start=
this.intervalStart=a.clone().stripTime();this.end=this.intervalEnd=this.start.clone().add(1,"days");this.title=this.calendar.formatDate(this.start,this.opt("titleFormat"));P.prototype.render.call(this,1)}})});
(function(g){"function"==typeof define&&define.amd?define(["jquery","moment"],g):g(jQuery,moment)})(function(g,p){function D(g,p,D){var fa={mm:p?"\u043c\u0438\u043d\u0443\u0442\u0430_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442":"\u043c\u0438\u043d\u0443\u0442\u0443_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043e\u0432",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u044f_\u0434\u043d\u0435\u0439",
MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u0430_\u043c\u0435\u0441\u044f\u0446\u0435\u0432",yy:"\u0433\u043e\u0434_\u0433\u043e\u0434\u0430_\u043b\u0435\u0442"};"m"===D?g=p?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0443":(p=+g,D=fa[D].split("_"),g=g+" "+(1===p%10&&11!==p%100?D[0]:2<=p%10&&4>=p%10&&(10>p%100||20<=p%100)?D[1]:D[2]));return g}(p.defineLocale||p.lang).call(p,"ru",{months:function(g,p){return{nominative:"\u044f\u043d\u0432\u0430\u0440\u044c \u0444\u0435\u0432\u0440\u0430\u043b\u044c \u043c\u0430\u0440\u0442 \u0430\u043f\u0440\u0435\u043b\u044c \u043c\u0430\u0439 \u0438\u044e\u043d\u044c \u0438\u044e\u043b\u044c \u0430\u0432\u0433\u0443\u0441\u0442 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u043e\u043a\u0442\u044f\u0431\u0440\u044c \u043d\u043e\u044f\u0431\u0440\u044c \u0434\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),
accusative:"\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" ")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(p)?"accusative":
"nominative"][g.month()]},monthsShort:function(g,p){return{nominative:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d\u044c \u0438\u044e\u043b\u044c \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" "),accusative:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" ")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(p)?
"accusative":"nominative"][g.month()]},weekdays:function(g,p){return{nominative:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),accusative:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0443 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0443 \u0441\u0443\u0431\u0431\u043e\u0442\u0443".split(" ")}[/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e)? ?\] ?dddd/.test(p)?
"accusative":"nominative"][g.day()]},weekdaysShort:"\u0432\u0441 \u043f\u043d \u0432\u0442 \u0441\u0440 \u0447\u0442 \u043f\u0442 \u0441\u0431".split(" "),weekdaysMin:"\u0432\u0441 \u043f\u043d \u0432\u0442 \u0441\u0440 \u0447\u0442 \u043f\u0442 \u0441\u0431".split(" "),monthsParse:[/^\u044f\u043d\u0432/i,/^\u0444\u0435\u0432/i,/^\u043c\u0430\u0440/i,/^\u0430\u043f\u0440/i,/^\u043c\u0430[\u0439|\u044f]/i,/^\u0438\u044e\u043d/i,/^\u0438\u044e\u043b/i,/^\u0430\u0432\u0433/i,/^\u0441\u0435\u043d/i,/^\u043e\u043a\u0442/i,
/^\u043d\u043e\u044f/i,/^\u0434\u0435\u043a/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., LT",LLLL:"dddd, D MMMM YYYY \u0433., LT"},calendar:{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432] LT",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430 \u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432] LT",nextWeek:function(){return 2===this.day()?"[\u0412\u043e] dddd [\u0432] LT":"[\u0412] dddd [\u0432] LT"},lastWeek:function(){switch(this.day()){case 0:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u043e\u0435] dddd [\u0432] LT";
case 1:case 2:case 4:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0439] dddd [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u0443\u044e] dddd [\u0432] LT"}},sameElse:"L"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043d\u0430\u0437\u0430\u0434",s:"\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434",m:D,mm:D,h:"\u0447\u0430\u0441",hh:D,d:"\u0434\u0435\u043d\u044c",dd:D,M:"\u043c\u0435\u0441\u044f\u0446",
MM:D,y:"\u0433\u043e\u0434",yy:D},meridiemParse:/\u043d\u043e\u0447\u0438|\u0443\u0442\u0440\u0430|\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430/i,isPM:function(g){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430)$/.test(g)},meridiem:function(g){return 4>g?"\u043d\u043e\u0447\u0438":12>g?"\u0443\u0442\u0440\u0430":17>g?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u0435\u0440\u0430"},ordinal:function(g,p){switch(p){case "M":case "d":case "DDD":return g+"-\u0439";case "D":return g+
"-\u0433\u043e";case "w":case "W":return g+"-\u044f";default:return g}},week:{dow:1,doy:7}});g.fullCalendar.datepickerLang("ru","ru",{closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",prevText:"&#x3C;\u041f\u0440\u0435\u0434",nextText:"\u0421\u043b\u0435\u0434&#x3E;",currentText:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",monthNames:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),
monthNamesShort:"\u042f\u043d\u0432 \u0424\u0435\u0432 \u041c\u0430\u0440 \u0410\u043f\u0440 \u041c\u0430\u0439 \u0418\u044e\u043d \u0418\u044e\u043b \u0410\u0432\u0433 \u0421\u0435\u043d \u041e\u043a\u0442 \u041d\u043e\u044f \u0414\u0435\u043a".split(" "),dayNames:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),
dayNamesShort:"\u0432\u0441\u043a \u043f\u043d\u0434 \u0432\u0442\u0440 \u0441\u0440\u0434 \u0447\u0442\u0432 \u043f\u0442\u043d \u0441\u0431\u0442".split(" "),dayNamesMin:"\u0412\u0441 \u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431".split(" "),weekHeader:"\u041d\u0435\u0434",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""});g.fullCalendar.lang("ru",{defaultButtonText:{month:"\u041c\u0435\u0441\u044f\u0446",week:"\u041d\u0435\u0434\u0435\u043b\u044f",
day:"\u0414\u0435\u043d\u044c",list:"\u041f\u043e\u0432\u0435\u0441\u0442\u043a\u0430 \u0434\u043d\u044f"},allDayText:"\u0412\u0435\u0441\u044c \u0434\u0435\u043d\u044c",eventLimitText:function(g){return"+ \u0435\u0449\u0451 "+g}})});



!function(a){"use strict";function b(a){var b=null;if(window.DOMParser)try{b=(new DOMParser).parseFromString(a,"text/xml")}catch(c){b=null}else if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)||(b=null)}catch(d){b=null}return b}var c,d,e;!function(){function a(a){var b,d,e,f,g,h;for(e=a.length,d=0,b="";e>d;){if(f=255&a.charCodeAt(d++),d==e){b+=c.charAt(f>>2),b+=c.charAt((3&f)<<4),b+="==";break}if(g=a.charCodeAt(d++),d==e){b+=c.charAt(f>>2),b+=c.charAt((3&f)<<4|(240&g)>>4),b+=c.charAt((15&g)<<2),b+="=";break}h=a.charCodeAt(d++),b+=c.charAt(f>>2),b+=c.charAt((3&f)<<4|(240&g)>>4),b+=c.charAt((15&g)<<2|(192&h)>>6),b+=c.charAt(63&h)}return b}function b(a){var b,c,e,f,g,h,i;for(h=a.length,g=0,i="";h>g;){do b=d[255&a.charCodeAt(g++)];while(h>g&&-1==b);if(-1==b)break;do c=d[255&a.charCodeAt(g++)];while(h>g&&-1==c);if(-1==c)break;i+=String.fromCharCode(b<<2|(48&c)>>4);do{if(e=255&a.charCodeAt(g++),61==e)return i;e=d[e]}while(h>g&&-1==e);if(-1==e)break;i+=String.fromCharCode((15&c)<<4|(60&e)>>2);do{if(f=255&a.charCodeAt(g++),61==f)return i;f=d[f]}while(h>g&&-1==f);if(-1==f)break;i+=String.fromCharCode((3&e)<<6|f)}return i}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);window.btoa||(window.btoa=a),window.atob||(window.atob=b)}(),d=function(){this.type=null},d.prototype.isTransfer=function(){return"1"===this.type},d.prototype.isIncoming=function(){return"2"===this.type},d.prototype.isHistory=function(){return"4"===this.type},d.prototype.isOutcoming=function(){return"8"===this.type},d.prototype.isOutcomingAnswer=function(){return"16"===this.type},d.prototype.isIncomingAnswer=function(){return"32"===this.type},e=function(c,d){d||(c=atob(c)),this.body=a(b(c))},e.prototype.getEvents=function(){var b=[];return this.body.find("Event").each(function(){var c=new d;a.each(this.attributes,function(a,b){c[b.name]=b.value.trim()}),b.push(c)}),b},e.prepareRequest=function(a,b,c){var d="<Request><ProtocolVersion>1</ProtocolVersion><Method>"+a+"</Method><RequestID>0</RequestID><Data>"+b+"</Data></Request>";return c||(d=btoa(d)),d},c=function(){function a(a){var b={port:"10150",prefix:"ws"};return null===a.match(/:\d+$/)&&(a=a+":"+b.port),null===a.match(/^wss?p?:\/\//)&&(a=b.prefix+"://"+a),a}function b(a){return btoa(a||"")}var c="",d=null,f=null,g=!1,h={},i=32;this.version="1.0.2",this.setUserPhone=function(a){c=a},this.connect=function(j){if(f=a(j.host),g=0===f.indexOf("wss"),j.client_id&&j.client_id.length>i)return{result:"error",text:"Password exceeds max length of "+i};c=j.user_phone||c;var k=f+"?CID="+b(j.client_id)+"&CT="+j.client_type+"&GID="+c+"&PhoneNumber="+c+"&BroadcastEventsMask=0&BroadcastGroup="+(j.broadcast_group||"")+"&PzProtocolVersion=1";return d=new WebSocket(k),d.onopen=function(a){h.onConnect&&"function"==typeof h.onConnect&&h.onConnect(a)},d.onclose=function(a){h.onDisconnect&&"function"==typeof h.onDisconnect&&h.onDisconnect(a)},d.onmessage=function(a){var b,c,d;if(void 0===a.data)return!1;for(c=new e(a.data,g),d=c.getEvents(),b=0;b<d.length;b+=1)h.onEvent&&"function"==typeof h.onEvent&&h.onEvent(d[b])},{result:"ok"}},this.disconnect=function(){d&&d.close()},this.isConnected=function(){return d&&1===d.readyState},this.onConnect=function(a){h.onConnect=a},this.onDisconnect=function(a){h.onDisconnect=a},this.onEvent=function(a){h.onEvent=a},this.call=function(a){d.send(e.prepareRequest("Call","<From>"+c+"</From><To>"+a+"</To>",g))},this.transfer=function(a,b){d.send(e.prepareRequest("Transfer","<CallID>"+a+"</CallID><To>"+(b||"")+"</To>",g))}},window.pz=window.prostiezvonki=new c}(jQuery);
(function(b,g,h){b.widget("sui.dialogLight",{options:{speed:0,modal:!0,activeModal:!0,closeBtn:!0,functionClose:!1,tip:!1,id:"",body:{},popup:{},overlay:{},popup_overlay:{},closeEvents:"",stateClick:!1,actionClose:!1},_init:function(){this.options.actionClose&&this.options.popup.length&&this.close()},_create:function(){this.options.actionClose?this.destroy():this.create_()},create_:function(){var a=this.element,c="";this.options.idEl=a.attr("id");this.options.body=b("body");this.options.popup=a;this.options.overlay=
b("#popUpOverlay");this.options.closeEvents="mousedown.popUp_"+this.options.idEl+" focusin.popUp_"+this.options.idEl;a.addClass("popUp");this.defaultConfig();pogodi(!0);this.options.body.data("popUp")||b("body").data("popUp",{allPopup:[]});0!=this.options.tip?(a.addClass("popup-overlay context-menu").detach().insertBefore("#"+this.options.tip),this.options.activeModal=!1,this.options.modal=!1,this.options.closeBtn=!1):a.parent().hasClass("popup-position-overlay")||(b("body").css("overflow","hidden"),
a.wrap('<div class="popup-overlay popup-position-overlay"></div>'));this.options.closeBtn&&(c+='<div style="" class="popUp-Close close sprites-close"></div>');a.prepend(c);this.options.popup_overlay=a.closest(".popup-overlay");!this.options.overlay.length&&this.options.modal&&(b("body").prepend("<div id='popUpOverlay' style='display:none;'></div>"),b("#dyn-area").addClass("overflow-hidden"),c=b("body").outerHeight(!1)>b(g).height()?b("body").outerHeight(!1):b(g).height(),this.options.overlay=b("#popUpOverlay"),
this.options.overlay.css("min-height",c));this.addingPopup();a.animate({opacity:1},this.options.speed);this.popUp_auto_position();this.events();return this},events:function(){var a=this;b("body").on("keydown."+a.options.idEl,function(c){if(27==c.which){var b=a.options.body.data("popUp").allPopup;if(a.options.tip||b[0].attr("id")==a.options.idEl)a.clickCloseBtn(),c.preventDefault(),c.stopImmediatePropagation()}});a.options.popup.on("click",".popUp-Close",function(c){a.clickCloseBtn()});if(a.options.activeModal&&
a.options.modal)a.options.overlay.on("click",function(){a.clickCloseBtn()});else if(a.options.tip)b("html").on(a.options.closeEvents,"*",function(c){a.options.stateClick||b(this).closest("#"+a.options.idEl).length?a.options.stateClick=!0:a.clickCloseBtn();"BODY"==b(this).context.tagName&&(a.options.stateClick=!1)})},addingPopup:function(){if(this.options.modal){var a=this.options.body.data("popUp"),c=this.get_z_index();a.allPopup.unshift(this.options.popup);this.options.overlay.css("z-index",c-1);
a.allPopup.length&&this.options.overlay.fadeIn(this.options.speed);this.options.popup_overlay.css("z-index",c);this.options.body.data("popUp",a)}},deletingPopup:function(){if(this.options.modal){var a=this.options.body.data("popUp"),c=a.allPopup.shift(),e=0;this.options.body.data("popUp",a);e=this.get_z_index(a.allPopup.length)-21;this.options.overlay.css("z-index",e);a.allPopup.length||(this.options.overlay.fadeOut(this.options.speed,function(){b(this).remove();b("#dyn-area").removeClass("overflow-hidden")}),
b("body").css("overflow","initial"));return c}},close:function(){var a=this,c=this.element;a.deletingPopup();b("html").off(a.options.closeEvents,"*");c.animate({opacity:0},a.options.speed,"linear",function(){c.trigger("PopupClose");c.remove();a.options.popup_overlay.remove()})},clickCloseBtn:function(){this.options.functionClose?eval(this.options.functionClose+"('"+this.options.idEl+"');"):this.close()},popUp_auto_position:function(){var a={};this.options.tip?a["margin-top"]=b("#"+this.options.tip).outerHeight()+
3+"px":a["margin-bottom"]="4em";this.options.popup.css(a)},get_z_index:function(a){a||(a=this.options.body.data("popUp").allPopup.length);return 20*a+110},update:function(a){this.options.body.data("popUp").allPopup.pop();this.options.popup.replaceWith(a);b("#"+this.options.idEl).css("opacity","100").dialogLight(this.options);this.destroy()},defaultConfig:function(){!this.options.popup.data("popUp")&&this.element&&this.options.popup.data("popUp",this.options)},destroy:function(){this.options.body.data("popUp").allPopup.length||
pogodi(!1);b(g).off("resize."+this.options.idEl);b("body").off("keydown."+this.options.idEl);b("html").off(this.options.closeEvents,"*");b.Widget.prototype.destroy.call(this)}})})(jQuery,window,document);
jQuery(function(b){b.datepicker.regional.ru={closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",prevText:"&#x3c;\u041f\u0440\u0435\u0434",nextText:"\u0421\u043b\u0435\u0434&#x3e;",currentText:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",monthNames:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),monthNamesShort:"\u042f\u043d\u0432 \u0424\u0435\u0432 \u041c\u0430\u0440 \u0410\u043f\u0440 \u041c\u0430\u0439 \u0418\u044e\u043d \u0418\u044e\u043b \u0410\u0432\u0433 \u0421\u0435\u043d \u041e\u043a\u0442 \u041d\u043e\u044f \u0414\u0435\u043a".split(" "),
dayNames:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),dayNamesShort:"\u0432\u0441\u043a \u043f\u043d\u0434 \u0432\u0442\u0440 \u0441\u0440\u0434 \u0447\u0442\u0432 \u043f\u0442\u043d \u0441\u0431\u0442".split(" "),
dayNamesMin:"\u0412\u0441 \u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431".split(" "),weekHeader:"\u041d\u0435",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};b.datepicker.setDefaults(b.datepicker.regional.ru)});
function dateInput(b){var g=$(b);g.datepicker({showOn:"focus",buttonImage:"/images/calendar.gif",buttonImageOnly:!0,changeYear:!0,yearRange:"1900:+2",onSelect:function(b){g.change()},beforeShow:function(){$("#ui-datepicker-div").appendTo(g.parent())}})}
function periodInput(b,g,h,a){var c=$(b),e=$(g),k=function(a,c,b){var e=$(a).closest(".ui-period-date");a=e.find(".Start input");e=e.find(".End input");a.val(c).datepicker("hide");e.val(b).datepicker("hide");a.change();e.change()};c.datepicker({showOn:"focus",buttonImage:"/images/calendar.gif",buttonImageOnly:!0,changeYear:!0,yearRange:"1900:+2",onSelect:function(a){c.change()},beforeShow:function(){$("#ui-datepicker-div").appendTo(c.parent())}});e.datepicker({showOn:"focus",buttonImage:"/images/calendar.gif",
buttonImageOnly:!0,changeYear:!0,yearRange:"1900:+2",onSelect:function(a){e.change()},beforeShow:function(){$("#ui-datepicker-div").appendTo(e.parent())}});$(function(){$("body").on("click",".ui-date .period1",function(a){a.preventDefault();a=leadZero(dateObj.getDate())+"."+leadZero(dateObj.getMonth()+1)+"."+dateObj.getFullYear();var c=leadZero(dateObj.getDate())+"."+leadZero(dateObj.getMonth()+1)+"."+dateObj.getFullYear();k(this,a,c)});$("body").on("click",".period2",function(a){a.preventDefault();
var c=(new Date(dateObj.getFullYear(),dateObj.getMonth()+1,0)).getDate();a="01."+leadZero(dateObj.getMonth()+1)+"."+dateObj.getFullYear();c=c+"."+leadZero(dateObj.getMonth()+1)+"."+dateObj.getFullYear();k(this,a,c)});$("body").on("click",".period3",function(a){a.preventDefault();if(3>dateObj.getMonth()){var c=0;a=2}else 6>dateObj.getMonth()?(c=3,a=5):9>dateObj.getMonth()?(c=6,a=8):(c=9,a=11);var b=(new Date(dateObj.getFullYear(),a+1,0)).getDate(),c="01."+leadZero(c+1)+"."+dateObj.getFullYear();a=
b+"."+leadZero(a+1)+"."+dateObj.getFullYear();k(this,c,a)});$("body").on("click",".period4",function(a){a.preventDefault();a="01.01."+dateObj.getFullYear();var c="31.12."+dateObj.getFullYear();k(this,a,c)})})}$(function(){$("body").on("click",".period-input",function(b){$(".add-datepicker-button").remove();$("#ui-datepicker-div").append("<div class='add-datepicker-button'><a href='#' class='period1'>\u0421\u0435\u0433\u043e\u0434\u043d\u044f</a></br><a href='#' class='period2'>\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446</a></br><a href='#' class='period3'>\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043a\u0432\u0430\u0440\u0442\u0430\u043b</a></br><a href='#' class='period4'>\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0433\u043e\u0434</a></div>")})});
(function(b,g,h){b.widget("sui.ui_number",{options:{idEl:"",elementInput:[],elementBtn:[],val:"",btn:!0,max:null,min:null,step:1,timeChenge:600,timeChengeId:0,showZeroAsEmptyString:!1},_create:function(a){var c=this.element,e=c.data();this.options.elementInput=c;this.options.idEl=c.attr("id");this.options.val=this.options.elementInput.val();"undefined"!=typeof e.max&&(this.options.max=e.max);"undefined"!=typeof e.min&&(this.options.min=e.min);this.defaultConfig(a);this.options.btn&&(c.after("<div class='numeric-button right' data-val='1'>+</div>").before("<div class='numeric-button left' data-val='-1'>&minus;</div>"),
this.options.elementBtn=b(".numeric-button",c.parent()));this.options.disabled?this.options.elementInput.attr("disabled","disabled"):this.events()},events:function(){var a=this;a.options.elementInput.on("keydown",function(c){var e=b(this);a.options.btn&&(e=a.getVal(e),38==c.which?a.setVal(e+a.options.step):40==c.which&&a.setVal(e-a.options.step))}).on("change",function(c){c=b(this);c=a.getVal(c);a.options.val!=a.options.elementInput.val()&&a.setVal(c)});if(a.options.elementBtn.length)a.options.elementBtn.on("click",
function(){var c=b(this),e=a.getVal(c),e=1*e+c.data("val")*a.options.step;a.setVal(e);a.options.elementInput.trigger("change")})},getVal:function(){var a=this.options.elementInput.val();""==a&&(a="0");-1!=a.search(/\,/)&&(a=a.replace(/\,/g,"."));this.options["double"]||(a=a.replace(/\./g,""));a=a.match(/^[-]*\d+|\d+|\.|\,/g);return a=null==a?0:a.toString().replace(/\,/g,"")},setVal:function(a){var c=this.doGetCaretPosition(this.options.elementInput[0]),b;null!==this.options.max&&a>this.options.max&&
(a=this.options.max);null!==this.options.min&&a<this.options.min&&(a=this.options.min);this.options.elementInput.data("val",a);this.options.showZeroAsEmptyString&&0==a&&(a="");b=this.options.elementInput.val();this.options.elementInput.val(a);this.options.val=a;b!=a&&this.setCaretPosition(this.options.elementInput[0],c)},doGetCaretPosition:function(a){var c=0;if(document.selection)a.focus(),c=document.selection.createRange(),c.moveStart("character",-a.value.length),c=c.text.length;else if(a.selectionStart||
"0"==a.selectionStart)c=a.selectionStart;return c},setCaretPosition:function(a,c){if(a.setSelectionRange)a.focus(),a.setSelectionRange(c,c);else if(a.createTextRange){var b=a.createTextRange();b.collapse(!0);b.moveEnd("character",c);b.moveStart("character",c);b.select()}},defaultConfig:function(a){!this.options.elementInput.data("number")&&this.element&&(b.extend(this.options,this.defaults,a||{}),this.options.elementInput.data("number",this.options))},destroy:function(){b.Widget.prototype.destroy.call(this)}})})(jQuery,
window,document);
(function(b,g,h){b.widget("sui.ui_phoneKeyboard",{options:{inputField:"",callButton:""},_create:function(a){var c=b("#"+this.options.inputField);a=this.options.inputField;b("#"+this.options.callButton).attr("field",a);var e="num_0 num_1 num_2 num_3 num_4 num_5 num_6 num_7 num_8 num_9 num_star num_hash".split(" ");this.element.append('<div id="jquery-phonekeyboard"><div class="numpad"><div class="digit leftBorder topBorder" id="'+a+e[1]+'">1</div><div class="digit topBorder" id="'+a+e[2]+'">2</div><div class="digit topBorder" id="'+
a+e[3]+'">3</div></div><div class="numpad"><div class="digit leftBorder" id="'+a+e[4]+'">4</div><div class="digit" id="'+a+e[5]+'">5</div><div class="digit" id="'+a+e[6]+'">6</div></div><div class="numpad"><div class="digit leftBorder" id="'+a+e[7]+'">7</div><div class="digit" id="'+a+e[8]+'">8</div><div class="digit" id="'+a+e[9]+'">9</div></div><div class="numpad"><div class="digit leftBorder" id="'+a+e[10]+'">*</div><div class="digit" id="'+a+e[0]+'">0</div><div class="digit" id="'+a+e[11]+'">#</div></div></div>');
for(var k="",u=0;u<e.length;u++)k+="#"+a+e[u]+",";b(k.substring(0,k.length-1)).click(function(a){c.val(c.val()+b(this).html());c.trigger("change")})},destroy:function(){b.Widget.prototype.destroy.call(this)}})})(jQuery,window,document);
(function(b,g,h){b.widget("sui.ui_select",{options:{idEl:"",clBox:"",clTable:"",clText:"",clTextDiv:"",clCleaner:"",clSwitcher:"",clList:"",clListContainer:"",elBox:[],elTable:[],elText:[],elTextDiv:[],elCleaner:[],elSwitcher:[],elList:[],elListContainer:[],elItems:[],imitation_menu:!1,combobox:!0,blank_enable:!0,switcher:!0,cleaner:!0,blank_str:"&ndash;",blank_data:"null",blank_id:"null",new_value_enable:!1,show_units:!1,unit_value:"",in_grid_goods:!1,grid_goods_ui_type:"",first_open:!0,number:!1,
min:null,max:null,showZeroAsEmptyString:!1,only_search:!1,state:!1,find:!1,local:!1,source:!1,input_flag:0,arraySeparator:"ja_",delay:300,speed:100,isInput:0,disabled:!1,request:"",colorDef:{},data:{},list:{},listFull:{},hover_item:[],default_id:"",hoverItemId:"",html_value:"",rightButton:{},bottomButtonList:{},rightButtonList:{},minSymbol:!1,notFound:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",placeholder:"\u041d\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f",
notItems:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442",closeEvents:""},key_event:{9:"tab",27:"key_esc",38:"key_up",40:"key_down",13:"key_enter",16:"stop",17:"stop",18:"stop",19:"stop",20:"stop"},_create:function(a){var c=this;a=this.element;var e="",k="",u=a.data(),g,h={};c.options.blank_enable||(c.options.cleaner=!1);c.options.imitation_menu&&(c.options.combobox=!1,c.options.blank_enable=!1,c.options.cleaner=!1,c.options.new_value_enable=!1,c.options.only_search=!1);c.options.idEl=
a.attr("id");"price"==c.options.grid_goods_ui_type&&1==b("br",a).length&&0==b(b("br",a)["0"]).data("id")||b("br",a).each(function(){var a=b(this);a.data("text",(a.data("text")+"").replace(/select_quot/g,'"'));h=a.data();c.options.list[c.options.arraySeparator+h.id]=h});var n;c.options.new_value_enable?n={text:c.options.html_value,id:null,color:""}:(n=c.options.list[c.options.default_id],console.assert("undefined"!=typeof c.options.list[c.options.default_id],"\u041d\u0435\u0442 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e self.options.list[self.options.default_id] "+
c.options.idEl+" default_id = '"+c.options.default_id+"' list = ",c.options.list));c.options.showZeroAsEmptyString&&0==parseFloat(n.text)&&(n.text="",c.options.unit_value="");"object"==typeof u.data?u.data.html=n.text:u.data={html:n.text,val:n.id};u.data.val=n.id;c.options.data=u;g={};b.each(u,function(a,c){g[a]=c});delete g.data;delete g.map;delete g.suiUi_select;c.options.closeEvents="click.select_"+c.options.idEl+" focusin.select_"+c.options.idEl;b.each(c.options.rightButton,function(a,b){k+='<div class="select-right-add-btn button action-'+
b+' onclick" data-type="'+b+'" data-map="'+c.options.data.map+'" title="'+a+'"><div></div></div>'});b.each(c.options.bottomButtonList,function(a,b){e+='<div class="select-btn button onclick" data-type="'+b+'">'+a+"</div>";"add"==b&&0<k.length&&(k+='<div class="select-right-add-btn button action-'+b+' onclick" data-type="'+b+'" data-map="'+c.options.data.map+'" title="'+a+'"><div></div></div>')});c.options.clBox="select-box";c.options.clTable="select-input-table";c.options.clText="select-input";c.options.clTextDiv=
"select-input-div";c.options.clShowUnits="select-show-units";c.options.clCleaner="select-cleaner";c.options.clSwitcher="select-switcher";c.options.clList="select-list";c.options.clListContainer="select-list-container";a.html('<div class="'+c.options.clBox+'"><div class="'+c.options.clTable+'"><div><input type="text" class="atomic '+c.options.clText+'" placeholder="'+c.options.placeholder+'"><div class="atomic '+c.options.clTextDiv+'"><div></div></div>'+(c.options.show_units&&c.options.unit_value.length?
'<div class="'+c.options.clShowUnits+'">'+c.options.unit_value+"</div>":"")+(c.options.cleaner?'<div class="'+c.options.clCleaner+'"><div>&times;</div></div>':"")+(c.options.switcher?'<div class="'+c.options.clSwitcher+'"><div></div></div>':"")+(k.length?k:"")+'</div></div><div class="'+c.options.clList+'" style="display:none;"><div class="'+c.options.clListContainer+'">'+e+"</div></div></div>");c.options.elBox=b("."+c.options.clBox,a);c.options.elTable=b("."+c.options.clTable,a);c.options.elText=
b("."+c.options.clText,a);c.options.elTextDiv=b("."+c.options.clTextDiv,a);c.options.elCleaner=b("."+c.options.clCleaner,a);c.options.elSwitcher=b("."+c.options.clSwitcher,a);c.options.elList=b("."+c.options.clList,a);c.options.elListContainer=b("."+c.options.clListContainer,a);c.options.elItems=c.options.elListContainer.find("div[data-id]");c.options.imitation_menu?c.options.elTextDiv.html(c.options.blank_str):c.options.elTextDiv.html(n.text);n.text&&c.options.elText.val(String(n.text).replace(/<span class="gray">/,
"").replace(/<\/span>/,""));c.options.colorDef={background:c.options.elText.closest(".input-inner").css("background"),color:c.options.elText.css("color")};n.color.length&&(c.options.imitation_menu||(u=getColorTextByBackground(n.color),c.options.elText.css("color",u),c.options.elTextDiv.css("color",u),"#FFF"==u&&c.options.elSwitcher.addClass("select-switcher-white")),c.options.elText.closest(".input-inner").css({background:n.color}));c.options.combobox?c.options.elTextDiv.hide():c.options.elText.hide();
c.options.imitation_menu&&a.closest(".ui-select").addClass("imitation_menu");c.options.combobox&&a.closest(".ui-select").addClass("combobox");c.options.elTable.find(".select-right-add-btn").each(function(a){b(this).data(g)});c.create_items();c.check_button_clean();c.options.disabled?(c.options.elText.attr("disabled","disabled"),c.options.elBox.addClass("select-disabled")):c.events()},events:function(){var a=this;a.options.elTextDiv.on("click",function(){a.options.state?a.options.imitation_menu&&a.close():
a.open();b(this).trigger("select")});a.options.elText.on("keydown",function(c){if(a.options.disabled)return!1;if(f=a.key_event[c.which]){var e=a[f]();"continue"!=e&&"esc"!=e&&(c.preventDefault(),c.stopPropagation());if("esc"==e||"stop"==e)return null;a.options.state||a.open()}else a.options.new_value_enable?(a.set_active_item(),a.close()):(a.set_active_item(),a.options.isInput++,c=b.proxy(a,"open",a.options.isInput),setTimeout(c,600));a.check_button_clean();return null}).on("focusin click",function(){a.options.state||
a.open();b(this).trigger("select");b(this).closest(".input-inner").addClass("input-focused")}).on("focusout",function(){var c=0==a.options.hover_item.length;"\u043f\u043e\u043b\u043d\u043e\u0435_\u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435"!=a.filter_items(!0)&&c&&a.options.new_value_enable&&a.select_();b(this).closest(".input-inner").removeClass("input-focused")}).on("change",function(a){a.stopImmediatePropagation();a.preventDefault();return!1}).on("change.select",function(c){a.options.local||
(c.stopImmediatePropagation(),c.preventDefault());c=0==a.options.hover_item.length;"\u043f\u043e\u043b\u043d\u043e\u0435_\u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435"!=a.filter_items(!0)&&c?a.options.new_value_enable?(a.options.data.data.html=a.options.number?a.getVal():a.options.elText.val(),a.options.data.data.val="new"):a.set_default_val():a.options.new_value_enable&&(a.options.data.data.html=a.options.number?a.getVal():a.options.elText.val());a.options.elText.data(a.options.data);
a.options.new_value_enable||a.options.elText.val(a.options.data.data.html.replace(/<span class="gray">/,"").replace(/<\/span>/,""));c="undefined"!=typeof a.options.data.data.color&&a.options.data.data.color.length?a.options.data.data.color:a.options.colorDef.background;if(!a.options.imitation_menu){var b=getColorTextByBackground(c);a.options.elText.css("color",b);a.options.elTextDiv.css("color",b);"#FFF"==b?a.options.elSwitcher.addClass("select-switcher-white"):a.options.elSwitcher.removeClass("select-switcher-white")}a.options.elText.closest(".input-inner").css({background:c});
a.options.local||a.options.elText.trigger("change.core");a.options.imitation_menu||a.options.elTextDiv.html(a.options.data.data.html);a.close();a.check_button_clean();return!1});a.options.elList.on("click.List",".select-el > span",function(){b(this).hasClass("onclick")||b(this).parent().hasClass("onclick")||a.select_()}).on("mouseenter",".select-el",function(){a.mouse_hover_item(b(this))});a.options.elList.on("click.List",".select-btn",function(){a.close()});a.options.elCleaner.on("click",function(){a.set_blank_val();
a.select_()});b(".onclick",a.options.elTable).on("click",function(){a.close()});a.options.elSwitcher.on("click",function(){a.toggle()&&(a.options.elText.is(":visible")?a.options.elText.focus():a.open())})},create_items:function(){var a=this,c="";a.options.blank_enable&&!a.options.imitation_menu&&(a.options.list[a.options.arraySeparator+a.options.blank_data]={color:"",id:a.options.blank_id,text:a.options.blank_str});b.each(a.options.list,function(e,k){c="";b.each(a.options.rightButtonList,function(b,
e){c=k.id+""!=a.options.blank_data?c+('<div class="select-right-btn onclick '+e+'" data-type="'+e+'" data-map="'+a.options.data.map+'" data-val="'+k.id+'"><span>'+b+"</span></div>"):c+'<div class="select-right-btn"></div>'});str='<div class="select-el" data-id="'+e+'" style="background:'+(k.color.length?k.color:"#edb74a")+"; color:"+(k.color.length?k.color:"#333")+'"><span><span data-html="">'+k.text+"</span></span>"+c+"</div>";a.options.listFull[e]=str});return a},filter_items:function(a,c){return this.options.source&&
this.options.request.length?this.filter_items_source(a,c):this.filter_items_local(a,c)},clear_items:function(){this.set_active_item();this.options.list={};this.options.elListContainer.find(".select-comment, .select-el").hide();this.options.elItems=this.options.elListContainer.find("div[data-id]");this.create_items()},filter_items_source:function(a,c){var b=this,k={request:b.options.request,search:b.options.elText.val(),map:b.options.idEl};0<b.options.elText.val().length?connect_API("select_filter_items",
k,function(k){k.minSymbol&&(b.options.minSymbol=k.minSymbol,delete k.minSymbol);b.options.list=k;b.create_items();b.filter_items_local(a,c)}):(b.options.minSymbol=!1,b.options.list=[],b.create_items(),b.filter_items_local(a,c))},filter_items_local:function(a,c){var e=this,k="",g="",h=!0,l=[],n=[],w="",y=!1,p=!1,m=!1,x=!1,v,w=1!=c||e.options.only_search?RegExp.escape(e.options.elText.val()):"",q=new RegExp(w,"i"),z=new RegExp("^"+w+"$","i");e.options.only_search&&""==w?e.options.blank_enable&&(l[0]=
e.options.listFull[e.options.arraySeparator+e.options.blank_data]):b.each(e.options.list,function(a,c){k=c.text;g=c.id;m=!1;z.test(k)?(m=!0,y=a,v=g,p=k,x=y):q.test(k)&&(m=!0,x=y);l[l.length]=e.options.listFull[a];if(m||e.options.source)n[n.length]=e.options.listFull[a]});z.test(e.options.blank_str)&&1!=c&&(e.options.blank_str.length||w.length)&&(y=e.options.blank_data,p=e.options.blank_str,x=y,n[0]="");1==n.length&&y?(1!=a&&(e.options.data.data.html=p,e.options.data.data.val=v),w=n.join(""),h="\u043f\u043e\u043b\u043d\u043e\u0435_\u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435"):
this.options.source&&e.options.minSymbol.length&&0!=e.options.minSymbol?(w='<div class="select-comment" style="text-align:left;">'+e.options.minSymbol+"</div>",w+=n.join(""),h=e.options.minSymbol=!1):e.options.only_search&&!w.length?(w='<div class="select-comment">'+e.options.notItems+"</div>",h=!1):0==l.length?(w='<div class="select-comment">'+e.options.placeholder+"</div>",h=!1):0==n.length?(w='<div class="select-comment">'+e.options.notFound+"</div>",h=!1):w=n.join("");1!=a&&(e.options.elListContainer.find(".select-comment, .select-el").remove(),
e.options.elListContainer.prepend(w),e.options.elItems=e.options.elListContainer.find("div[data-id]"),e.options.hover_item.length&&(x=e.options.hover_item.data("id")),e.set_active_item(e.options.elItems.filter("[data-id='"+x+"']")));b(".button",e.options.elBox).data(e.options.data);return h},check_button_clean:function(){var a=this.options.elText.val();"undefined"==typeof a||a==this.options.blank_str||"\u2013"==a&&"&ndash;"==this.options.blank_str||this.options.disabled||""==a?this.options.elCleaner.addClass("off"):
this.options.elCleaner.removeClass("off")},toggle:function(){if(this.options.state)this.close();else return!0;return!1},open:function(a){var c=this,e=[];if("number"==typeof a&&a!=c.options.isInput||c.options.disabled)return!1;this.options.source&&!c.options.elText.val().length&&c.close();if(!c.options.only_search||c.options.elText.val().length&&c.options.elText.val()!=c.options.blank_str){if(c.options.state)return c.filter_items();c.filter_items(!1,!0);c.options.state=!0;c.options.hoverItemId.length?
c.set_active_item(b("[data-id='"+c.options.hoverItemId+"']",c.options.elList)):c.options.hover_item.length?c.set_active_item(c.options.hover_item):c.options.default_id.length?c.set_active_item():c.key_down();b("body").on(c.options.closeEvents,"*",function(a){b(this).closest("#"+c.options.idEl).length||c.close();if(!b(this).hasClass("onclick")&&!b(this).parent().hasClass("onclick"))return!1});c.options.elList.css("display","block");c.options.elSwitcher.addClass("select-open");c.options.in_grid_goods&&
(e=c.options.elList.closest(".Grid"),e.ui_grid("option","inPopup")&&(e.ui_grid("updateSelectPosition",c.options.elList,c.options.elBox,c.options.first_open),c.options.first_open=!1));return!0}},close:function(){this.options.state&&(b("body").off(this.options.closeEvents,"*"),this.options.elList.css("display","none"),this.options.state=!1,this.options.elSwitcher.removeClass("select-open"),this.options.source&&this.clear_items())},select_:function(){this.options.elText.trigger("change.select")},set_val:function(a){if("undefined"==
typeof a)return console.assert(0,"\u041d\u0435\u0442 d "+a);this.options.data.data.html=a.text;this.options.data.data.val=a.id;this.options.data.data.color=a.color;this.options.elText.val()},set_default_val:function(){this.set_val(this.options.list[this.options.default_id])},set_blank_val:function(){var a=this.options.arraySeparator+this.options.blank_data;d=this.options.list[a];console.assert("object"==typeof d,"\u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 "+
a);this.options.hover_item=1;this.set_val(d)},set_active_item:function(a){this.options.hover_item=[];this.options.elItems.removeClass("select-hover-item");"undefined"==typeof a&&(a=b("[data-id='"+this.options.default_id+"']",this.options.elList));if(a.length){var c=a.data("id");a.addClass("select-hover-item");this.options.hover_item=a;this.set_val(this.options.list[c])}},key_enter:function(){this.select_();return"stop"},key_up:function(){var a=this.options.hover_item.length&&this.options.elItems.first().data("id")!==
this.options.hover_item.data("id")?this.options.hover_item.prev("div[data-id]"):this.options.elItems.last("div[data-id]");this.set_active_item(a);this.scroll_list()},key_down:function(){var a=this.options.hover_item.length&&this.options.elItems.last().data("id")!==this.options.hover_item.data("id")?this.options.hover_item.next("div[data-id]"):this.options.elItems.first("div[data-id]");this.set_active_item(a);this.scroll_list()},scroll_list:function(){if(this.options.hover_item.length){var a=this.options.hover_item.position().top,
c=this.options.elList.scrollTop(),b=this.options.elList.height();(0>a||a+this.options.hover_item.height()>b)&&this.options.elList.animate({scrollTop:c+a-b/2+this.options.hover_item.height()/2},60)}},mouse_hover_item:function(a){this.set_active_item(a)},key_esc:function(){return this.options.state?(this.close(),"stop"):"esc"},stop:function(){return"stop"},tab:function(){return"esc"},_setOption:function(a,c){b.Widget.prototype._setOption.apply(this,arguments)},l:function(){debug&&b.each(arguments,function(a,
c){})},destroy:function(){b.Widget.prototype.destroy.call(this)},getVal:function(){var a=this.options.elText.val();""==a&&(a="0");-1!=a.search(/\,/)&&(a=a.replace(/\,/g,"."));a=a.match(/^[-]*\d+|\d+|\.|\,/g).toString().replace(/\,/g,"");null!==this.options.max&&a>this.options.max&&(a=this.options.max);null!==this.options.min&&a<this.options.min&&(a=this.options.min);return a}})})(jQuery,window,document);
function HEXtoRGB(b){b=b.toLowerCase();for(var g="0123456789abcdef".split(""),h=[],a=0;16>a;a++)h[g[a]]=a;g=[];b=b.substr(1);for(a=0;3>a;a++)g[a]=16*h[b.charAt(2*a)]+16*h[b.charAt(2*a+1)];return g}function getColorTextByBackground(b){rgb=HEXtoRGB(b);return res=177>.213*rgb[0]+.315*rgb[1]+.072*rgb[2]?"#FFF":"#000"}function GetSuffix(b,g,h,a){b=Math.abs(b)%100;$ii=b%10;return 10<b&&20>b?a:1<$ii&&5>$ii?h:1==$ii?g:a}
(function(b,g,h){b.widget("sui.ui_grid",{options:{idEl:"",element:[],body:{},buttons:"",elementGroupPanel:[],elementSearch:[],elementMainTable:[],elementT:[],elementTH:[],elementTF:[],elementTB:[],elementETS:[],elementButtonPanel:[],elementFooter:[],elementFooterString:[],elementPagination:[],elementPaginationCurrent:[],elementPaginationTotal:[],elementPaginationFirst:[],elementPaginationPrev:[],elementPaginationNext:[],elementPaginationLast:[],elementPaginationPage:[],elementSortableColumnsPointer:[],
elementLoading:[],showHeader:!0,showCheckboxes:!1,showNumbers:!1,numberStartFrom:0,showSystem:!1,showSortNone:!1,showDelCurButtons:!1,showFooter:!1,footerString:"",showPagination:!1,paginationCurrent:0,paginationTotal:0,clickable:!1,alwaysClickable:!1,sortable:!1,sort_field:-1,sort_descend:!1,groupable:!1,array_groups:{},group_field:0,groups:{},searchable:!1,search_string:"",resizable:!1,disabled:!1,inPopup:!1,array_columns:{},array_super_columns:{},array_rows:{},data:{},rowItemNames:{},emptyTableString:"",
gridType:"",headerOverflowHidden:!0,unselectRowEvents:"",proccessKeyDown:!1,installHandlerFlag:!1,gridBlocked:!1,checkboxBuffer:[],checkboxBufferVal:0,checkboxBufferTR:{},rowClickAsChBClick:!1,rowClickFlag:!1,showTableFooter:!1,showTablePagination:!1,array_footer:!1,paginationFrom:0,paginationTo:0,paginationTotalCount:0,TFInitLeft:0,sortableRows:!1,sortableRowsIfSortNone:!1,sortableColumns:!0,action_counter:0,draggableSelectedRows:!1,newRecordFromGridContent:"",popupFromButton:!1,loadingIndication:!1,
currentFocus:""},_create:function(a){a=this.element;var c="",e=a.data(),k="new-grid";this.options.idEl=a.attr("id");this.options.inPopup=0<a.closest(".popup").length;this.options.data=e;this.options.body=b("body");this.options.body.data("grid")||b("body").data("grid",{allGrids:[]});this.options.body.data("grid").allGrids.unshift(a);this.options.unselectRowEvents="click.grid_"+this.options.idEl+" focusin.grid_"+this.options.idEl;this.options.sortable&&(k+=" sortable");this.options.clickable&&(k+=" clickable");
this.options.alwaysClickable&&(k+=" AlwaysClickable");c+="<div class='"+k+"'>";if(this.options.buttons.length||this.options.groupable||this.options.searchable)c=this.options.inPopup?c+"<div><table class='top'><tr>":c+"<div class='js-hor-fixed' data-offset='0' style='padding-left:1px;'><table class='top'><tr>",c+="<td class='grid-button-panel top-left'>",this.options.buttons.length&&(c+=this.options.buttons),c+="</td>",this.options.groupable&&(c+="<td class='top-center'><div class='grid-group-panel'></div></td>"),
this.options.searchable&&(c+="<td class='top-right'><div class='grid-search search'><div class='search-start'></div><div class='search-reset'></div><div class='search-input'><input type='text' class='manual-input' value='' placeholder='\u041f\u043e\u0438\u0441\u043a'></div></div></td>"),c+="</tr></table></div>";c+="<div class='grid-main-table'><table class='grid-table root'>";this.options.showHeader&&(c+="<thead class='grid-thead'></thead>");if(this.options.showTableFooter||this.options.showTablePagination)e=
this.options.inPopup?"":"sticked",c+="<tfoot class='grid-tfoot "+e+"'></tfoot>",this.options.showTablePagination&&(c+="<div class='grid-table-pagination table-pagination'><div class='grid-pagination'><div class='pagination-next-prev-div'><button class='pagination-next-prev grid-pagination-last' value='>'><span><img src='/images/page-last.png' alt='\u0412 \u043a\u043e\u043d\u0435\u0446'></span></button></div><div class='pagination-next-prev-div'><button class='pagination-next-prev grid-pagination-next' value='>'><span><img src='/images/page-next.png' alt='\u0412\u043f\u0435\u0440\u0435\u0434'></span></button></div><div class='grid-page'>"+
this.options.paginationFrom+"-"+this.options.paginationTo+" \u0438\u0437 "+this.options.paginationTotalCount+"</div><div class='pagination-next-prev-div'><button class='pagination-next-prev grid-pagination-prev' value='<'><span><img src='/images/page-prev.png' alt='\u041d\u0430\u0437\u0430\u0434'></span></button></div><div class='pagination-next-prev-div' style='margin-right:4px;'><button class='pagination-next-prev grid-pagination-first' value='<'><span><img src='/images/page-first.png' alt='\u0412 \u043d\u0430\u0447\u0430\u043b\u043e'></span></button></div></div></div>");
c+="<tbody class='grid-tbody'></tbody></table>";this.options.loadingIndication&&(c+="<div class='grid-loading'><div class='loading-coub'><div><div></div><div></div><div></div><div></div></div></div></div>");c+="</div>";c=this.options.gridType.length&&"main"!=this.options.gridType?c+("<div class='grid-empty-table-string empty-table-string-child'>"+this.options.emptyTableString+"</div>"):c+("<div class='grid-empty-table-string empty-table-string'>"+this.options.emptyTableString+"</div>");0==this.options.rowItemNames.length&&
(this.options.rowItemNames[0]="\u0437\u0430\u043f\u0438\u0441\u044c",this.options.rowItemNames[1]="\u0437\u0430\u043f\u0438\u0441\u0438",this.options.rowItemNames[2]="\u0437\u0430\u043f\u0438\u0441\u0435\u0439");if(this.options.showFooter||this.options.showPagination)e=this.options.inPopup?"":"sticked",c+="<div class='grid-table-bottom'></div><div class='grid-footer footer "+e+"'><table class='footer'><tr>",this.options.showFooter&&(c+="<td class='footer-total-td'><span class='grid-footer-string'>"+
this.options.footerString+"</span></b></td>"),this.options.showPagination&&(c+="<td><div class='grid-pagination'><div class='pagination-next-prev-div'><button class='pagination-next-prev grid-pagination-last' value='>'><span><img src='/images/page-last.png' alt='\u0412 \u043a\u043e\u043d\u0435\u0446'></span></button></div><div class='pagination-next-prev-div'><button class='pagination-next-prev grid-pagination-next' value='>'><span><img src='/images/page-next.png' alt='\u0412\u043f\u0435\u0440\u0435\u0434'></span></button></div><div class='pagination-next-prev-div'><button class='pagination-next-prev grid-pagination-prev' value='<'><span><img src='/images/page-prev.png' alt='\u041d\u0430\u0437\u0430\u0434'></span></button></div><div class='pagination-next-prev-div'><button class='pagination-next-prev grid-pagination-first' value='<'><span><img src='/images/page-first.png' alt='\u0412 \u043d\u0430\u0447\u0430\u043b\u043e'></span></button></div><div class='grid-pagination-total-div'>\u0438\u0437 <span class='grid-pagination-total'>"+
this.options.paginationTotal+"</span></div><div class='pagination-current'><input type='text' class='grid-pagination-current' value='"+this.options.paginationCurrent+"'></div><div class='grid-page'>\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430</div></div></td>"),c+="</tr></table></div>";a.append(c+"<div class='grid-sortable-columns-pointer sortable-columns-pointer'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div></div>");this.options.element=b("#"+this.options.idEl);this.options.buttons.length&&(this.options.elementButtonPanel=
b(".grid-button-panel",a));this.options.groupable&&(this.options.elementGroupPanel=b(".grid-group-panel",a));this.options.searchable&&(this.options.elementSearch=b(".grid-search",a));this.options.elementMainTable=b(".grid-main-table",a);this.options.elementT=b(".grid-table",a);this.options.elementTH=b(".grid-thead",a);if(this.options.showTableFooter||this.options.showTablePagination)this.options.elementTF=b(".grid-tfoot",a);this.options.elementTB=b(".grid-tbody",a);this.options.elementETS=b(".grid-empty-table-string",
a);if(this.options.showFooter||this.options.showPagination)this.options.elementFooter=b(".grid-footer",a),this.options.elementFooterB=b(".grid-table-bottom",a);this.options.showFooter&&(this.options.elementFooterString=b(".grid-footer-string",a));if(this.options.showPagination||this.options.showTablePagination)this.options.showPagination&&(this.options.elementPagination=b(".grid-pagination",a)),this.options.showTablePagination&&(this.options.elementPagination=b(".grid-table-pagination",a)),this.options.elementPaginationCurrent=
b(".grid-pagination-current",a),this.options.elementPaginationTotal=b(".grid-pagination-total",a),this.options.elementPaginationFirst=b(".grid-pagination-first",a),this.options.elementPaginationPrev=b(".grid-pagination-prev",a),this.options.elementPaginationNext=b(".grid-pagination-next",a),this.options.elementPaginationLast=b(".grid-pagination-last",a),this.options.elementPaginationPage=b(".grid-page",a);this.options.elementSortableColumnsPointer=b(".grid-sortable-columns-pointer",a);this.options.loadingIndication&&
(this.options.elementLoading=b(".grid-loading",a),this.options.elementLoading.addClass("hide"));if(this.options.sortableRows||this.options.sortableRowsIfSortNone)this.sortable_rows(),1==this.options.paginationCurrent&&1==this.options.paginationTotal?this.options.elementTB.sortable("option","connectWith",[]):1==this.options.paginationCurrent?this.options.elementTB.sortable("option","connectWith",this.options.elementTF):this.options.paginationCurrent==this.options.paginationTotal?this.options.elementTB.sortable("option",
"connectWith",this.options.elementTH):this.options.elementTB.sortable("option","connectWith",[this.options.elementTH,this.options.elementTF]),this.options.paginationCurrent!=this.options.paginationTotal&&this.options.elementTB.sortable("option","connectWith",this.options.elementTF);this.options.groupable&&this.update_group_panel(this.options.array_groups,this.options.group_field);this.update_head(this.options.array_columns);(this.options.showTableFooter||this.options.showTablePagination)&&(this.options.array_rows.length||
this.options.groups.length)&&this.update_foot(this.options.array_footer);this.options.loadingIndication||this.options.array_rows.length||this.options.groups.length?(this.update_rows(this.options.array_rows),this.options.groups.length&&this.show_groups(this.options.groups),this.options.elementMainTable.css("display","block"),this.options.showFooter&&this.options.elementFooter.css("display","block"),this.options.elementETS.css("display","none"),this.options.buttons.length&&(this.options.elementButtonPanel.closest(".disabled-edit").length||
this.options.elementButtonPanel.find("div.Delete").css("display","inline-block"))):(this.options.elementMainTable.css("display","none"),this.options.showFooter&&this.options.elementFooter.css("display","none"),this.options.elementETS.css("display","block"),this.options.buttons.length&&this.options.elementButtonPanel.find("div.Delete").css("display","none"),this.options.newRecordFromGridContent.length&&!this.options.elementETS.closest(".popup").hasClass("popup-disabled")&&(this.options.elementETS.css("text-align",
"inherit"),this.options.elementETS.html(this.options.newRecordFromGridContent)));this.options.inPopup||!this.options.showFooter&&!this.options.showPagination||(this.stickyFooter(),this.updateFooter());if(this.options.showTableFooter||this.options.showTablePagination)this.updateTableFooter(),this.alignTableFooter();this.options.draggableSelectedRows&&(this.options.inPopup||this.draggable_selected_rows());this.options.loadingIndication&&this.hideBody();this.events();this.options.loadingIndication&&
ajaxRequest({data:"action=create&map="+this.options.idEl+"&grid_indication=1",_this:a})},destroy:function(){b("body").off("keydown."+this.options.idEl);this.options.inPopup?(b(".popup-overlay").off("scroll."+this.options.idEl),b("#"+this.options.idEl+" .grid-main-table").off("scroll."+this.options.idEl)):b(g).off("resize."+this.options.idEl+" scroll."+this.options.idEl);this.options.body.data("grid").allGrids.shift();b.Widget.prototype.destroy.call(this)},triggerCheckbox_:function(a,c,e){var k=a.find("input:checkbox"),
g=a.index("#"+this.options.idEl+" .grid-tbody .row"),h=0,l=!1;"checked"==(1==c?"":2==c?"checked":k.is(":checked")?"checked":"")?k.prop("checked",!1):(k.prop("checked",!0),h=1);if(!c){var n,w;if("undefined"!==typeof e&&e.shiftKey)if(h){var y=0;this.options.elementTB.find("tr.row").each(function(a){a<g&&b(this).find("input:checkbox")&&b(this).find("input:checkbox").is(":checked")&&!y&&(y=a+1)});this.options.elementTB.find("tr.row").each(function(a){a<g&&a>y-1&&b(this).find("input:checkbox").prop("checked",
!0)});n=y;w=g}else{var p=this.options.array_rows.length,y=0;b(b(this.options.elementTB.find("tr.row")).get().reverse()).each(function(a){a<p-g&&b(this).find("input:checkbox")&&"checked"!=b(this).find("input:checkbox").attr("checked")&&y==p&&(y=a+1)});b(b(this.options.elementTB.find("tr.row")).get().reverse()).each(function(a){a<p-g&&a>y-1&&b(this).find("input:checkbox").removeAttr("checked")});n=g;w=p-y}}h?this.options.elementTH.find("input").prop("checked",!0):(this.options.elementTB.find("input").each(function(a){b(this).is(":checked")&&
(l=!0)}),l||this.options.elementTH.find("input").prop("checked",!1));c?(-1==this.options.checkboxBuffer.indexOf(g)&&this.options.checkboxBuffer.push(g),this.options.checkboxBufferVal=h,this.options.checkboxBufferTR=a):"undefined"!==typeof e&&e.shiftKey?ajaxRequest({data:"action=CheckboxFromTo&map="+this.options.idEl+"&data[from]="+n+"&data[to]="+w+"&data[val]="+h,_this:a}):ajaxRequest({data:"action=CheckboxClick&map="+this.options.idEl+"&data[num]="+g+"&data[val]="+h,_this:a})},triggerCheckbox:function(a,
c){this.triggerCheckbox_(a,0,c)},triggerCheckboxOn:function(a){this.triggerCheckbox_(a,1)},triggerCheckboxOff:function(a){this.triggerCheckbox_(a,2)},sendStoredCheckboxes:function(){var a,c;this.options.checkboxBuffer.length&&(a=this.options.checkboxBuffer[0],c=this.options.checkboxBuffer[this.options.checkboxBuffer.length-1],a>c&&(a=this.options.checkboxBuffer[this.options.checkboxBuffer.length-1],c=this.options.checkboxBuffer[0]),ajaxRequest({data:"action=CheckboxFromTo&map="+this.options.idEl+
"&data[from]="+a+"&data[to]="+c+"&data[val]="+this.options.checkboxBufferVal,_this:this.options.checkboxBufferTR}),this.options.checkboxBuffer=[])},alignTableFooter:function(){var a=this;a.options.elementTF.outerWidth(a.options.elementTH.outerWidth());a.options.elementTF.find("tr td").each(function(c){b(this).hasClass("table-footer-data-cell");b(this).outerWidth(a.options.elementTH.find("tr th.th_data_cell:nth-child("+(c+1)+")").outerWidth(!0))})},updateEmptyTableState:function(){this.options.array_rows.length||
this.options.groups.length?(this.options.elementMainTable.css("display","block"),this.options.elementTF.css("display","table-footer-group"),this.options.elementETS.css("display","none"),this.options.buttons.length&&(this.options.elementButtonPanel.closest(".disabled-edit").length||this.options.elementButtonPanel.find("div.Delete").css("display","inline-block"))):(this.options.elementMainTable.css("display","none"),this.options.elementTF.css("display","none"),this.options.elementETS.css("display",
"block"),this.options.buttons.length&&this.options.elementButtonPanel.find("div.Delete").css("display","none"),this.options.newRecordFromGridContent.length&&!this.options.elementETS.closest(".popup").hasClass("popup-disabled")&&(this.options.elementTF.find(".new_record_from_grid_select").remove(),this.options.elementETS.css("text-align","inherit"),this.options.elementETS.html(this.options.newRecordFromGridContent)))},getCellContent:function(a,c){var b="",k="",g,h=!0,l="";if(c.cell_class){if(k=' class="'+
c.cell_class+'"',g=c.data,"td_for_ui_obj"==c.cell_class||"td_for_goods_image"==c.cell_class)h=!1}else g=c;h&&(l=g.toString().replace(/<[^>]+>/g,""));return b=a==this.options.sort_field?b+("<td"+k+'><span title="'+l+'" style="white-space:nowrap;"><b>'+g+"</b></span></td>"):b+("<td"+k+'><span title="'+l+'" style="white-space:nowrap;">'+g+"</span></td>")},updateSelectPosition:function(a,c,b){b=c.offset().top+c.height()+4;var k=c.offset().left-4;a.offset({top:b,left:k});a.closest(".ui-select").hasClass("goods_name_ui_obj")?
a.css("max-width",parseInt(c.width())+8+"px"):a.css("min-width",parseInt(c.width())+8+"px")},updateSelectPositionOnScroll:function(){var a=this.options.elementT.find(".select-list:visible"),c;a.length&&(c=a.closest(".select-box"),this.updateSelectPosition(a,c,!1))},closeSelect:function(){var a=this.options.elementT.find(".select-list:visible");a.length&&a.closest(".select-field").ui_select("close")},closeSelectWithoutJs:function(){var a=this.options.elementT.find(".select-list:visible");a.length&&
a.css("display","none")},hideBody:function(){this.options.elementTB.hide();this.options.elementTF.hide();this.options.elementPagination.hide();this.options.elementLoading.removeClass("hide");this.updateTableFooter();this.alignTableFooter()},showBody:function(){this.options.elementTB.show();this.options.elementTF.show();this.options.elementPagination.show();this.options.elementLoading.addClass("hide");this.updateTableFooter();this.alignTableFooter()},startLoadingIndication:function(a){this.options.loadingIndication&&
(a+="&grid_indication=1",this.hideBody());return a},events:function(){var a=this;if(a.options.elementTH.length)a.options.elementTH.on("click","tr th.th_data_cell",function(){if(!(b(this).hasClass("th_for_checkbox")||b(this).hasClass("th_for_number")||b(this).hasClass("th_for_system")||b(this).hasClass("idle_column"))&&a.options.sortable){var c=b(this).find("span.sort").length?b(this).find("span.sort"):0,e=b(this).index(),k="action=click&map="+a.options.idEl+"-thead";0!=c&&(a.options.elementTH.find("tr th.th_data_cell").each(function(a){e!=
a&&(b(this).removeClass("sort"),b(this).find("span.sort").removeClass("sort-down").removeClass("sort-up"))}),c.css("background",""),a.options.showCheckboxes&&e--,a.options.showNumbers&&e--,c.hasClass("sort-down")?(c.removeClass("sort-down").addClass("sort-up"),a.options.sort_descend=!0,a.options.sort_field=e,k+="&data[key]="+e+"&data[desc]=1"):c.hasClass("sort-up")?(b(this).removeClass("sort"),c.removeClass("sort-up"),a.options.sort_descend=!1,a.options.sort_field=-1):(b(this).addClass("sort"),c.addClass("sort-down"),
a.options.sort_descend=!1,a.options.sort_field=e,k+="&data[key]="+e),k=a.startLoadingIndication(k),ajaxRequest({data:k,_this:b(this)}))}});if(a.options.elementTH.length)a.options.elementTH.on("mouseenter","tr th.th_super_column",function(){if(b(this).hasClass("th_super_column_sortable")&&a.options.sortable){var c=b(this).index(),e=1;a.options.elementTH.find("tr th.th_super_column").each(function(a){a<c&&(e+=b(this).prop("colspan"))});a.options.elementTH.find("tr:last").find("th:nth-child("+e+")").hasClass("sort")||
a.options.elementTH.find("tr:last").find("th:nth-child("+e+")").find("span.sort").css("background","center center url(/images/grid-sort-down.png) no-repeat")}}).on("mouseleave","tr th.th_super_column",function(){if(b(this).hasClass("th_super_column_sortable")&&a.options.sortable){var c=b(this).index(),e=1;a.options.elementTH.find("tr th.th_super_column").each(function(a){a<c&&(e+=b(this).prop("colspan"))});a.options.elementTH.find("tr:last").find("th:nth-child("+e+")").hasClass("sort")||a.options.elementTH.find("tr:last").find("th:nth-child("+
e+")").find("span.sort").css("background","")}});if(a.options.elementTH.length)a.options.elementTH.on("click","tr th.th_super_column",function(){if(b(this).hasClass("th_super_column_sortable")&&a.options.sortable){var c=b(this).index(),e=1;a.options.elementTH.find("tr th.th_super_column").each(function(a){a<c&&(e+=b(this).prop("colspan"))});a.options.elementTH.find("tr:last").find("th:nth-child("+e+")").click()}});if(a.options.elementTH.length)a.options.elementTH.on("click","tr th label",function(){var c=
b(this).parent().find("input:checkbox"),e=0;c.is(":checked")?(c.prop("checked",!1),a.options.elementTB.find("tr").each(function(a){b(this).find("td:first").find("input").prop("checked",!1)})):(c.prop("checked",!0),a.options.elementTB.find("tr").each(function(a){b(this).find("td:first").find("input").prop("checked",!0)}),e=1);ajaxRequest({data:"action=GroupCheckboxClick&map="+a.options.idEl+"&data[val]="+e,_this:b(this)});return!1});if(a.options.elementTH.length)a.options.elementTH.on("click","tr th.th_for_system div.system",
function(){ajaxRequest({data:"action=click&map="+b(this).attr("id"),_this:b(this)})});if(a.options.elementTH.length)a.options.elementTH.on("click","tr th.th_for_system div.sortnone",function(){a.options.elementTH.find("tr th.th_data_cell").each(function(a){b(this).removeClass("sort");b(this).find("span.sort").removeClass("sort-down").removeClass("sort-up")});a.options.sort_field=-1;a.options.sort_descend=!1;ajaxRequest({data:"action=click&map="+b(this).attr("id"),_this:b(this)})});if(a.options.elementTB.length)a.options.elementTB.on("click",
"tr td div.ui-input.enabled,tr td div.ui-input .onpipcall,tr td div.ui-input .oncolorbox_map,tr td div.ui-input.ui-link a",function(c){a.options.rowClickFlag=!0});if(a.options.elementTB.length)a.options.elementTB.on("click","tr td .onclick, tr td .onpipcall",function(c){a.options.rowClickFlag=!0});if(a.options.elementTB.length)a.options.elementTB.on("click","tr td",function(c){if(a.options.rowClickFlag)a.options.rowClickFlag=!1;else if(!b(this).hasClass("td_for_checkbox")&&!b(this).hasClass("td_for_goods_image"))if(b(this).hasClass("td_for_system")){if(b(this).find("div.del-cur").length&&
"none"!=b(this).find("div.del-cur").css("display")){var e=b(this).parent().index("#"+a.options.idEl+" .grid-tbody .row");ajaxRequest({data:"action=click&map="+a.options.idEl+"-Row-Delete&data[num]="+e,_this:b(this)})}}else if(b(this).hasClass("td_group"))e="action=click&map="+a.options.idEl+"-Group&data[group]="+b(this).parent().index("#"+a.options.idEl+" .grid-tbody .group"),e=a.startLoadingIndication(e),ajaxRequest({data:e,_this:b(this)});else{if(a.options.rowClickAsChBClick)return a.triggerCheckbox(b(this).parent(),
c),c.stopImmediatePropagation(),c.preventDefault(),!1;if(!(!a.options.clickable||b(this).closest(".disabled-edit").length&&!a.options.alwaysClickable||b(this).find(".ui-input.enabled").length||a.options.popupFromButton&&!b(this).hasClass("td_show_edit_popup"))){e=b(this).parent().index("#"+a.options.idEl+" .grid-tbody .row");c=b(this).index();var e="action=RowClick&map="+a.options.idEl+"&data[num]="+e,k=!1,g=b(this).closest("tr");a.options.elementTB.find("tr").each(function(a){b(this).removeClass("active")});
g.addClass("active");a.options.showNumbers&&c&&(c--,k=!0);if(k||!a.options.showNumbers)e+="&data[key]="+c;ajaxRequest({data:e,_this:b(this)});a.options.proccessKeyDown=!0;a.options.installHandlerFlag=!0;b("body").on(a.options.unselectRowEvents,"*",function(c){b(this).closest(a.options.elementTB).length||a.unselect_row();if(a.options.installHandlerFlag)return a.options.installHandlerFlag=!1})}}});if(a.options.elementTB.length)a.options.elementTB.on("click","tr td:not(.td_for_ui_obj) label",function(c){a.triggerCheckbox(b(this).parent().parent(),
c);c.stopImmediatePropagation();c.preventDefault();return!1});b("#bankorderimport-PopupImport").on("click","#bankorderimport-PopupImport-Load",function(c){var e="";a.options.elementTB.find("tr.row").each(function(a){b(this).find("td:first").find("input:checked").length&&(e+="&data[arr][]="+a)});ajaxRequest({data:"action=click&map="+b(this).attr("id")+e,_this:b(this)});return!1});b("#bankorderimport-PopupExport").on("click","#bankorderimport-PopupExport-ExportFile",function(c){var e="";a.options.elementTB.find("tr.row").each(function(a){b(this).find("td:first").find("input:checked").length&&
(e+="&data[arr][]="+a)});ajaxRequest({data:"action=click&map="+b(this).attr("id")+e,_this:b(this)});return!1});if(a.options.elementGroupPanel.length)a.options.elementGroupPanel.on("click","span",function(){var c=b(this).index(),e="action=click&map="+a.options.idEl+"-group-panel&data[key]="+c;a.update_group_panel(a.options.array_groups,c);e=a.startLoadingIndication(e);ajaxRequest({data:e,_this:b(this)})});if(a.options.elementSearch.length)a.options.elementSearch.on("click","div.search-start",function(c){c=
a.options.elementSearch.find("div.search-input").find("input").val();c.length?((new RegExp(RegExp.escape("?")+"+")).test(c)?(c="action=click&map="+a.options.idEl+"-search",a.options.elementSearch.find("div.search-input").find("input").val(""),a.options.elementSearch.find("div.search-reset").css("display","none")):(c="action=click&map="+a.options.idEl+"-search&data[value]="+c,a.options.elementSearch.find("div.search-reset").css("display","block")),c=a.startLoadingIndication(c),ajaxRequest({data:c,
_this:b(this)})):"block"==a.options.elementSearch.find("div.search-reset").css("display")&&(c="action=click&map="+a.options.idEl+"-search",a.options.elementSearch.find("div.search-reset").css("display","none"),c=a.startLoadingIndication(c),ajaxRequest({data:c,_this:b(this)}))});if(a.options.elementSearch.length)a.options.elementSearch.on("keydown","div.search-input input",function(c){13==c.which&&a.options.elementSearch.find("div.search-start").trigger("click")});if(a.options.elementSearch.length)a.options.elementSearch.on("click",
"div.search-reset",function(){var c="action=click&map="+a.options.idEl+"-search";a.options.elementSearch.find("div.search-input").find("input").val("");a.options.elementSearch.find("div.search-reset").css("display","none");c=a.startLoadingIndication(c);ajaxRequest({data:c,_this:b(this)})});if(a.options.elementPaginationFirst.length)a.options.elementPaginationFirst.on("click",function(c){c="action=click&map="+a.options.idEl+"-pagination-first";c=a.startLoadingIndication(c);ajaxRequest({data:c,_this:b(this)})});
if(a.options.elementPaginationPrev.length)a.options.elementPaginationPrev.on("click",function(c){c="action=click&map="+a.options.idEl+"-pagination-prev";c=a.startLoadingIndication(c);ajaxRequest({data:c,_this:b(this)})});if(a.options.elementPaginationNext.length)a.options.elementPaginationNext.on("click",function(c){c="action=click&map="+a.options.idEl+"-pagination-next";c=a.startLoadingIndication(c);ajaxRequest({data:c,_this:b(this)})});if(a.options.elementPaginationLast.length)a.options.elementPaginationLast.on("click",
function(c){c="action=click&map="+a.options.idEl+"-pagination-last";c=a.startLoadingIndication(c);ajaxRequest({data:c,_this:b(this)})});if(a.options.elementPaginationCurrent.length)a.options.elementPaginationCurrent.on("change",function(a){b(this).trigger("change.grid");a.stopImmediatePropagation();a.preventDefault();return!1}).on("change.grid",function(c){ajaxRequest({data:"action=change&map="+a.options.idEl+"-pagination-current&data[val]="+b(this).attr("value"),_this:b(this)})});b("body").on("keydown."+
a.options.idEl,function(c){if(a.options.proccessKeyDown&&a.options.body.data("grid").allGrids[0].attr("id")==a.options.idEl&&!a.options.gridBlocked)switch(c.which){case 13:var e=a.options.elementTB.find("tr.active"),k=e.index("tr.row");-1!=k&&ajaxRequest({data:"action=RowClick&map="+a.options.idEl+"&data[num]="+k,_this:e});return!1;case 32:return e=a.options.elementTB.find("tr.active"),e.length&&a.triggerCheckbox(e),!1;case 33:return e=a.options.elementTB.find("tr.active"),e.length&&(e.removeClass("active"),
1==a.options.paginationCurrent?(e=a.options.elementTB.find("tr.row").first(),e.addClass("active"),a.options.inPopup||b(document).scrollTop(e.offset().top-a.options.elementTB.offset().top)):ajaxRequest({data:"action=click&map="+a.options.idEl+"-pagination-prev&data[selectrow]="+e.index("#"+a.options.idEl+" .grid-tbody .row"),_this:a.options.elementPaginationPrev})),!1;case 34:return e=a.options.elementTB.find("tr.active"),e.length&&(e.removeClass("active"),a.options.paginationCurrent==a.options.paginationTotal?
(e=a.options.elementTB.find("tr.row").last(),e.addClass("active"),a.options.inPopup||b(document).scrollTop(e.offset().top-a.options.elementTB.offset().top)):ajaxRequest({data:"action=click&map="+a.options.idEl+"-pagination-next&data[selectrow]="+e.index("#"+a.options.idEl+" .grid-tbody .row"),_this:a.options.elementPaginationNext})),!1;case 35:var g=e=a.options.elementTB.find("tr.active");e.length&&(e.removeClass("active"),c.ctrlKey?ajaxRequest({data:"action=change&map="+a.options.idEl+"-pagination-current&data[val]="+
a.options.paginationTotal+"&data[selectrow]=end",_this:b(this)}):(e=a.options.elementTB.find("tr.row").last(),e.addClass("active"),a.options.inPopup||b(document).scrollTop(e.offset().top-a.options.elementTB.offset().top),c.shiftKey&&(k=g.index("#"+a.options.idEl+" .grid-tbody .row"),a.options.elementTB.find("tr.row").each(function(c){c>=k&&a.triggerCheckboxOn(b(this))}))));return!1;case 36:return g=e=a.options.elementTB.find("tr.active"),e.length&&(e.removeClass("active"),c.ctrlKey?ajaxRequest({data:"action=change&map="+
a.options.idEl+"-pagination-current&data[val]=1&data[selectrow]=home",_this:b(this)}):(e=a.options.elementTB.find("tr.row").first(),e.addClass("active"),a.options.inPopup||b(document).scrollTop(e.offset().top-a.options.elementTB.offset().top),c.shiftKey&&(k=g.index("#"+a.options.idEl+" .grid-tbody .row"),a.options.elementTB.find("tr.row").each(function(c){c<=k&&a.triggerCheckboxOff(b(this))})))),!1;case 38:return a.key_up(c),!1;case 40:return a.key_down(c),!1;case 187:return a.options.groupable&&
a.options.group_field&&c.altKey&&ajaxRequest({data:"action=click&map="+a.options.idEl+"-expand-all-groups",_this:b(this)}),!1;case 189:return a.options.groupable&&a.options.group_field&&c.altKey&&ajaxRequest({data:"action=click&map="+a.options.idEl+"-collapse-all-groups",_this:b(this)}),!1}});b("body").on("keyup."+a.options.idEl,function(c){if(a.options.proccessKeyDown&&a.options.body.data("grid").allGrids[0].attr("id")==a.options.idEl&&!a.options.gridBlocked)switch(c.which){case 35:case 36:case 38:case 40:return a.options.elementTB.find("tr.active").length&&
a.sendStoredCheckboxes(),!1}});if(a.options.elementTB.length)a.options.elementTB.on("keydown","input:focus",function(a){switch(a.which){case 13:return b(this).blur(),!1}});if(a.options.elementTB.length)a.options.elementTB.on("focusin","input",function(c){a.options.currentFocus=b(this).closest(".ui-input").attr("id")});if(a.options.elementTB.length)a.options.elementTB.on("focusout","input",function(c){a.options.currentFocus=""});if(a.options.elementTB.length)a.options.elementTB.on("mouseenter","span.grid-cell-image img",
function(a){b(this).closest("td").append('<div class="grid-image-preview"><img src='+b(this).prop("src")+"></div>");b(this).closest("td").find(".grid-image-preview").css("left",b(this).closest(".grid-cell-image").offset().left+b(this).closest(".grid-cell-image").width()-b(document).scrollLeft()).css("top",b(this).closest(".grid-cell-image").offset().top+b(this).closest(".grid-cell-image").height()-b(document).scrollTop())});if(a.options.elementTB.length)a.options.elementTB.on("mouseleave","span.grid-cell-image img",
function(a){b(".grid-image-preview").remove()})},key_up:function(a){var c=this.options.elementTB.find("tr.active"),e=c;if(c.length){c.removeClass("active");do c=c.prev("tr");while(c.length&&c.hasClass("group"));c.length?(c.addClass("active"),this.options.inPopup||100>c.offset().top-b(document).scrollTop()&&b(document).scrollTop(c.offset().top-100),"undefined"!==typeof a&&a.shiftKey&&(this.triggerCheckboxOff(e),this.triggerCheckboxOff(c))):1==this.options.paginationCurrent?(e.addClass("active"),this.options.inPopup||
b(document).scrollTop(e.offset().top-this.options.elementTB.offset().top)):(this.options.gridBlocked=!0,this.options.checkboxBuffer.length?(ajaxRequest({data:"action=click&map="+this.options.idEl+"-pagination-prev&data[selectrow]=end&data[from]="+this.options.checkboxBuffer[this.options.checkboxBuffer.length-1]+"&data[to]="+this.options.checkboxBuffer[0]+"&data[val]="+this.options.checkboxBufferVal,_this:this.options.elementPaginationPrev}),this.options.checkboxBuffer=[]):"undefined"!==typeof a?ajaxRequest({data:"action=click&map="+
this.options.idEl+"-pagination-prev&data[selectrow]=end",_this:this.options.elementPaginationPrev}):ajaxRequest({data:"action=click&map="+this.options.idEl+"-pagination-prev&data[selectrow]=end&data[fromformcontroller]=1",_this:this.options.elementPaginationPrev}))}},key_down:function(a){var c=this.options.elementTB.find("tr.active"),e=c;if(c.length){c.removeClass("active");do c=c.next("tr");while(c.length&&c.hasClass("group"));c.length?(c.addClass("active"),this.options.inPopup||c.offset().top-b(document).scrollTop()>=
b(g).height()-130&&b(document).scrollTop(c.offset().top-(b(g).height()-130)),"undefined"!==typeof a&&a.shiftKey&&(this.triggerCheckboxOn(e),this.triggerCheckboxOn(c))):this.options.paginationCurrent==this.options.paginationTotal?e.addClass("active"):(this.options.gridBlocked=!0,this.options.checkboxBuffer.length?(ajaxRequest({data:"action=click&map="+this.options.idEl+"-pagination-next&data[selectrow]=home&data[from]="+this.options.checkboxBuffer[0]+"&data[to]="+this.options.checkboxBuffer[this.options.checkboxBuffer.length-
1]+"&data[val]="+this.options.checkboxBufferVal,_this:this.options.elementPaginationNext}),this.options.checkboxBuffer=[]):"undefined"!==typeof a?ajaxRequest({data:"action=click&map="+this.options.idEl+"-pagination-next&data[selectrow]=home",_this:this.options.elementPaginationNext}):ajaxRequest({data:"action=click&map="+this.options.idEl+"-pagination-next&data[selectrow]=home&data[fromformcontroller]=1",_this:this.options.elementPaginationNext}))}},select_row:function(a){var c=this,e=0;c.options.elementTB.find("tr").each(function(k){b(this).hasClass("row")&&
(e==a&&(b(this).addClass("active"),c.options.inPopup||b(document).scrollTop(b(this).offset().top-c.options.elementTB.offset().top)),e++)});c.options.gridBlocked=!1},unselect_row:function(){this.options.proccessKeyDown=!1;b("body").off(this.options.unselectRowEvents)},focus_in:function(){var a=this;a.options.proccessKeyDown=!0;b("body").on(a.options.unselectRowEvents,"*",function(c){b(this).closest(a.options.elementTB).length||a.unselect_row()})},update_pagination:function(a,c,b,k,g,h){if(this.options.sortableRows||
this.options.sortableRowsIfSortNone)1==a&&1==c?this.options.elementTB.sortable("option","connectWith",[]):1==a?this.options.elementTB.sortable("option","connectWith",this.options.elementTF):a==c?this.options.elementTB.sortable("option","connectWith",this.options.elementTH):this.options.elementTB.sortable("option","connectWith",[this.options.elementTH,this.options.elementTF]);this.options.elementPaginationCurrent.val(a);this.options.elementPaginationTotal.html(c);this.options.elementPaginationPage.html(k+
"-"+g+" \u0438\u0437 "+h);1==a?this.options.elementPaginationPrev.attr("disabled","disabled"):this.options.elementPaginationPrev.removeAttr("disabled");a==c?this.options.elementPaginationNext.attr("disabled","disabled"):this.options.elementPaginationNext.removeAttr("disabled");this.options.paginationCurrent=a;this.options.paginationTotal=c;this.options.numberStartFrom=b;this.options.paginationFrom=k;this.options.paginationTo=g},update_head:function(a){var c=!1,e=this,k="",g="",h=0,l=!0,n="";e.options.array_columns=
a;k+="<colgroup>";e.options.showCheckboxes&&(k+='<col width="36px">');e.options.showNumbers&&(k+='<col width="25px">');b.each(a,function(a,c){k+='<col width="'+c.width+'">'});e.options.resizable&&(k+="<col>");if(e.options.showSystem||e.options.showDelCurButtons)k=e.options.showSortNone?k+'<col width="52px">':k+'<col width="28px">';k+="</colgroup>";b.each(a,function(a,b){b.super_column&&(c=!0)});e.options.elementSortableColumnsPointer.removeClass("super_column");if(c){e.options.elementSortableColumnsPointer.addClass("super_column");
var w=[],y=[],p=[],m=0,x="",v=!1,q=0,z=!1,g=g+'<tr class="super_column sortable-columns">';e.options.showCheckboxes&&q++;e.options.showNumbers&&q++;0==q&&(q=1,z=!0);b.each(a,function(a,c){c.super_column?""==x&&v?(w[m]=x,y[m]=q,p[m]=e.options.sortable?"th_super_column_sortable":"",m++,q=0,x=c.super_column):c.super_column!=x&&(v?(w[m]=x,y[m]=q,p[m]="",m++,q=0):1==q?(w[m]=x,y[m]=1,p[m]=z?"th_super_column_first":"header-left-column",m++,q=0):2==q&&(w[m]=x,y[m]=1,p[m]="header-left-column",m++,w[m]=x,y[m]=
1,p[m]="header-left-column",m++,q=0),x=c.super_column):""==x?v?(w[m]=x,y[m]=q,p[m]=e.options.sortable?"th_super_column_sortable":"",m++,q=0):1==q?(w[m]=x,y[m]=1,p[m]=z?"th_super_column_first":"header-left-column",m++,q=0):2==q&&(w[m]=x,y[m]=1,p[m]="header-left-column",m++,w[m]=x,y[m]=1,p[m]="header-left-column",m++,q=0):""!=x&&(w[m]=x,y[m]=q,p[m]="",m++,q=0,x="");q++;v=!0});e.options.resizable&&(""==x?(w[m]=x,y[m]=q,p[m]=e.options.sortable?"th_super_column_sortable":"",m++,q=0):""!=x&&(w[m]=x,y[m]=
q,p[m]="",m++,q=0,x=""),q++);if(e.options.showSystem||e.options.showDelCurButtons)""!=x&&(w[m]=x,y[m]=q,p[m]="",m++,q=0,x=""),q++;w[m]=x;y[m]=q;p[m]="header-right-column";z&&(bLeftBorder=!1,"th_super_column_first"==p[0]&&(bLeftBorder=!0),w.shift(),y.shift(),p.shift(),bLeftBorder&&(p[0]+=" th_super_column_first"));b.each(y,function(a,c){g=w[a].length?g+('<th class="th_super_column super_column_caption" colspan='+c+' ><span class="super_column_caption">'+w[a]+"</span></th>"):g+('<th class="th_super_column super_column_empty_caption '+
p[a]+'" colspan='+c+" ></th>")});g+="</tr>"}g=c?g+'<tr class="super_column sortable-columns">':g+'<tr class="sortable-columns">';e.options.showCheckboxes&&(n="th_data_cell th_for_checkbox",l&&(n+=" header-left-column",l=!1),g+='<th class="'+n+'"><input type="checkbox"/><label></label></th>');e.options.showNumbers&&(n="th_data_cell th_for_number",l&&(n+=" header-left-column",l=!1),g+='<th class="'+n+'">\u2116</th>');b.each(a,function(a,c){var b="",k="th_data_cell th_caption",y="";c.super_column&&(k+=
" super_column_item");e.options.sortable&&!c.not_sortable&&(k+=" sortable");e.options.sortable&&e.options.sort_field==h&&(k+=" sort");c["text-align"]?y+="text-align:"+c["text-align"]+";":k+=" ellipsis";c["min-width"]&&(y+="min-width:"+c["min-width"]+"px;");e.options.sortable&&!c.not_sortable&&(b="sort",e.options.sort_field==h&&(b+=e.options.sort_descend?" sort-up":" sort-down"),b='<span class="'+b+'">&nbsp;</span>');h++;g+='<th style="'+y+'" class="'+k+'">';g+='<span class="resizable-column">';g=
e.options.headerOverflowHidden?g+'<span class="caption">':g+'<span class="caption" style="overflow:visible">';g=c["text-align"]&&"right"==c["text-align"]?g+(b+'<span class="title">'+c.caption+"</span></span>"):g+('<span class="title">'+c.caption+"</span>"+b+"</span>");g+="</span>";g+="</th>"});e.options.resizable&&(n="th_data_cell idle_column",e.options.showSystem||e.options.showDelCurButtons||(n+=" header-right-column"),g+='<th class="'+n+'"></th>');if(e.options.showSystem||e.options.showDelCurButtons)g+=
'<th class="th_data_cell th_for_system header-right-column">',e.options.showSortNone&&(g+='<div id="'+e.options.idEl+'-sortnone" class="sortnone"></div>'),e.options.showSystem&&(g+='<div id="'+e.options.idEl+'-system" class="system"></div>'),g+="</th>";g+="</tr>";e.options.elementT.find("colgroup").length?e.options.elementT.find("colgroup").replaceWith(k):e.options.elementTH.before(k);e.options.elementTH.html(g);e.options.resizable&&e.resizable();e.options.sortableColumns&&e.sortable_columns()},update_foot:function(a){var c=
'<tr class="table-footer-data">',e;this.options.array_footer=a;var k=this.options.array_columns;this.options.showCheckboxes&&(c+="<td></td>");this.options.showNumbers&&(c+="<td></td>");b.each(k,function(k,g){e=!0;b.each(a,function(a,b){k==a&&("object"===typeof b?(c+='<td class="table-footer-data-cell" style="text-align:'+b["text-align"]+'">',c+="<span>"+b[0]+"</span>"):(c+='<td class="table-footer-data-cell">',c+="<span>"+b+"</span>"),e=!1)});e&&(c+="<td>");c+="</td>"});this.options.resizable&&(c+=
"<td></td>");if(this.options.showSystem||this.options.showDelCurButtons)c+="<td></td>";c+="</tr>";if(this.options.showTableFooter||this.options.showTablePagination)var g=b("#"+this.options.idEl+" .table-pagination").detach();this.options.elementTF.html(c);(this.options.showTableFooter||this.options.showTablePagination)&&g.appendTo(this.options.elementTF.find("tr td:first"));(this.options.array_rows.length||this.options.groups.length)&&this.options.newRecordFromGridContent.length&&(this.options.elementETS.find(".new_record_from_grid_select").remove(),
this.options.elementTF.find("tr").before('<tr class="table-footer-new-record-from-grid"><td colspan='+this.options.elementTF.find("tr td").length+">"+this.options.newRecordFromGridContent+"</td></tr>"));this.updateTableFooter();this.alignTableFooter()},update_head_cell:function(a,c){var b=1;this.options.showCheckboxes&&b++;this.options.showNumbers&&b++;this.options.elementTH.find("tr th:nth-child("+(a+b)+") span:first").html(c)},update_rows:function(a){var c=this,e="",k=[];if(c.options.showNumbers)var g=
c.options.numberStartFrom;b.each(a,function(a,h){e+='<tr class="row';"undefined"!==typeof h.row_class&&(e+=" "+h.row_class);e+='"';"undefined"!==typeof h.row_color&&(e+=' style="background: #'+h.row_color+'"');e+=">";c.options.showCheckboxes&&(e+='<td class="td_for_checkbox"><input type="checkbox"/><label></label></td>');c.options.showNumbers&&(e=c.options.popupFromButton?e+('<td class="td_show_edit_popup" style="text-align:center;padding-left:0px;padding-right:0px;">'+ ++g+"</td>"):e+('<td style="text-align:center;padding-left:0px;padding-right:0px;">'+
++g+"</td>"));k="undefined"!==typeof h.data?h.data:h;b.each(k,function(a,b){e+=c.getCellContent(a,b)});c.options.resizable&&(e+="<td></td>");if(c.options.showSystem||c.options.showDelCurButtons)e+='<td class="td_for_system">',c.options.showDelCurButtons&&(e+='<div class="del-cur"></div>'),e+="</td>";e+="</tr>"});c.options.elementTB.html(e);c.options.elementTB.find("tr").each(function(a){b(this).css("height",b(this).height())});c.options.elementTB.find("span.v-money").closest("td").css("text-align",
"right");c.options.array_rows=a;c.options.sortableRowsIfSortNone?c.options.elementTB.sortable(c.options.elementTB.closest("div.disabled-edit.Grid").length?"disable":"enable"):c.options.draggableSelectedRows&&!c.options.inPopup&&(c.draggable_row(),c.options.action_counter&&c.disable_draggable_row())},update_row:function(a,c){var e=this,k=1;a=parseInt(a);e.options.showCheckboxes&&k++;e.options.showNumbers&&k++;b.each(c,function(c,b){e.options.elementTB.find("tr:nth-child("+(a+1)+") td:nth-child("+(c+
k)+")").replaceWith(e.getCellContent(c,b));e.options.elementTB.find("tr:nth-child("+(a+1)+") td:nth-child("+(c+k)+")").find("span.v-money").closest("td").css("text-align","right");e.options.array_rows[a][c]=b})},update_row_with_exception:function(a,c,e,k){var g=this,h=1,l,n=g.options.currentFocus;a=parseInt(a);g.options.showCheckboxes&&h++;g.options.showNumbers&&h++;b.each(c,function(c,k){l=!1;b.each(e,function(a,b){c==b&&(l=!0)});l||(g.options.elementTB.find("tr:nth-child("+(a+1)+") td:nth-child("+
(c+h)+")").replaceWith(g.getCellContent(c,k)),g.options.elementTB.find("tr:nth-child("+(a+1)+") td:nth-child("+(c+h)+")").find("span.v-money").closest("td").css("text-align","right"),g.options.array_rows[a][c]=k)});n.length&&k&&g.options.elementTB.find("tr:nth-child("+(a+1)+")").find("#"+n+" input").focus()},add_row:function(a){var c='<tr class="row">',e=1;this.options.showCheckboxes&&(c+='<td class="td_for_checkbox"><input type="checkbox"/><label></label></td>',e++);if(this.options.showNumbers){var k=
0;this.options.elementTB.find("tr").length&&(k=this.options.elementTB.find("tr:last").find("td:nth-child("+e+")").html());c+="<td>"+ ++k+"</td>"}b.each(a,function(a,b){c+="<td>"+b+"</td>"});if(this.options.showSystem||this.options.showDelCurButtons)c+='<td class="td_for_system">',this.options.showDelCurButtons&&(c+='<div class="del-cur"></div>'),c+="</td>";c+="</tr>";this.options.elementTB.append(c)},update_col:function(a,c){var e=1;this.options.showCheckboxes&&e++;this.options.showNumbers&&e++;this.options.elementTB.find("tr").each(function(k){b(this).find("td:nth-child("+
(a+e)+")").html(c[k])})},add_col:function(a,c){var e=this,k="<th><span>"+a+"</span>";e.options.sortable&&(k+='<span class="sort">&nbsp;</span>');e.options.showSystem||e.options.showDelCurButtons?e.options.elementTH.find("tr th:last").before(k):e.options.elementTH.find("tr th:last").after(k);e.options.elementTB.find("tr").each(function(a){k="<td>"+c[a]+"</td>";e.options.showSystem||e.options.showDelCurButtons?b(this).find("td:last").before(k):b(this).find("td:last").after(k)})},insert_before_col:function(a,
c,e){var k=1;a="<th><span>"+a+"</span>";this.options.showCheckboxes&&k++;this.options.showNumbers&&k++;this.options.sortable&&(a+='<span class="sort">&nbsp;</span>');this.options.elementTH.find("tr th:nth-child("+(e+k)+")").before(a);this.options.elementTB.find("tr").each(function(a){b(this).find("td:nth-child("+(e+k)+")").before("<td>"+c[a]+"</td>")})},insert_after_col:function(a,c,e){var k=1;a="<th><span>"+a+"</span>";this.options.showCheckboxes&&k++;this.options.showNumbers&&k++;this.options.sortable&&
(a+='<span class="sort">&nbsp;</span>');this.options.elementTH.find("tr th:nth-child("+(e+k)+")").after(a);this.options.elementTB.find("tr").each(function(a){b(this).find("td:nth-child("+(e+k)+")").after("<td>"+c[a]+"</td>")})},delete_row:function(a){var c=1;this.options.showCheckboxes&&c++;this.options.elementTB.find("tr:nth-child("+(a+1)+")").remove();if(this.options.showNumbers){var e=this.options.numberStartFrom;this.options.elementTB.find("tr").each(function(a){b(this).find("td:nth-child("+c+
")").html(++e)})}},delete_col:function(a){var c=1;this.options.showCheckboxes&&c++;this.options.showNumbers&&c++;this.options.elementTH.find("tr th:nth-child("+(a+c)+")").remove();this.options.elementTB.find("tr").each(function(e){b(this).find("td:nth-child("+(a+c)+")").remove()})},update_cell:function(a,c,b){var k=1;a=parseInt(a);c=parseInt(c);this.options.showCheckboxes&&k++;this.options.showNumbers&&k++;this.options.elementTB.find("tr.row:eq("+a+") td:nth-child("+(c+k)+")").replaceWith(this.getCellContent(c,
b));this.options.elementTB.find("tr.row:eq("+a+") td:nth-child("+(c+k)+")").find("span.v-money").closest("td").css("text-align","right");this.options.array_rows[a][c]=b},update_sort_field:function(a){this.options.sort_field=a},update_group_panel:function(a,c){var e=this;e.options.array_groups=a;e.options.group_field=c;if(a.length){var k=0==e.options.group_field?"active":"inactive",g='<span class="'+k+'">\u0422\u0430\u0431\u043b\u0438\u0446\u0430</span>';b.each(a,function(a,c){k=e.options.group_field==
a+1?"active":"inactive";g+='<span class="'+k+'">'+c+"</span>"});e.options.elementGroupPanel.html(g)}else e.options.elementGroupPanel.empty()},show_groups:function(a){var c=this,e=c.options.array_columns.length,k="";c.options.showCheckboxes&&e++;c.options.showNumbers&&e++;c.options.resizable&&e++;c.options.showSystem&&e++;b.each(a,function(a,b){k='<tr class="group"><td colspan='+(e-1)+' class="td_group"><div class="'+(b[3]?"collapsed":"expanded")+'"></div><div style="padding-top:2px">'+b[1]+":&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+
b[2]+':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="group-sum-info">'+b[4]+"</span></div></td></tr>";2==b[3]?c.options.elementTB.append(k):c.options.elementTB.find("tr:nth-child("+(b[0]+1)+")").before(k)});c.options.groups=a},update_checkboxes:function(a){var c=this,e=!1;b.each(a,function(a,b){c.options.elementTB.find("tr:nth-child("+(b+1)+")").find("input").attr("checked","checked");e=!0});e?c.options.elementTH.find("input").attr("checked","checked"):c.options.elementTH.find("input").removeAttr("checked")},
update_action_counter:function(a){this.options.action_counter=a;0<a&&(a="+"+a);this.options.elementButtonPanel.length?this.options.elementButtonPanel.find("span.GridSelectActionCounter").html(a):this.options.elementMainTable.closest(".partner-Index").length&&(this.options.elementMainTable.closest(".partner-Index").find(".area-Top #partner-Index-EditButton span.GridSelectActionCounter").html(a),this.options.elementMainTable.closest(".partner-Index").find(".area-Top #partner1-Index-EditButton span.GridSelectActionCounter").html(a));
horFixed()},update_footer_string:function(a){this.options.array_rows.length||this.options.groups.length?(this.options.elementMainTable.css("display","block"),this.options.elementFooter.css("display","block"),this.options.elementETS.css("display","none"),this.options.buttons.length&&(this.options.elementButtonPanel.closest(".disabled-edit").length||this.options.elementButtonPanel.find("div.Delete").css("display","inline-block"))):(this.options.elementMainTable.css("display","none"),this.options.elementFooter.css("display",
"none"),this.options.elementETS.css("display","block"),this.options.buttons.length&&this.options.elementButtonPanel.find("div.Delete").css("display","none"));this.options.footerString=a;this.options.elementFooterString.html(this.options.footerString)},resizable:function(a){var c=this,e=c.options.elementTH.find("span.resizable-column");e.each(function(){var a=parseInt(b(this).closest("th").css("min-width"));b(this).closest("th").css("min-width","inherit");b(this).resizable({handles:"e",minWidth:a?
a:50,stop:function(a,k){b(this).data();var g="";e.each(function(a){var e=parseInt(b(this).closest("th").css("width"))+2,e=e+"px";g+="&data[width]["+a+"]="+e;c.options.array_columns[a].width=e});ajaxRequest({data:"action=resize&map="+c.options.idEl+"-thead"+g,_this:b(this)});b("body").removeClass("table-column-resizing");c.alignTableFooter()},start:function(a,e){b("body").addClass("table-column-resizing");c.closeSelect()},resize:function(a,e){b(this).closest("table").find("colgroup").find("col:nth-child("+
(b(this).parent().index()+1)+")").attr("width",e.size.width+"px");c.update_cell_layout(e.element);c.alignTableFooter()}});c.update_cell_layout(this)})},update_cell_layout:function(a){},stickyFooter:function(){this.options.elementT.addClass("footer-sticked");this.options.elementMainTable.css("padding-bottom",this.options.elementFooter.height()+2);this.options.hasLeft=0<b(".area-Left").length},updateFooter:function(){if(20<this.options.elementT.offset().left){var a=this.options.elementT.offset().left-
b(document).scrollLeft(),a=0<a?a:0;this.options.elementFooter.css({left:a,width:b(g).width()-a})}b(g).height()+b(document).scrollTop()<this.options.elementT.offset().top+this.options.elementT.height()+this.options.elementFooter.height()&&b(g).height()+b(document).scrollTop()>this.options.elementTH.offset().top+this.options.elementTH.height()+this.options.elementFooter.height()?this.options.elementFooter.css("bottom",0).css("top",""):this.options.elementFooter.css("bottom","").css("top",this.options.elementFooterB.offset().top-
b(document).scrollTop()-38)},stickyAndUpdateFooter:function(){this.options.inPopup||!this.options.showFooter&&!this.options.showPagination||(this.stickyFooter(),this.updateFooter())},updateTableFooter:function(){var a=0;this.options.elementTF.css("left",-1*(b(document).scrollLeft()-this.options.elementT.offset().left));b(g).height()+b(document).scrollTop()<this.options.elementT.offset().top+this.options.elementT.height()+this.options.elementTF.height()+0&&b(g).height()+b(document).scrollTop()>this.options.elementTH.offset().top+
this.options.elementTH.height()+this.options.elementTF.height()+0?this.options.elementTF.css("bottom",0).css("top",""):this.options.elementTF.css("bottom","").css("top",this.options.elementT.offset().top+this.options.elementT.height()-b(document).scrollTop());this.options.inPopup||(a=this.options.element.closest("#goods-Index").length||this.options.element.closest("#mail-Index").length||this.options.element.closest("#knowledgebase-Index").length?310:this.options.element.closest("#partner-Index").length||
this.options.element.closest("#partner1-Index").length||this.options.element.closest("#discountcard-Index").length||this.options.element.closest("#request-Index").length||this.options.element.closest("#calllog-Index").length||this.options.element.closest("#performancemanagerreport-Index").length?260:this.options.element.closest("#historycrm-Index").length||this.options.element.closest("#crmreports-Index").length?250:this.options.element.closest("#task-Index").length?225:this.options.element.closest(".PointFilter-Right").length?
b(".PointFilter-Left").hasClass("FilterMinimized")?45:180:10);this.options.showTablePagination&&(this.options.inPopup?(this.options.elementTF.find("tr.table-footer-new-record-from-grid").length?this.options.elementPagination.css("top",this.options.elementT.height()-this.options.elementTF.height()+this.options.elementTF.find("tr.table-footer-new-record-from-grid").height()):this.options.elementPagination.css("top",this.options.elementT.height()-this.options.elementTF.height()),this.options.elementPagination.css("left",
b("#"+this.options.idEl+" .grid-main-table").scrollLeft()+4)):(parseInt(this.options.elementTF.css("left"))<a&&this.options.elementPagination.css("left",b(document).scrollLeft()-this.options.TFInitLeft+a+4),0==b(document).scrollLeft()&&this.options.elementPagination.css("left",b(document).scrollLeft()+4)))},left_panel_minimized:function(){this.options.TFInitLeft-=135},left_panel_maximized:function(){this.options.TFInitLeft+=135},stickyAndUpdateTableFooter:function(){(this.options.showTableFooter||
this.options.showTablePagination)&&this.updateTableFooter()},updatePopupGridFooters:function(){b(".popUp.grid-only .table-footer").each(function(){var a=b(this).closest(".area-Body");b(this).css("top",a.position().top+a.outerHeight());b(this).css("width",a.children(".grid").innerWidth()-(parseInt(b(this).css("padding-left"))+parseInt(b(this).css("padding-right"))))})},show_only_buttons:function(a){b("div.filter-area").hide();this.options.elementGroupPanel.css("display","none");this.options.elementSearch.css("display",
"none");this.options.elementETS.html(a).removeClass("empty-table-string")},check_checkboxes:function(){this.options.elementTH.find("tr").find("th:first").find("input").attr("checked","checked");this.options.elementTB.find("tr").each(function(a){b(this).find("td:first").find("input").attr("checked","checked")})},check_checkbox:function(a){a++;this.triggerCheckboxOn(this.options.elementTB.find("tr:nth-child("+a+")"))},uncheck_checkbox:function(a){a++;this.triggerCheckboxOff(this.options.elementTB.find("tr:nth-child("+
a+")"))},bind_handlers:function(){var a=this;a.options.inPopup?(b(".popup-overlay").on("scroll."+a.options.idEl,function(){if(a.options.showTableFooter||a.options.showTablePagination)a.updateTableFooter(),a.alignTableFooter();a.options.elementT.length&&a.updateSelectPositionOnScroll()}),b(".popup-overlay").scroll(),b("#"+a.options.idEl+" .grid-main-table").on("scroll."+a.options.idEl,function(){if(a.options.showTableFooter||a.options.showTablePagination)a.updateTableFooter(),a.alignTableFooter();
a.options.elementT.length&&a.closeSelect()}),b("#"+a.options.idEl+" .grid-main-table").scroll()):(b(g).on("resize."+a.options.idEl+" scroll."+a.options.idEl,function(){if(a.options.showTableFooter||a.options.showTablePagination)a.updateTableFooter(),a.alignTableFooter()}),b(g).scroll());if(a.options.showTableFooter||a.options.showTablePagination)a.options.TFInitLeft=parseInt(a.options.elementTF.css("left"))+b(document).scrollLeft()},show_row_flash_down:function(a){a++;var c=a%2?"transparent":"rgb(244, 244, 244)";
this.options.elementTB.find("tr:nth-child("+a+")").css("background","#999999").animate({backgroundColor:c},300)},show_row_doble_flash:function(a){a++;var c=a%2?"transparent":"rgb(244, 244, 244)";this.options.elementTB.find("tr:nth-child("+a+")").animate({backgroundColor:"#999999"},300).animate({backgroundColor:c},300).animate({backgroundColor:"#999999"},300).animate({backgroundColor:c},300)},set_focus_on_input:function(a,c){var b=1;a=parseInt(a);c=parseInt(c);this.options.showCheckboxes&&b++;this.options.showNumbers&&
b++;this.options.elementTB.find("tr.row:eq("+a+") td:nth-child("+(c+b)+") input").focus().select()},sortable_rows:function(){var a=this,c=a.options.elementTB,e=a.options.elementTH,k=a.options.elementTF,g=0,h=0,l=0,n="",w=!1;c.sortable({axis:"y",distance:10,tolerance:"pointer",opacity:.7,containment:b("#"+a.options.idEl+" .grid-main-table"),scroll:!1,helper:function(a,c){c.css("background","#999999");c.children().each(function(){b(this).find("span").css("display","block").width(b(this).width());b(this).width(b(this).width()).css("padding-top",
"0px")});return c.clone()},start:function(c,b){w=a.options.elementSortableColumnsPointer.hasClass("super_column");g=b.item.context.rowIndex;w&&g--;a.closeSelectWithoutJs()},change:function(c,b){l&&(l--,a.updateTableFooter(),a.alignTableFooter())},stop:function(c,e){l?a.options.elementTB.find("tr").css("background","transparent"):(h=e.item.context.rowIndex,w&&h--,a.options.elementTB.find("tr:nth-child("+h+")").children().each(function(){b(this).find("span").css("display","inline");b(this).css("padding-top",
"0px")}),g==h?a.options.elementTB.find("tr:nth-child("+h+")").css("background","transparent"):(-1!=a.options.sort_field&&(a.options.elementTH.find("tr th.th_data_cell").each(function(a){b(this).removeClass("sort");b(this).find("span.sort").removeClass("sort-down").removeClass("sort-up")}),a.options.sort_field=-1,a.options.sort_descend=!1),g--,h--,ajaxRequest({data:"action=DropRow&map="+a.options.idEl+"&data[source]="+g+"&data[target]="+h,_this:b(this)})))}});e.sortable({cancel:"tr",containment:"parent",
tolerance:"pointer",change:function(c,b){l=3;a.updateTableFooter();a.alignTableFooter();n=a.options.elementTB.find("tr.ui-sortable-helper").html();a.options.elementTB.find("tr.ui-sortable-helper").html("<td>\u041e\u0442\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0437\u0434\u0435\u0441\u044c \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u043d\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443</td>");a.options.elementTB.find("tr.ui-sortable-helper").find("td").width(a.options.elementTB.width()).css("text-align",
"center").css("padding-top","6px")},out:function(c,b){a.options.elementTB.find("tr.ui-sortable-helper").html(n)},receive:function(e,k){c.sortable("cancel");a.updateTableFooter();a.alignTableFooter();g--;ajaxRequest({data:"action=click&map="+a.options.idEl+"-sortable-rows-pagination-prev&data[source]="+g,_this:b(this)})}});k.sortable({cancel:"tr",containment:"parent",tolerance:"pointer",change:function(c,b){l=3;a.updateTableFooter();a.alignTableFooter();n=a.options.elementTB.find("tr.ui-sortable-helper").html();
a.options.elementTB.find("tr.ui-sortable-helper").html("<td>\u041e\u0442\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0437\u0434\u0435\u0441\u044c \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443</td>");a.options.elementTB.find("tr.ui-sortable-helper").find("td").width(a.options.elementTB.width()).css("text-align","center").css("padding-top","6px")},out:function(c,
b){a.options.elementTB.find("tr.ui-sortable-helper").html(n)},receive:function(e,k){c.sortable("cancel");a.updateTableFooter();a.alignTableFooter();g--;ajaxRequest({data:"action=click&map="+a.options.idEl+"-sortable-rows-pagination-next&data[source]="+g,_this:b(this)})}})},sortable_columns:function(){var a=this,c=a.options.elementTH.find("tr.sortable-columns"),e=0,g=0,h=!0,r=a.options.elementSortableColumnsPointer.hasClass("super_column"),l=!1;c.sortable({axis:"x",items:"th:not(.th_for_checkbox):not(.th_for_number):not(.idle_column):not(.th_for_system):not(.header-left-column):not(.header-right-column)",
cancel:"th.super_column_caption, th.super_column_item",opacity:.7,distance:10,containment:"parent",helper:function(c,e){var g="",k=e.index(),h=k,u=0,v=0,q="";r?e.hasClass("super_column_empty_caption")?(l=!0,a.options.elementTH.find("tr:first th").each(function(a){a<=k&&1<b(this).prop("colspan")&&(u+=b(this).prop("colspan")-1)}),g+='<table><thead><tr style="height:22px">'+e[0].outerHTML+'</tr><tr style="height:28px">'+a.options.elementTH.find("tr:last").find("th:nth-child("+(k+u+1)+")")[0].outerHTML+
"</tr></thead><tbody>",a.options.elementTH.find("tr:last").find("th:nth-child("+(k+u+1)+")").css("box-shadow","none").html(""),a.options.elementTB.find("tr").each(function(a){b(this).hasClass("row")?(q=b(this).find("td:nth-child("+(k+1)+")")[0].outerHTML,v=q.indexOf("<script>"),-1!=v&&(q=q.substr(0,q.indexOf("<script>"))),g+="<tr>"+q+"</tr>",b(this).find("td:nth-child("+(k+u+1)+")").html("")):g+="<tr><td></td></tr>"}),k?(g+="</tbody><tfoot><tr>"+a.options.elementTF.find("tr td:nth-child("+(k+u+1)+
")")[0].outerHTML+"</tr></tfoot></table>",a.options.elementTF.find("tr td:nth-child("+(k+u+1)+")").html("")):g+="</tbody><tfoot><tr></tr></tfoot></table>",e.html(g).find("table").width(a.options.elementTH.find("tr:last").find("th:nth-child("+(k+u+1)+")").width())):(a.options.showCheckboxes&&h--,a.options.showNumbers&&h--,b.each(a.options.array_columns,function(c,b){c<=h&&(b.super_column&&u++,c&&(!b.super_column&&a.options.array_columns[c-1].super_column||b.super_column&&a.options.array_columns[c-
1].super_column&&b.super_column!=a.options.array_columns[c-1].super_column)&&u--)}),g+='<table><thead><tr style="height: 22px;">'+a.options.elementTH.find("tr:first").find("th:nth-child("+(k-u+1)+")")[0].outerHTML+'</tr><tr style="height:28px">'+e[0].outerHTML+"</tr></thead><tbody>",a.options.elementTB.find("tr").each(function(a){b(this).hasClass("row")?(q=b(this).find("td:nth-child("+(k+1)+")")[0].outerHTML,v=q.indexOf("<script>"),-1!=v&&(q=q.substr(0,q.indexOf("<script>"))),g+="<tr>"+q+"</tr>",
b(this).find("td:nth-child("+(k+1)+")").html("")):g+="<tr><td></td></tr>"}),k?(g+="</tbody><tfoot><tr>"+a.options.elementTF.find("tr td:nth-child("+(k+1)+")")[0].outerHTML+"</tr></tfoot></table>",a.options.elementTF.find("tr td:nth-child("+(k+1)+")").html("")):g+="</tbody><tfoot><tr></tr></tfoot></table>",e.html(g).css("margin-top","-22px").find("table").width(a.options.elementTH.find("tr:first").find("th:nth-child("+(k-u+1)+")").width())):(q=e[0].outerHTML,v=q.indexOf("<script>"),-1!=v&&(q=q.substr(0,
q.indexOf("<script>"))),g+="<table><thead><tr>"+q+"</tr></thead><tbody>",a.options.elementTB.find("tr").each(function(a){b(this).hasClass("row")?(q=b(this).find("td:nth-child("+(k+1)+")")[0].outerHTML,v=q.indexOf("<script>"),-1!=v&&(q=q.substr(0,q.indexOf("<script>"))),g+="<tr>"+q+"</tr>",b(this).find("td:nth-child("+(k+1)+")").html("")):g+="<tr><td></td></tr>"}),k?(g+="</tbody><tfoot><tr>"+a.options.elementTF.find("tr td:nth-child("+(k+1)+")")[0].outerHTML+"</tr></tfoot></table>",a.options.elementTF.find("tr td:nth-child("+
(k+1)+")").html("")):g+="</tbody><tfoot><tr></tr></tfoot></table>",e.html(g).find("table").width(a.options.elementTH.find("tr").find("th:nth-child("+(k+1)+")").width()));e.find("th").css("box-shadow","none");a.options.elementTB.find("tr").each(function(a){e.find("tbody tr:nth-child("+(a+1)+")").height(b(this).height())});e.find("span.sort").css("display","none");e.find("span.sort-up").css("display","none");e.find("span.sort-down").css("display","none");return e},start:function(c,b){e=b.item.context.cellIndex;
a.closeSelectWithoutJs()},change:function(c,b){if(h){var e=b.placeholder.index(),g=0,k=0,x=0,v=0;a.options.showCheckboxes&&g++;a.options.showNumbers&&g++;k=a.options.elementT.offset().left+(r?-2:g?9:0);for(i=0;i<e;i++)if(r)if(l)k+=a.options.elementTH.find("tr:first th:nth-child("+(i+1)+")").width()+2;else if(i<g)k+=a.options.elementTH.find("tr:first th:nth-child("+(i+1)+")").width()+2;else{if(i>=g)if(a.options.array_columns[i-g].super_column)x++,v&&a.options.array_columns[i-g].super_column==a.options.array_columns[i-
g-1].super_column||v++;else{if(v){for(j=0;j<v;j++)k+=a.options.elementTH.find("tr:first th:nth-child("+(i+1-x)+")").width()+2,x--;v=0}k+=a.options.elementTH.find("tr:first th:nth-child("+(i+1-x)+")").width()+2}}else k+=a.options.elementTH.find("tr:first th:nth-child("+(i+1)+")").width()+2;a.options.elementSortableColumnsPointer.css("display","block").offset({top:a.options.elementT.offset().top,left:k});h=!1;setTimeout(function(){h=!0},100)}},stop:function(c,h){a.options.elementSortableColumnsPointer.css("display",
"none");g=h.item.context.cellIndex;if(e!=g){var u=[],p=[],m=[],x=[],v=0,q=0,z=0,D=g;a.options.showCheckboxes&&(e--,g--,q++);a.options.showNumbers&&(e--,g--,q++);b.each(a.options.array_rows,function(a,c){p[a]=[];m[a]=!0});if(e<g){if(r)if(l)b.each(a.options.array_columns,function(c,b){c<=e&&(b.super_column&&e++,c&&(!b.super_column&&a.options.array_columns[c-1].super_column||b.super_column&&a.options.array_columns[c-1].super_column&&b.super_column!=a.options.array_columns[c-1].super_column)&&e--)}),
a.options.elementTH.find("tr:first th").each(function(a){a<=g+q&&1<b(this).prop("colspan")&&(z+=b(this).prop("colspan")-1)}),g+=z;else for(;a.options.array_columns[g+1]&&a.options.array_columns[g].super_column&&a.options.array_columns[g+1].super_column&&a.options.array_columns[g].super_column==a.options.array_columns[g+1].super_column;)g++;b.each(a.options.array_columns,function(c,h){c<e||c>e&&c<g||c>g?(u[v]=h,b.each(a.options.array_rows,function(a,b){"undefined"!==typeof b.row_class||"undefined"!==
typeof b.row_color?(m[a]&&(m[a]=!1,p[a]={},"undefined"!==typeof b.row_class&&(p[a].row_class=b.row_class),"undefined"!==typeof b.row_color&&(p[a].row_color=b.row_color),p[a].data=[]),p[a].data[v]=b.data[c]):p[a][v]=b[c]}),x[v]="undefined"===typeof a.options.array_footer[c]?0:a.options.array_footer[c],v++):c==g&&(u[v]=a.options.array_columns[g],b.each(a.options.array_rows,function(a,c){"undefined"!==typeof c.row_class||"undefined"!==typeof c.row_color?(m[a]&&(m[a]=!1,p[a]={},"undefined"!==typeof c.row_class&&
(p[a].row_class=c.row_class),"undefined"!==typeof c.row_color&&(p[a].row_color=c.row_color),p[a].data=[]),p[a].data[v]=c.data[g]):p[a][v]=c[g]}),x[v]="undefined"===typeof a.options.array_footer[g]?0:a.options.array_footer[g],v++,u[v]=a.options.array_columns[e],b.each(a.options.array_rows,function(a,c){"undefined"!==typeof c.row_class||"undefined"!==typeof c.row_color?(m[a]&&(m[a]=!1,p[a]={},"undefined"!==typeof c.row_class&&(p[a].row_class=c.row_class),"undefined"!==typeof c.row_color&&(p[a].row_color=
c.row_color),p[a].data=[]),p[a].data[v]=c.data[e]):p[a][v]=c[e]}),x[v]="undefined"===typeof a.options.array_footer[e]?0:a.options.array_footer[e],v++)});a.options.sort_field==e?a.options.sort_field=g:e<a.options.sort_field&&a.options.sort_field<=g&&a.options.sort_field--}else if(e>g){if(r)if(l)b.each(a.options.array_columns,function(c,b){c<=e&&(b.super_column&&e++,c&&(!b.super_column&&a.options.array_columns[c-1].super_column||b.super_column&&a.options.array_columns[c-1].super_column&&b.super_column!=
a.options.array_columns[c-1].super_column)&&e--)}),a.options.elementTH.find("tr:first th").each(function(a){a<g+q&&1<b(this).prop("colspan")&&(z+=b(this).prop("colspan")-1)}),g+=z;else if(g)for(;a.options.array_columns[g-1].super_column&&a.options.array_columns[g].super_column&&a.options.array_columns[g-1].super_column==a.options.array_columns[g].super_column;)g++;e!=g&&(b.each(a.options.array_columns,function(c,h){c<g||c>g&&c<e||c>e?(u[v]=h,b.each(a.options.array_rows,function(a,b){"undefined"!==
typeof b.row_class||"undefined"!==typeof b.row_color?(m[a]&&(m[a]=!1,p[a]={},"undefined"!==typeof b.row_class&&(p[a].row_class=b.row_class),"undefined"!==typeof b.row_color&&(p[a].row_color=b.row_color),p[a].data=[]),p[a].data[v]=b.data[c]):p[a][v]=b[c]}),x[v]="undefined"===typeof a.options.array_footer[c]?0:a.options.array_footer[c],v++):c==g&&(u[v]=a.options.array_columns[e],b.each(a.options.array_rows,function(a,c){"undefined"!==typeof c.row_class||"undefined"!==typeof c.row_color?(m[a]&&(m[a]=
!1,p[a]={},"undefined"!==typeof c.row_class&&(p[a].row_class=c.row_class),"undefined"!==typeof c.row_color&&(p[a].row_color=c.row_color),p[a].data=[]),p[a].data[v]=c.data[e]):p[a][v]=c[e]}),x[v]="undefined"===typeof a.options.array_footer[e]?0:a.options.array_footer[e],v++,u[v]=a.options.array_columns[g],b.each(a.options.array_rows,function(a,c){"undefined"!==typeof c.row_class||"undefined"!==typeof c.row_color?(m[a]&&(m[a]=!1,p[a]={},"undefined"!==typeof c.row_class&&(p[a].row_class=c.row_class),
"undefined"!==typeof c.row_color&&(p[a].row_color=c.row_color),p[a].data=[]),p[a].data[v]=c.data[g]):p[a][v]=c[g]}),x[v]="undefined"===typeof a.options.array_footer[g]?0:a.options.array_footer[g],v++)}),a.options.sort_field==e?a.options.sort_field=g:g<=a.options.sort_field&&a.options.sort_field<e&&a.options.sort_field++)}e!=g&&(a.options.array_columns=u,a.options.array_rows=p,a.options.array_footer={},b.each(x,function(c,b){0!=b&&(a.options.array_footer[c]=b)}))}a.update_head(a.options.array_columns);
if(a.options.showCheckboxes){var B=[],C=!1;a.options.elementTB.find("tr").find("td.td_for_checkbox input").each(function(a){B[a]=b(this).is(":checked");B[a]&&(C=!0)})}a.update_rows(a.options.array_rows);a.options.showCheckboxes&&(a.options.elementTB.find("tr").find("td.td_for_checkbox input").each(function(a){B[a]&&b(this).attr("checked","checked")}),C&&a.options.elementTH.find("th.th_for_checkbox input").attr("checked","checked"));a.options.groups.length&&a.show_groups(a.options.groups);a.update_foot(a.options.array_footer);
if(e!=g){var A=g;a.options.showCheckboxes&&A++;a.options.showNumbers&&A++;r?(a.options.elementTH.find("tr:first th:nth-child("+(D+1)+")").css("background","#999999").animate({backgroundColor:"transparent"},300),a.options.elementTH.find("tr:last th:nth-child("+(A+1)+")").css("background","#999999").animate({backgroundColor:"transparent"},300)):a.options.elementTH.find("tr th:nth-child("+(A+1)+")").css("background","#999999").animate({backgroundColor:"transparent"},300);a.options.elementTB.find("tr td:nth-child("+
(A+1)+")").css("background","#999999").animate({backgroundColor:"transparent"},300);a.options.elementTF.find("tr td:nth-child("+(A+1)+")").css("background","#999999").animate({backgroundColor:"transparent"},300);ajaxRequest({data:"action=DropColumn&map="+a.options.idEl+"&data[source]="+e+"&data[target]="+g,_this:b(this)})}}})},draggable_selected_rows:function(){var a=this;a.options.elementMainTable.draggable({distance:10,disabled:!0,helper:function(c,b){return'<div class="draggable-selected-rows" lang="'+
a.options.action_counter+'">\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c '+a.options.action_counter+" "+GetSuffix(a.options.action_counter,"\u0442\u043e\u0432\u0430\u0440","\u0442\u043e\u0432\u0430\u0440\u0430","\u0442\u043e\u0432\u0430\u0440\u043e\u0432")+" \u0432 \u0433\u0440\u0443\u043f\u043f\u0443...</div>"},drag:function(c,e){e.position.left=c.clientX+b(document).scrollLeft()-a.options.element.offset().left;e.position.top=c.clientY+b(document).scrollTop()-a.options.element.offset().top}})},
draggable_row:function(){var a=this;a.options.elementMainTable.find("table tbody tr").draggable({distance:10,helper:function(c,e){a.triggerCheckbox(b(this));return'<div class="draggable-selected-rows" lang="1">\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c 1 \u0442\u043e\u0432\u0430\u0440 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443...</div>'},drag:function(c,e){e.position.left=c.clientX+b(document).scrollLeft()-a.options.element.offset().left;e.position.top=c.clientY+b(document).scrollTop()-
a.options.element.offset().top}})},enable_draggable_selected_rows:function(){this.options.inPopup||this.options.elementMainTable.draggable("enable")},disable_draggable_selected_rows:function(){this.options.inPopup||(this.options.elementMainTable.draggable("disable"),this.options.elementMainTable.css("opacity",1))},enable_draggable_row:function(){this.options.inPopup||this.options.elementMainTable.find("table tbody tr.row.ui-draggable").draggable("enable")},disable_draggable_row:function(){this.options.inPopup||
(this.options.elementMainTable.find("table tbody tr.row.ui-draggable").draggable("disable"),this.options.elementMainTable.find("table tbody tr.row.ui-draggable").css("opacity",1))},update_grid:function(){ajaxRequest({data:"action=UpdateGrid&map="+this.options.idEl,_this:this.element})}})})(jQuery,window,document);
(function(b,g,h){b.widget("sui.ui_gridfilter",{options:{idEl:"",element:[],elementLoading:[],elementInner:[],elementButtonPanel:[],elementButtonPanelLeft:[],elementButtonPanelMiddle:[],elementButtonPanelRight:[],elementFiltersContent:[],elementShowButton:[],elementClearButton:[],elementSaveButton:[],elementFilterValues:[],elementFilterTemplates:[],elementFilterTemplatesLeft:[],filters_ready:!1,grid_id:"",loading_indication:!1,filter_templates:{}},_create:function(a){a=this.element;var c=a.data(),
e="";this.options.idEl=a.attr("id");this.options.data=c;a.append(e+"<div class='gridfilter-loading'><div class='loading-coub'><div><div></div><div></div><div></div><div></div></div></div></div><div class='gridfilter-inner hide js-hor-fixed'><div class='gridfilter-filters-content hide'></div><div class='gridfilter-button-panel'><div class='gridfilter-button-panel-left'><span class='gridfilter-show-button hide'><span class='filter-button'>\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class='gridfilter-clear-button hide'><span class='filter-button'>\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c</span></span><span class='gridfilter-save-button hide'><span class='filter-button'>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d</span></span></div><div class='gridfilter-button-panel-middle'><span class='gridfilter-filter-values hide'></span></div><div class='gridfilter-button-panel-right'></div></div><div class='gridfilter-filter-templates hide'><div class='gridfilter-filter-templates-caption'>\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432: </div><div class='gridfilter-filter-templates-left'></div></div></div>");
this.options.element=b("#"+this.options.idEl);this.options.elementLoading=b(".gridfilter-loading",a);this.options.elementInner=b(".gridfilter-inner",a);this.options.elementButtonPanel=b(".gridfilter-button-panel",a);this.options.elementButtonPanelLeft=b(".gridfilter-button-panel-left",a);this.options.elementButtonPanelMiddle=b(".gridfilter-button-panel-middle",a);this.options.elementButtonPanelRight=b(".gridfilter-button-panel-right",a);this.options.elementFiltersContent=b(".gridfilter-filters-content",
a);this.options.elementShowButton=b(".gridfilter-show-button",a);this.options.elementClearButton=b(".gridfilter-clear-button",a);this.options.elementSaveButton=b(".gridfilter-save-button",a);this.options.elementFilterValues=b(".gridfilter-filter-values",a);this.options.elementFilterTemplates=b(".gridfilter-filter-templates",a);this.options.elementFilterTemplatesLeft=b(".gridfilter-filter-templates-left",a);this.update_filter_templates(this.options.filter_templates);this.calculate_button_panel();this.events();
this.options.grid_id=this.options.element.closest(".Grid").attr("id");ajaxRequest({data:"action=create&map="+this.options.idEl,_this:a})},destroy:function(){b.Widget.prototype.destroy.call(this)},filter_values_empty:function(){this.options.elementFilterValues.empty();this.options.elementFilterValues.removeClass("show").addClass("hide")},filter_values_fill:function(){var a=[],c=0;this.options.elementFiltersContent.find(".filter-item > .ui-input").each(function(e){if(b(this).hasClass("ui-period-date")||
b(this).hasClass("ui-period-number")){var g=e="";b(this).hasClass("ui-period-date")?(e=b(this).find(".period-input.Start input").val(),g=b(this).find(".period-input.End input").val()):b(this).hasClass("ui-period-number")&&(e=b(this).find(".number-period-input.Start input").val(),g=b(this).find(".number-period-input.End input").val());if(e.length||g.length)a[c]=b(this).find("> .caption > label > .caption-text").text()+" =",a[c]+='<span class="filter-value">',e.length&&(a[c]+=" c "+e),g.length&&(a[c]+=
" \u043f\u043e "+g),a[c]+="</span>",c++}else if(b(this).hasClass("ui-multiselect")){var h="";b(this).find(".multipleselect-box > a").each(function(a){h.length&&(h+=", ");h+=b(this).text().trim()});h.length&&(a[c]=b(this).find("> .caption > label > .caption-text").text()+" =",a[c]+='<span class="filter-value">',a[c]+=" "+h,a[c]+="</span>",c++)}else b(this).hasClass("input-text-filter")&&(e=b(this).find("input").val(),e.length&&(a[c]=b(this).find("> .caption > label > .caption-text").text()+" =",a[c]+=
'<span class="filter-value">',a[c]+=" "+e,a[c]+="</span>",c++))});var e="";b.each(a,function(a,c){e+='<span class="filter-value-item">'+c+"</span>"});this.options.elementFilterValues.empty().append(e);this.options.elementFilterValues.removeClass("hide").addClass("show")},calculate_cells:function(){var a=0,c=0,e=[],g,h,r,l;e[a]=[];g=this.options.elementFiltersContent.find(".filter-item:first").offset().top;this.options.elementFiltersContent.find(".filter-item").each(function(h){b(this).offset().top!=
g&&(c=0,e[++a]=[],g=b(this).offset().top);e[a][c++]=b(this).find(" > div.ui-input").height()});h=e.length;for(a=0;a<h;a++){r=e[a].length;for(c=l=0;c<r;c++)e[a][c]>l&&(l=e[a][c]);for(c=0;c<r;c++)e[a][c]=l}idx=1;for(a=0;a<h;a++)for(r=e[a].length,c=0;c<r;c++)this.options.elementFiltersContent.find(".filter-item:nth-child("+idx+")").height(e[a][c]).css("border-top",0<a?"none":"1px solid #e4e4e4").css("border-bottom",a==h-1?"none":"1px solid #e4e4e4").css("border-right",c==r-1?"none":"1px solid #e4e4e4"),
idx++},calculate_button_panel:function(){var a=this.options.elementSaveButton.hasClass("show")?330:200,c=this.options.elementButtonPanel.width();this.options.elementButtonPanelLeft.width(a);this.options.elementButtonPanelRight.width(120);this.options.elementButtonPanelMiddle.width(c-a-120)},grid_loading_indication:function(){b("#"+this.options.grid_id).ui_grid("option","loadingIndication")&&b("#"+this.options.grid_id).ui_grid("hideBody")},grid_loading_indication_transform_data:function(a){b("#"+this.options.grid_id).ui_grid("option",
"loadingIndication")&&(b("#"+this.options.grid_id).ui_grid("hideBody"),a+="&grid_indication=1");return a},events:function(){var a=this;if(a.options.elementShowButton.length)a.options.elementShowButton.on("click",function(c){a.options.filters_ready&&(b(this).hasClass("hide")?(a.filter_values_empty(),a.options.elementFiltersContent.removeClass("hide").addClass("show"),b(this).removeClass("hide").addClass("show"),b(this).find("span:first").text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"),
a.calculate_cells()):b(this).hasClass("show")&&(a.filter_values_fill(),a.options.elementFiltersContent.removeClass("show").addClass("hide"),b(this).removeClass("show").addClass("hide"),b(this).find("span:first").text("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440")),horFixed())});if(a.options.elementClearButton.length)a.options.elementClearButton.on("click",function(c){c="action=clear&map="+a.options.idEl;c=a.grid_loading_indication_transform_data(c);ajaxRequest({data:c,
_this:a.element})});if(a.options.elementSaveButton.length)a.options.elementSaveButton.on("click",function(c){ajaxRequest({data:"action=saveTemplate&map="+a.options.idEl,_this:a.element})});if(a.options.elementFilterTemplatesLeft.length)a.options.elementFilterTemplatesLeft.on("click","div.filter-template-item span.filter-button",function(c){c=b(this).closest("div").index();c="action=setTemplate&map="+a.options.idEl+"&data[idx]="+c;c=a.grid_loading_indication_transform_data(c);ajaxRequest({data:c,_this:a.element})});
if(a.options.elementFilterTemplatesLeft.length)a.options.elementFilterTemplatesLeft.on("click","div.filter-template-item span.delete-template-button",function(c){c=b(this).closest("div").index();ajaxRequest({data:"action=deleteTemplate&map="+a.options.idEl+"&data[idx]="+c,_this:a.element})});if(a.options.elementFiltersContent.length)a.options.elementFiltersContent.on("change",".ui-multiselect",function(c){a.grid_loading_indication();a.calculate_cells()});if(a.options.elementFiltersContent.length)a.options.elementFiltersContent.on("change",
".ui-period-date, .ui-period-number, .ui-checkbox, .input-text-filter",function(c){a.grid_loading_indication()});b(g).on("resize",function(){a.calculate_cells();a.calculate_button_panel()})},filters_ready:function(a){var c="";this.options.elementLoading.addClass("hide");this.options.elementInner.removeClass("hide");b.each(a,function(a,b){c+='<div class="filter-item">'+b+"</div>"});this.options.elementFiltersContent.append(c);this.options.filters_ready=!0;b(g).resize()},update_caption:function(a){a?
(this.options.elementShowButton.hasClass("hide")&&this.filter_values_fill(),this.options.elementClearButton.removeClass("hide").addClass("show"),this.options.elementSaveButton.removeClass("hide").addClass("show")):(this.options.elementShowButton.hasClass("hide")&&this.filter_values_empty(),this.options.elementClearButton.removeClass("show").addClass("hide"),this.options.elementSaveButton.removeClass("show").addClass("hide"));this.calculate_button_panel()},update_filter_values:function(){this.options.elementShowButton.hasClass("hide")&&
this.filter_values_fill()},update_filter_templates:function(a){var c="";this.options.filter_templates=a;this.options.filter_templates.length?(b.each(this.options.filter_templates,function(a,b){c+='<div class="filter-template-item"><span class="filter-button">'+b+'</span><span class="delete-template-button">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>'}),this.options.elementFilterTemplatesLeft.empty().append(c),this.options.elementFilterTemplates.removeClass("hide").addClass("show")):(this.options.elementFilterTemplatesLeft.empty(),
this.options.elementFilterTemplates.removeClass("show").addClass("hide"))},set_template:function(a){this.options.elementFilterTemplatesLeft.find("div.filter-template-item span.filter-button").each(function(a){b(this).removeClass("active")});this.options.elementFilterTemplatesLeft.find("div.filter-template-item:nth-child("+(parseInt(a)+1)+") span.filter-button").addClass("active");this.options.elementClearButton.removeClass("hide").addClass("show");this.options.elementSaveButton.removeClass("show").addClass("hide");
this.calculate_button_panel()},unset_template:function(a){this.options.elementFilterTemplatesLeft.find("div.filter-template-item span.filter-button").each(function(a){b(this).removeClass("active")});this.calculate_button_panel()}})})(jQuery,window,document);
(function(b,g,h){b.widget("sui.ui_gridpointfilter",{options:{idEl:"",element:[],grid_id:""},_create:function(a){a=this.element;var c=a.data();this.options.idEl=a.attr("id");this.options.data=c;this.options.element=b("#"+this.options.idEl);this.events()},destroy:function(){b.Widget.prototype.destroy.call(this)},grid_loading_indication:function(){b("#"+this.options.grid_id).ui_grid("option","loadingIndication")&&b("#"+this.options.grid_id).ui_grid("hideBody")},events:function(){var a=this;if(a.options.element.length)a.options.element.on("click",
".onclick.Point, .onclick.PointGroup, .onclick.PointAll",function(c){a.grid_loading_indication()})}})})(jQuery,window,document);
(function(b,g,h){b.widget("sui.ui_tree",{options:{idEl:"",element:[],elementItems:[],elementItem:[],data:{},action_counter:0},_create:function(a){a=this.element;var c=a.data();this.options.idEl=a.attr("id");this.options.data=c;this.options.element=b("#"+this.options.idEl);this.options.elementItems=b(".table.ui-sortable",a);this.options.elementItem=b(".table.ui-sortable .tree-row",a);this.sortable();this.droppable();this.events()},destroy:function(){b.Widget.prototype.destroy.call(this)},events:function(){},
sortable:function(){var a=this,c=0,e=0;a.options.elementItems.sortable({axis:"y",items:"div:not(.root):not(.new-item):not(div:has(div.new-item))",distance:10,start:function(a,e){c=b(e.item).prev().find("span.tree-item").attr("data-id");if(b(e.item).find("button.down").length){b(e.helper).find("button.down").removeClass("down").addClass("right");for(var g=parseInt(b(e.item).css("padding-left")),h=b(e.item).next().next();parseInt(h.css("padding-left"))>g;)h.hide(),h=h.next()}},stop:function(g,h){PrevId=
b(h.item).prev().find("span.tree-item").attr("data-id");e=b(h.item).find("span.tree-item").attr("data-id");c==PrevId?ajaxRequest({data:"action=CancelDropTreeItem&map="+a.options.idEl+"&data[Id]="+e,_this:b(this)}):ajaxRequest({data:"action=DropTreeItem&map="+a.options.idEl+"&data[PrevId]="+PrevId+"&data[Id]="+e,_this:b(this)});a.destroy()}})},droppable:function(){var a=this,c=!1;a.options.elementItem.droppable({hoverClass:"drop-hover-class",tolerance:"pointer",over:function(b,g){if(g.helper.hasClass("draggable-selected-rows")){c=
!0;a.options.action_counter=g.helper.attr("lang");var h=a.options.elementItems.find(".tree-row.drop-hover-class").text();-1!=h.indexOf("\u0412\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0438 \u0443\u0441\u043b\u0443\u0433\u0438")?h="\u0412\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0438 \u0443\u0441\u043b\u0443\u0433\u0438":-1!=h.indexOf("\u0412\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b")&&(h="\u0412\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b");a.options.elementItems.find(".tree-row.drop-hover-class").addClass("drop-hover");
g.helper.html("\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c "+a.options.action_counter+" "+GetSuffix(a.options.action_counter,"\u0442\u043e\u0432\u0430\u0440","\u0442\u043e\u0432\u0430\u0440\u0430","\u0442\u043e\u0432\u0430\u0440\u043e\u0432")+" \u0432 \u0433\u0440\u0443\u043f\u043f\u0443 <b>"+h)}},out:function(b,g){g.helper.hasClass("draggable-selected-rows")&&(c=!1,a.options.elementItems.find(".tree-row.drop-hover").removeClass("drop-hover"),g.helper.html("\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c "+
a.options.action_counter+" "+GetSuffix(a.options.action_counter,"\u0442\u043e\u0432\u0430\u0440","\u0442\u043e\u0432\u0430\u0440\u0430","\u0442\u043e\u0432\u0430\u0440\u043e\u0432")+" \u0432 \u0433\u0440\u0443\u043f\u043f\u0443..."))},drop:function(e,g){if(g.helper.hasClass("draggable-selected-rows")&&c){var h=a.options.elementItems.find(".tree-row.drop-hover").find("span.tree-item").attr("data-id");a.options.elementItems.find(".tree-row.drop-hover").removeClass("drop-hover");ajaxRequest({data:"action=DropSelectedRowsOnTreeItem&map="+
a.options.idEl+"&data[Id]="+h,_this:b(this)})}}})}})})(jQuery,window,document);
(function(b,g,h){b.widget("sui.ui_button_menu",{options:{idEl:"",elementBtn:[],elementItemsList:[],elementItem:[],elementBtnTrigon:[],arraySeparator:null,caption:null,state:!1,disabled:!1,menuItems:{},closeEvents:""},_create:function(a){a=this.element;var c=a.data();this.options.idEl=a.attr("id");this.options.data=c;a.html("<div><div class='button_menu-caption'>"+this.options.caption+"<div class='button_menu-switcher'><div></div></div></div><div class='button_menu-Items'>"+this.getItems(this.options.menuItems)+
"</div></div>");this.options.elementBtn=b(".button_menu-caption",a);this.options.elementItemsList=b(".button_menu-Items",a);this.options.elementItem=b(".button_menu-item",a);this.options.elementBtnTrigon=b(".button_menu-switcher",a);this.options.closeEvents="click.button_menu_"+this.options.idEl+" focusin.button_menu_"+this.options.idEl;this.options.disabled||this.events()},events:function(){var a=this;a.options.elementBtn.on("click",function(){a.toggle()});a.options.elementItem.on("click",function(){var c=
b(this).data("id").replace(a.options.arraySeparator,"");ajaxRequest({data:"action=click&map="+a.options.idEl+"&data[val]="+c});a.toggle()})},getItems:function(a,c,e){var g=this,h="";e="undefined"!=typeof e?e:1;"undefined"!=typeof c&&(h+="\n<div class='button_menu-item-group d"+e+"'>\n<table class='button_menu-item-group-name'><tr><td class='button_menu-item-group-name-line'><div></div></td><td class='button_menu-item-group-name-text'>"+c.replace(g.options.arraySeparator,"")+"</td></tr></table>");
b.each(a,function(a,c){h+="object"==typeof c?g.getItems(c,a,e++):"\n<div class='button_menu-item' data-id='"+a+"'>"+c+"</div>"});"undefined"!=typeof c&&(h+="\n</div>");return h},toggle:function(){this.options.state?this.close():this.open()},open:function(){var a=this;if(a.options.disabled)return!1;if(!a.options.state)return a.options.state=!0,b("body").on(a.options.closeEvents,"*",function(c){b(this).closest("#"+a.options.idEl).length||a.close();return!1}),a.options.elementItemsList.css("display",
"block"),a.options.elementBtnTrigon.addClass("open"),!0},close:function(){this.options.state&&(b("body").off(this.options.closeEvents,"*"),this.options.elementItemsList.css("display","none"),this.options.state=!1,this.options.elementBtnTrigon.removeClass("open"))},destroy:function(){b.Widget.prototype.destroy.call(this)}})})(jQuery,window,document);
(function(b,g,h){b.widget("sui.ui_drop_down",{options:{state:!1,disabled:!1},_create:function(a){var c=this;b(c.element).on("click"," > div.label",function(a){a=b(this).parent(".ui_dropdown");var g=b(this),h=a.find(" > .dropdown");c.options.state?(h.hide(),g.removeClass("open")):(h.show(),g.addClass("open"));if(!c.options.state)b(document).on("click",function(a){if(0<b(a.target).closest(c.element).length&&!/^A$/i.test(a.target.tagName))return!1;h.hide();g.removeClass("open");c.options.state=!1;b(this).unbind(a)});
c.options.state=c.options.state?!1:!0})}})})(jQuery,window,document);
(function(b,g,h){b.widget("sui.multipleselect",{options:{idEl:"",blank_enable:!1,blank_str:"&ndash;",blank_data:"null",new_value_enable:!1,state:!1,find:!1,delay:300,speed:100,size_stop:110,hor_fixed:!1,source:!1,data:{},itemsObj:{},hover_itemsObj:{},hover_item:[],hover_select:[],idId:"",idText:"",idHtml:"",idList:"",elementId:"",elementText:"",elementHtml:"",elementList:"",elementListContainer:"",elementBox:"",elementItems:"",elementInput:"",request:"",notFound:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"},
key_event:{8:"key_delete",9:"close",37:"key_left",39:"key_right",38:"key_up",40:"key_down",13:"key_enter",46:"key_delete",27:"close",16:"stop",17:"stop",18:"stop",19:"stop",20:"stop"},_create:function(a){var c=this,e=this.element,g=b("option:selected",e);c.options.data=e.data();c.options.idEl=e.attr("id");c.options.idId=e.attr("id")+"-id-multipleselect";c.options.idText=e.attr("id")+"-text-multipleselect";c.options.idHtml=e.attr("id")+"-multipleselect";c.options.idList=e.attr("id")+"-list-multipleselect";
c.options.elementInput=b(c.options.elementBox).parent(".ui-input");b("option",this.element).each(function(){var a=b(this).val();if(c.options.blank_enable||a!=c.options.blank_data)c.options.itemsObj[a]=b(this).html(),b(this).is(":selected")&&c.set_hover_itemsObj(a,b(this).html())});e.hide().after('<div class="multipleselect-box"><input type="text" id="'+c.options.idId+'" name="'+e.attr("name")+'" class="hidden" /><input type="text" id="'+c.options.idText+'" name="'+e.attr("name")+'" class="hidden" /><input type="text" id="'+
c.options.idHtml+'" name="'+e.attr("name")+'" class="plus_add atomic" placeholder="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c" /><div id="'+c.options.idList+'" class="multipleselect-list" style="display:none;"><div class="multipleselect-list-container"></div></div></div>');c.options.elementId=b("#"+c.options.idId);c.options.elementText=b("#"+c.options.idText);c.options.elementHtml=b("#"+c.options.idHtml);c.options.elementList=b("#"+c.options.idList);c.options.elementListContainer=b("#"+c.options.idList+
">.multipleselect-list-container");c.options.elementBox=c.options.elementHtml.parent();c.options.elementItems=c.options.elementBox.find("div[data-id]");c.options.elementId.val(b("option:selected",e).val());c.options.elementText.val(b("option:selected",e).html());c.update_selected_item();c.update_width();!c.options.elementHtml.data("multipleselect")&&e.length&&(b.extend(c.options,c.defaults,a||{}),c.options.elementHtml.data("multipleselect",c.options));g.length&&g.each(function(){b(this).val();b(this).html()});
c.element.attr("disabled")?(c.options.elementHtml.attr("disabled","disabled"),c.options.elementBox.addClass("multipleselect-disabled")):c.events()},events:function(){var a=this;a.options.elementBox.on("keydown",function(c){if(f=a.key_event[c.which]){var e=a[f]();"continue"!=e&&(c.preventDefault(),c.stopPropagation());"stop"!=e&&(a.options.state||a.open())}else c=b.proxy(a,"open"),setTimeout(c,300)}).on("change","#"+a.options.idHtml,function(a){a.stopImmediatePropagation()}).on("focusout","#"+a.options.idHtml,
function(c){c.stopImmediatePropagation();0==a.options.find&&a.clear_element_html()}).on("focus","#"+a.options.idHtml,function(){a.open()}).on("mouseup.multipleselectclick","div[data-id]",function(){a.options.hover_item=b(this);a.select(b(this));a.close()}).on("mouseenter mouseleave","div[data-id]",function(){a.mouse_hover_item(b(this))}).on("mouseenter mouseleave","a[data-id]",function(){a.mouse_hover_selected_item()}).on("click","a[data-id]",function(c){a.unselect(b(this));a.close();c.preventDefault()}).parent().on("click",
"*",function(c){c.stopImmediatePropagation();!b(this).hasClass("multipleselect-box")&&"INPUT"!=this.tagName||"INPUT"==this.tagName||(a.options.elementHtml.focus(),c.preventDefault())})},create_items:function(){var a=this;a.options.blank_enable&&(a.options.itemsObj[a.options.blank_data]=a.options.blank_str);b.each(a.options.itemsObj,function(c,b){str='<div class="multipleselect-el" data-id="'+c+'" style="background:'+(b.color.length?b.color:"#edb74a")+"; color:"+(b.color.length?b.color:"#333")+'"><span><span data-html="">'+
b.text+"</span></span>"+rightButtonList+"</div>";a.options.listFull[c]=str});return a},filter_items:function(a,c){return this.options.source&&this.options.request.length?this.filter_items_source(a,c):this.filter_items_local(a,c)},filter_items_source:function(a,c){var b=this,g={request:b.options.request,search:b.options.elementHtml.val(),map:b.options.idEl};0<b.options.elementHtml.val().length?connect_API("multiselect_filter_items",g,function(g){g.minSymbol&&(b.options.minSymbol=g.minSymbol,delete g.minSymbol);
b.options.itemsObj=g;b.filter_items_local(a,c)}):(b.options.minSymbol=!1,b.options.itemsObj=[],b.filter_items_local(a,c))},filter_items_local:function(a,c){var e=this,g=!0,h=[],r="",l="",n="",w="",y=!1,p=!1,m=!1,x=RegExp.escape(e.options.elementHtml.val()),v=new RegExp(x,"i"),q=new RegExp("^"+x+"$","i");b.each(e.options.itemsObj,function(a,c){!e.options.blank_enable&&a==e.options.blank_data||0!=e.get_hover_itemsObj(a)||(m=!1,n=a,w=c,q.test(w)?(m=!0,y=n,p=w):v.test(w)&&(m=!0),r='<div class="multipleselect-el" data-id="'+
n+'">'+w+"</div>",m&&(h[h.length]=r))});1==h.length&&y?(1!=a&&(e.select(p,y),e.close()),g=100):0==h.length?(g=!1,l='<div class="multipleselect-el multipleselect-comment">'+e.options.notFound+"</div>"):l=h.join("");1!=a&&(e.options.elementListContainer.find(".multipleselect-comment, .multipleselect-el").remove(),e.options.elementListContainer.prepend(l),e.options.elementItems=e.options.elementListContainer.find("div[data-id]"));return g},open:function(){var a=this;a.filter_items();if(this.options.source&&
!a.options.elementHtml.val().length||a.options.state)return!1;a.set_position_list();a.options.elementList.slideDown(a.options.speed);a.options.state=!0;b("body").on("click.multipleselect_"+a.options.idText+" focus.multipleselect_"+a.options.idText,"*",function(c){c.stopImmediatePropagation();b(this).attr("id")==a.options.idHtml||b(this).hasClass("multipleselect-button")||b(this).hasClass("multipleselect-box")||b(this).hasClass("multipleselect-el")||a.close()});a.options.elementHtml.next().children().addClass("multipleselect-open");
a.options.hover_item.length||a.key_down()},set_position_list:function(){},update_width:function(){},close:function(){if(this.options.state)return this.options.elementList.slideUp(this.options.speed),this.options.state=!1,b("body").off("click.multipleselect_"+this.options.idText+" focus.multipleselect_"+this.options.idText,"*"),this.options.elementHtml.next().children().removeClass("multipleselect-open"),"stop"},select:function(a,c){c?this.set_hover_itemsObj(c,a):this.set_hover_itemsObj(a.data("id"),
a.html());this.update_selected_item();this.filter_items();this.clear_active_item();this.change()},update_selected_item:function(){var a=this;b(this.options.elementBox.parent()).css("width","");a.options.elementBox.find(".multipleselect-change").remove();a.options.hover_itemsObj&&b.each(a.options.hover_itemsObj,function(c,b){c=a.pref(c);var g=a.options.elementBox.find(".multipleselect-change"),h="<a title=\"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u0434\u0430\u043b\u0438\u0442\u044c\" href='#' data-id='"+
c+"' class='multipleselect-change'>"+b+" <span></span></a>";g.length?g.last().after(h):a.options.elementBox.prepend(h)});a.update_width()},clear_element_html:function(){this.options.elementHtml.val("")},clear_active_item:function(){if(!this.options.hover_item.length)return[];var a=this.options.hover_item;this.options.elementItems.removeClass("multipleselect-hover-item");this.options.hover_item=[];return a},clear_selected_item:function(){if(!this.options.hover_select.length)return[];var a=this.options.hover_select;
this.options.elementBox.children("a").removeClass("multipleselect-hover-select");this.options.hover_select=[];return a},unselect:function(a){this.clear_selected_item();delete this.options.hover_itemsObj[this.pref(a.data("id"),1)];a.remove();this.change()},change:function(){var a=this,c={};html_=idStr="";b.each(a.options.hover_itemsObj,function(c,b){idStr+=a.pref(c)+"^";html_+=b+"^"});idStr=idStr.slice(0,-1);html_=html_.slice(0,-1);c=a.options.data;"object"==typeof c.data?c.data.html=html_:c.data=
{html:html_};c.data.val=(idStr+"").replace(/select_quot/g,'"');a.options.elementId.data(c);a.options.elementId.change();a.clear_element_html();a.options.hor_fixed&&horFixed()},key_delete:function(){return 0==this.options.elementHtml[0].selectionStart&&this.options.hover_select.length?(this.unselect(this.options.hover_select),"stop"):"continue"},key_enter:function(){var a=this.options.elementItems.filter(".multipleselect-hover-item");"stop"!=this.key_delete()&&a.length&&this.options.state&&(this.select(a),
this.close());return"stop"},key_up:function(){var a=this.clear_active_item(),a=a.length?this.options.elementItems.not(":first").filter("div[data-id="+a.data("id")+"]"):[];this.options.hover_item=a.length?a.prev("div[data-id]").addClass("multipleselect-hover-item"):this.options.elementItems.last("div[data-id]").addClass("multipleselect-hover-item")},key_down:function(){var a=this.clear_active_item(),a=a.length?this.options.elementItems.not(":last").filter("div[data-id="+a.data("id")+"]"):[];this.options.hover_item=
a.length?a.next("div[data-id]").addClass("multipleselect-hover-item"):this.options.elementItems.first("div[data-id]").addClass("multipleselect-hover-item")},key_left:function(){if(0==this.options.elementHtml[0].selectionStart){var a=this.options.elementBox.find("a").filter(".multipleselect-hover-select"),c=this.options.elementBox.children("a");this.clear_selected_item();this.options.hover_select=a.length?a.prev().focus().addClass("multipleselect-hover-select"):c.last().focus().addClass("multipleselect-hover-select");
return"stop"}return"continue"},key_right:function(){if(0==this.options.elementHtml[0].selectionStart){var a=this.options.elementBox.find("a").filter(".multipleselect-hover-select"),c=this.options.elementBox.children("a");this.clear_selected_item();this.options.hover_select=a.length?a.next().focus().addClass("multipleselect-hover-select"):c.first().focus().addClass("multipleselect-hover-select");return"stop"}return"continue"},mouse_hover_item:function(a){this.options.elementItems.removeClass("multipleselect-hover-item");
this.options.hover_item=a.addClass("multipleselect-hover-item")},mouse_hover_selected_item:function(){this.clear_selected_item()},stop:function(){return"stop"},pref:function(a,c){return c?"_"+a:(a+"").replace(/_/,"")},get_hover_itemsObj:function(a){return"undefined"==typeof this.options.hover_itemsObj[this.pref(a,1)]?!1:this.options.hover_itemsObj[this.pref(a,1)]},set_hover_itemsObj:function(a,c){this.options.hover_itemsObj[this.pref(a,1)]=c},_setOption:function(a,c){b.Widget.prototype._setOption.apply(this,
arguments)},destroy:function(){b.Widget.prototype.destroy.call(this)}})})(jQuery,window,document);function colorPiker(b){var g=$(b);colorizeInput(g,g.data("value"));g.after('<img class="colorPiker-img" src="images/colorpiker.png"/>').on("keydown",function(b){27==b.which&&$("#iColorPickerBg").click();b.stopImmediatePropagation();b.preventDefault();return!1});g.on("click",function(){iColorShow(g)});$(".colorPiker-img").on("click",function(){iColorShow(g)})}
function colorizeInput(b,g){var h="#"+g;b.css("color",getColorTextByBackground(h)).data("value",g+"");b.parent().css("background",h)}
function iColorShow(b){$("body").append('<div id="iColorPicker"><table class="pickerTable" id="pickerTable"><thead id="hexSection"><tr><td style="background:#ff0000" data-hx="ff0000"></td><td style="background:#ffff00" data-hx="ffff00"></td><td style="background:#00ff00" data-hx="00ff00"></td><td style="background:#00ffff" data-hx="00ffff"></td><td style="background:#0000ff" data-hx="0000ff"></td><td style="background:#ff00ff" data-hx="ff00ff"></td><td style="background:#ffffff" data-hx="ffffff"></td><td style="background:#ebebeb" data-hx="ebebeb"></td><td style="background:#e1e1e1" data-hx="e1e1e1"></td><td style="background:#d7d7d7" data-hx="d7d7d7"></td><td style="background:#cccccc" data-hx="cccccc"></td><td style="background:#c2c2c2" data-hx="c2c2c2"></td><td style="background:#b7b7b7" data-hx="b7b7b7"></td><td style="background:#acacac" data-hx="acacac"></td><td style="background:#a0a0a0" data-hx="a0a0a0"></td><td style="background:#959595" data-hx="959595"></td></tr><tr><td style="background:#ee1d24" data-hx="ee1d24"></td><td style="background:#fff100" data-hx="fff100"></td><td style="background:#00a650" data-hx="00a650"></td><td style="background:#00aeef" data-hx="00aeef"></td><td style="background:#2f3192" data-hx="2f3192"></td><td style="background:#ed008c" data-hx="ed008c"></td><td style="background:#898989" data-hx="898989"></td><td style="background:#7d7d7d" data-hx="7d7d7d"></td><td style="background:#707070" data-hx="707070"></td><td style="background:#626262" data-hx="626262"></td><td style="background:#555555" data-hx="555555"></td><td style="background:#464646" data-hx="464646"></td><td style="background:#363636" data-hx="363636"></td><td style="background:#262626" data-hx="262626"></td><td style="background:#111111" data-hx="111111"></td><td style="background:#000000" data-hx="000000"></td></tr><tr><td style="background:#f7977a" data-hx="f7977a"></td><td style="background:#fbad82" data-hx="fbad82"></td><td style="background:#fdc68c" data-hx="fdc68c"></td><td style="background:#fff799" data-hx="fff799"></td><td style="background:#c6df9c" data-hx="c6df9c"></td><td style="background:#a4d49d" data-hx="a4d49d"></td><td style="background:#81ca9d" data-hx="81ca9d"></td><td style="background:#7bcdc9" data-hx="7bcdc9"></td><td style="background:#6ccff7" data-hx="6ccff7"></td><td style="background:#7ca6d8" data-hx="7ca6d8"></td><td style="background:#8293ca" data-hx="8293ca"></td><td style="background:#8881be" data-hx="8881be"></td><td style="background:#a286bd" data-hx="a286bd"></td><td style="background:#bc8cbf" data-hx="bc8cbf"></td><td style="background:#f49bc1" data-hx="f49bc1"></td><td style="background:#f5999d" data-hx="f5999d"></td></tr><tr><td style="background:#f16c4d" data-hx="f16c4d"></td><td style="background:#f68e54" data-hx="f68e54"></td><td style="background:#fbaf5a" data-hx="fbaf5a"></td><td style="background:#fff467" data-hx="fff467"></td><td style="background:#acd372" data-hx="acd372"></td><td style="background:#7dc473" data-hx="7dc473"></td><td style="background:#39b778" data-hx="39b778"></td><td style="background:#16bcb4" data-hx="16bcb4"></td><td style="background:#00bff3" data-hx="00bff3"></td><td style="background:#438ccb" data-hx="438ccb"></td><td style="background:#5573b7" data-hx="5573b7"></td><td style="background:#5e5ca7" data-hx="5e5ca7"></td><td style="background:#855fa8" data-hx="855fa8"></td><td style="background:#a763a9" data-hx="a763a9"></td><td style="background:#ef6ea8" data-hx="ef6ea8"></td><td style="background:#f16d7e" data-hx="f16d7e"></td></tr><tr><td style="background:#ee1d24" data-hx="ee1d24"></td><td style="background:#f16522" data-hx="f16522"></td><td style="background:#f7941d" data-hx="f7941d"></td><td style="background:#fff100" data-hx="fff100"></td><td style="background:#8fc63d" data-hx="8fc63d"></td><td style="background:#37b44a" data-hx="37b44a"></td><td style="background:#00a650" data-hx="00a650"></td><td style="background:#00a99e" data-hx="00a99e"></td><td style="background:#00aeef" data-hx="00aeef"></td><td style="background:#0072bc" data-hx="0072bc"></td><td style="background:#0054a5" data-hx="0054a5"></td><td style="background:#2f3192" data-hx="2f3192"></td><td style="background:#652c91" data-hx="652c91"></td><td style="background:#91278f" data-hx="91278f"></td><td style="background:#ed008c" data-hx="ed008c"></td><td style="background:#ee105a" data-hx="ee105a"></td></tr><tr><td style="background:#9d0a0f" data-hx="9d0a0f"></td><td style="background:#a1410d" data-hx="a1410d"></td><td style="background:#a36209" data-hx="a36209"></td><td style="background:#aba000" data-hx="aba000"></td><td style="background:#588528" data-hx="588528"></td><td style="background:#197b30" data-hx="197b30"></td><td style="background:#007236" data-hx="007236"></td><td style="background:#00736a" data-hx="00736a"></td><td style="background:#0076a4" data-hx="0076a4"></td><td style="background:#004a80" data-hx="004a80"></td><td style="background:#003370" data-hx="003370"></td><td style="background:#1d1363" data-hx="1d1363"></td><td style="background:#450e61" data-hx="450e61"></td><td style="background:#62055f" data-hx="62055f"></td><td style="background:#9e005c" data-hx="9e005c"></td><td style="background:#9d0039" data-hx="9d0039"></td></tr><tr><td style="background:#790000" data-hx="790000"></td><td style="background:#7b3000" data-hx="7b3000"></td><td style="background:#7c4900" data-hx="7c4900"></td><td style="background:#827a00" data-hx="827a00"></td><td style="background:#3e6617" data-hx="3e6617"></td><td style="background:#045f20" data-hx="045f20"></td><td style="background:#005824" data-hx="005824"></td><td style="background:#005951" data-hx="005951"></td><td style="background:#005b7e" data-hx="005b7e"></td><td style="background:#003562" data-hx="003562"></td><td style="background:#002056" data-hx="002056"></td><td style="background:#0c004b" data-hx="0c004b"></td><td style="background:#30004a" data-hx="30004a"></td><td style="background:#4b0048" data-hx="4b0048"></td><td style="background:#7a0045" data-hx="7a0045"></td><td style="background:#7a0026" data-hx="7a0026"></td></tr></thead><tbody><tr><td style="" colspan="16" id="colorPreview"><span></span></td></tr></tbody></table></div><div id="iColorPickerBg"></div>');var g=
b.offset(),h="#"+b.data("value").replace("/#/",""),a=$("#iColorPicker"),c=$("#colorPreview"),e=$("#colorPreview span"),k=$("#iColorPickerBg");k.on("click",function(){$("#iColorPicker").remove();$("#iColorPickerBg").remove();a.fadeOut(200,function(){$(this).remove()})});a.css({top:g.top+b.outerHeight()+"px",left:g.left+"px"}).fadeIn(200);e.text(b.val());c.css("background",h);$("#color").val(h);$("#iColorPicker thead td").each(function(){var a=$(this),g=a.data("hx"),h="#"+g;a.unbind().mouseover(function(){c.css("background",
h);e.css("color",h)}).click(function(){colorizeInput(b,g);b.change();k.click()})})}var GlobalPartnerManager=[];
(function(b,g,h){var a,c=!1,e=!1,k=!1,u=function(){c=!0;a.connect()},r=function(){console.log("logingDEBUG");a.login(self.host_ip,self.client_id)},l=function(a){console.log("Connection to VoxImplant failed:"+a.message)},n=function(a){a.result?e=!0:debug&&console.log("Auth fail")};b.widget("sui.ui_phoneip",{options:{active:!1,idEl:"",elementInput:[],user_number:"",host_ip:"",client_id:"",phone_type:"",response:!1,client_type:"Class365"},_create:function(c){var b=this;"phoneip"!=g.location.pathname.replace(/\//g,
"")&&(b.response=!1,2==this.options.phone_type&&(a=VoxImplant.getInstance(),a.addEventListener(VoxImplant.Events.SDKReady,u),a.addEventListener(VoxImplant.Events.ConnectionEstablished,r),a.addEventListener(VoxImplant.Events.ConnectionFailed,l),a.addEventListener(VoxImplant.Events.AuthResult,n)),setTimeout(function(){b.connect()},700),b.events(),Notification.requestPermission(function(a){if("granted"!=a)return!1}))},emulate_call:function(a,c,b,e,g){var h=this,k=parseInt(1E4*Math.random()),u=896039122867+
g,n=parseInt((new Date).getTime()/1E3),l=n+parseInt(100*Math.random()),r=l-n;e||(r=0,l=n);setTimeout(function(){debug&&console.log("test incoming_call "+k);h.incoming_call(k,896039122867,u)},a);setTimeout(function(){debug&&console.log("test history_call "+k);h.response=e;h.history_call(k,896039122867,u,r,n,l,"","1")},c)},events:function(){var a=this;b(g).on("focus.pip",function(c){debug&&console.log("on_Focus");setTimeout(function(){a.connect()},500)});b("html").on("click.pip",".oncallbutton, .pipconnected .onpipcall:not(.enabled)",
function(c){c=b(this);c.hasClass("ui-input")&&c.hasClass("ui-select")&&c.hasClass("enabled")||(0<c.attr("phone")?c=c.attr("phone"):c.hasClass("oncallbutton")?c=b("#"+c.attr("field")).val():c.closest("#partner-Popup1").length?c=c.find(".disabled-content"):c.hasClass("ui-input")&&c.hasClass("ui-text")?c=c.find(".caption"):c.hasClass("ui-input")?c=c.find(".disabled-content:first-child"):c.hasClass("another_c")&&(c=c.find(".input-inner")),a.on_call_click(c))});1==this.options.phone_type&&(pz.onConnect(function(){debug&&
console.log("ui_onConnect");b("body").addClass("pipconnected")}),pz.onDisconnect(function(){debug&&console.log("ui_onDisconnect");b("body").removeClass("pipconnected")}),pz.onEvent(function(c){debug&&console.log("onEvent",c.isHistory()?"isHistory":"",c);if(c.isHistory()){if(c.to===a.options.user_number||c.from===a.options.user_number)a.history_call(c.callID,c.from,c.to,c.duration,c.start,c.end,c.record,c.direction),b("button#cancel-call").trigger("cancelcall")}else if(c.isIncoming())a.incoming_call(c.callID,
c.from,c.to);else if(c.isOutcoming())a.outgoing_call(c.callID,c.from,c.to);else if(c.isIncomingAnswer()||c.isOutcomingAnswer())a.response=!0,b("div#status-call").trigger("loadstatus")}))},connect:function(){1==this.options.phone_type?pz.isConnected()||pz.connect({user_phone:this.options.user_number,host:this.options.host_ip,client_id:this.options.client_id,client_type:this.options.client_type}):2!=this.options.phone_type||k||(k=!0,a.connected()||(c?a.connected()?e||r():(console.log("connect"),a.connect()):
(console.log(c),a.init())))},on_call_click:function(a){if(!pz.isConnected())return alert("\u041d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0410\u0422\u0421");console.log(a);a=a instanceof Object?a.text().replace(/[^\d]/gi,""):a;a=a.toString();"7"==a[0]&&(a="+"+a);a&&(console.log(a),pz.call(a),b("body").append("<div class='on_call_click' style='display:none;'>\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0437\u0432\u043e\u043d\u043e\u043a</div>"),
b(".on_call_click").show(300),setTimeout(function(){b(".on_call_click").hide(400,function(){b(".on_call_click").remove()})},5E3))},incoming_call:function(a,c,b){ajaxRequest({data:"map=callaction-Incoming&action=call&data[call_id]="+a+"&data[phone_from]="+c+"&data[phone_to]="+b})},outgoing_call:function(a,c,b){ajaxRequest({data:"map=callaction-Outgoing&action=call&data[call_id]="+a+"&data[phone_from]="+c+"&data[phone_to]="+b})},history_call:function(a,c,e,g,h,k,u,n){ajaxRequest({data:"map=callaction-History&action=call&data[call_id]="+
a+"&data[phone_from]="+c+"&data[phone_to]="+e+"&data[duration]="+g+"&data[start]="+h+"&data[end]="+k+"&data[record]="+u+"&data[incoming]="+("1"==n)+"&data[response]="+this.response});this.response=!1;g||b("#CallNotice > .n_"+a+" .Phone").addClass("out")},defaultConfig:function(a){!this.options.elementInput.data("phoneip")&&this.element&&(b.extend(this.options,this.defaults,a||{}),this.options.elementInput.data("phoneip",this.options))},destroy:function(){b.Widget.prototype.destroy.call(this)}})})(jQuery,
window,document);function _transferCall(b,g){pz.isConnected()&&pz.transfer(b,g)}
function testConnectPhoneIp(){debug&&console.log("testConnectPhoneIp()");pz.onConnect(function(){$(".state_ip_connect").addClass("ok").text("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e");debug&&console.log("onConnect")});pz.onDisconnect(function(){$(".state_ip_connect").removeClass("ok").text("\u041d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f");debug&&console.log("onDisconnect")});testConnectPhoneIpActive()}
function testConnectPhoneIpActive(){debug&&console.log("testConnectPhoneIpActive()");var b="\u041f\u0440\u043e\u0441\u0442\u044b\u0435 \u0437\u0432\u043e\u043d\u043a\u0438"==$("#phoneip-Index-phoneip_type input").val(),g=$("#phoneip-Index-PZ-phoneip_password input").val(),h=$("#phoneip-Index-PZ-phoneip_active-field").is(":checked");pz.isConnected()&&pz.disconnect();h&&b&&("********"==g&&$("#phoneip-Index-PZ-phoneip_password input").val($("#phoneip-Index-PZ-phoneip_password input").data("pass")),g=
$("#phoneip-Index-PZ-phoneip_password input").val(),b={host:$("#phoneip-Index-PZ-phoneip_host input").val(),client_id:g,client_type:"Class365"},debug&&console.log(b),$(".state_ip_connect").removeClass("ok").text("\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f..."),pz.isConnected()||pz.connect(b))}
function _PipSetContent(b){4<=$("#CallNotice > *").length&&$("#CallNotice > *:first").stop().slideUp(200,function(){$(this).remove()});$("#CallNotice").append("<div style='display:none;' id='callaction-notice"+b+"'></div>")}
function PipSetContent(b){var g=$("#callaction-notice"+b);g.find(".popUp-Close").remove();g.prepend('<div style="" class="popUp-Close close sprites-close"></div>').slideDown(200,function(){$("#callaction-notice"+b).off("mouseenter mouseleave").on("mouseenter",function(){var b=$(this);1!=b.data("state")&&(b.data("state",1),b.clearQueue().stop().css("opacity",1))}).on("mouseleave",function(){var b=$(this);0!=b.data("state")&&(b.data("state",0),b.delay(2E4).animate({opacity:.7},500,function(){b.delay(1E4).slideUp(200,
function(){b.remove()})}))}).trigger("mouseleave")})}
function _showCallN(b,g,h){b="\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0432\u044b\u0437\u043e\u0432: "+b;g&&(b+="\n\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: "+g);g=new Notification("\u0411\u0438\u0437\u043d\u0435\u0441.\u0420\u0443",{tag:"call-notice",title:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0437\u0432\u043e\u043d\u043e\u043a",body:b,icon:"/images/logo-business-ru.png"});h&&(g.onclick=function(){window.focus();window.location=window.location.origin+
"/deal?id="+h});setTimeout(g.close.bind(g),3E4)}$(function(){$("body").on("click","#CallNotice .close",function(){$(this).parent().slideUp(200,function(){$(this).remove()})})});var debug=$("html").hasClass("debug")?!0:!1;if("undefined"==typeof IE)var IE=!0;if("undefined"==typeof preventDefaultBtn)var preventDefaultBtn=!0;if("undefined"==typeof autoUpdateflag)var autoUpdateflag=!1;if("undefined"==typeof dateObj)var dateObj=new Date;var thisUrl=window.location.host+"/";
if(!jsonCoreObj)var jsonCoreObj="";1<window.location.pathname.replace(/\//,"").length&&(thisUrl+=window.location.pathname+"/");thisUrl=window.location.protocol+"//"+thisUrl.replace(/(\/){2,}/ig,"/");
$.ajaxSetup({type:"post",dataType:"json",error:function(b){autoUpdateflag=!1;0!=b.status&&(200!=b.status?alert("\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430."):debug?ajaxError(b):alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043e\u0442\u0432\u0435\u0442\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430."))}});var GET_param=[];
if(""!=window.location.search)for(var tmp=[],tmp2=[],tmp=window.location.search.substr(1).split("&"),i=0;i<tmp.length;i++)tmp2=tmp[i].split("="),GET_param[tmp2[0]]=tmp2[1].replace(/%40/ig,"@");function leadZero(b,g){for(g=0<g?g:2;b.toString().length<g;)b="0"+b;return b}RegExp.escape=function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};jQuery.fn.check=function(b){return this.each(function(){this.checked="on"==b?!0:"off"==b?!1:!this.checked})};
function tinymce_onchange(b){$("#"+b.id).val(b.getBody().innerHTML).change()}
function tinymce_cleanup(b,g){"insert_to_editor"==b&&g.length&&($("#sender-PopupNewSender-EmailText-field").length?setTimeout("$('#sender-PopupNewSender-EmailText-field').val('"+g+"').change();",100):$("#mail-PopupCreateInPopup-MailNewLetter-NewLetterBody-field").length?setTimeout("$('#mail-PopupCreateInPopup-MailNewLetter-NewLetterBody-field').val('"+g+"').change();",100):$("#mailpopup-PopupCreateInPopup-MailNewLetter-NewLetterBody-field").length&&setTimeout("$('#mailpopup-PopupCreateInPopup-MailNewLetter-NewLetterBody-field').val('"+
g+"').change();",100));return g}function ui_progressbar(b){b=$(b);$(".progress-label",b);data=b.data();b.progressbar({value:data.pbVal,max:data.pbMaxVal})}function appOffsetTop(){return 15+($("#ahead-ribbon").height()+$("#child-nav-ribbon").height()+$("#generic-nav-ribbon").height())}
function ui_Menu(b,g,h){h=h||!1;ui_Menu.timeoutID=ui_Menu.timeoutID||!1;b&&$(function(){var a=$("#generic-nav-ribbon"),c="",e=$("#child-nav-ribbon"),k="",u=0,r,l,n=0;100==g.parentId&&($("#dyn-area").css("margin-top",appOffsetTop()),horFixed(),e.html(""));$.each(b,function(a,b){currFlag=g.parentId==b.id;"main"==b.area&&(c+='<li class="generic-nav-item'+(currFlag?" active":"")+'"><a href="/'+b.ref+'" data-menuindex="'+b.id+'">'+b.name+"</a></li>");currFlag&&(childLength=b.childrens.length,k="",0<childLength&&
(k='<div class="wrapper"><div class="sub-menu-item-collection">',6>childLength?$.each(b.childrens,function(a,c){currChildFlag=g.childrenId==c.id;k+='<div style="width:auto;" class="sub-menu-col"><a class="'+(currChildFlag?"active":"")+'" href="'+c.ref+'" data-id="'+c.id+'"><span class="label">'+c.name+"</span></span></a></div>"}):$.each(b.childrens,function(a,c){currChildFlag=g.childrenId==c.id;r=u+1==childLength&&1==childLength%2;l=8>childLength?"auto":100/childLength+"%";n||(k+='<ul style="width:'+
l+';" class="sub-menu-col">');k+="<li"+(r?' style="margin-top:-20px;"':"")+'><a class="'+(currChildFlag?"active":"")+'" href="'+c.ref+'"><span class="label">'+c.name+"</span></a></li>";n++;2===n&&(k+="</ul>",n=0);u++}),k+="</div></div>"),e.html(k),ui_Submenu())});a.html(c);$("#dyn-area").css("margin-top",appOffsetTop());horFixed();h||(h=!0,$(document).on("click","body",function(){$("#generic-nav-ribbon").ismouseover()||$(".user-settings-area").ismouseover()||$("#child-nav-ribbon").ismouseover()||
(ui_Menu(b,g,!0),$("#dyn-area").css("margin-top",appOffsetTop()),$(window).trigger("scroll"))}),$("#generic-nav-ribbon, .user-settings-area").on("click","a",function(){ui_Menu.timeoutID&&clearTimeout(ui_Menu.timeoutID);ui_Menu.timeoutID=setTimeout(function(){ui_Menu(b,g,!0)},15E3);id=$(this).data("menuindex");hasChild=!1;$.each(b,function(a,c){c.id==id&&c.childrens.length&&(hasChild=!0,ui_Menu(b,{parentId:id,childrenId:g.childrenId},!0))});$("#dyn-area").css("margin-top",appOffsetTop());$(window).trigger("scroll");
if(hasChild)return!1}),$("#child-nav-ribbon").on("click","a",function(a){$("#child-nav-ribbon a").removeClass("active");$(this).addClass("active")}))});(arrowBuild=function(){var a=$(".generic-nav-item.active"),c=document.getElementById("generic-nav-item-arrow");null!=c&&(c=c.getContext("2d"))&&(a.children("canvas").css({width:"auto",left:0}),c.clearRect(0,0,c.canvas.width,c.canvas.height),c.canvas.width=a.width(),c.canvas.height=34,c.beginPath(),c.moveTo(c.canvas.width,0),c.lineTo(c.canvas.width,
2),c.lineTo(c.canvas.width/2,c.canvas.height-17),c.lineTo(0,2),c.lineTo(0,0),c.fillStyle="#e8a83c",c.shadowColor="#999",c.shadowBlur=13,c.shadowOffsetY=7,c.fill())})();$.smoothScroll=function(){var a=arguments,c=$(window).width(),b=(990-c)/c;990<c||!a.length||a[0].bind("mouseenter",function(c){990<$(window).width()?(a[1]||a[0]).animate({left:0},250):(a[1]||a[0]).animate({left:-c.pageX*b},250,function(){a[0].bind("mousemove",function(c){(a[1]||a[0]).css({left:-c.pageX*b})})})}).bind("mouseleave",function(){a[0].unbind("mousemove")})};
$.smoothScroll($("#generic-nav-ribbon-wrapper"),$("#generic-nav-ribbon"))}
function ui_Submenu(){$("#child-nav-ribbon").ready(function(){var b=$(this);4>b.find("ul.sub-menu-col").size()&&(b.find("div.sub-menu-item-collection").css("width","auto"),b.find("ul.sub-menu-col").css("padding-right",100));b.find(".wrapper").show();$("#child-nav-ribbon").css("top",$("#ahead-ribbon").height()+$("#generic-nav-ribbon-wrapper").height());$("#dyn-area").css("margin-top",appOffsetTop());$.smoothScroll($("#child-nav-ribbon"),$("#child-nav-ribbon .wrapper"));horFixed()})}
function scroll_content(){$(window).bind("scroll",function(){var b=[],g=$(this).scrollTop();$(this).scrollLeft();b[0]=$("section#ahead-ribbon");b[1]=$("#generic-nav-ribbon-wrapper");b[2]=$("section#child-nav-ribbon");0<g?(b[0].hasClass("ahead-ribbon-floated")||b[0].addClass("ahead-ribbon-floated"),b[1].css("top",b[0].height()-g),b[2].css("top",b[0].height()+b[1].height()-g)):g||(b[1].css("top",b[0].height()),b[2].css("top",b[0].height()+b[1].height()),b[0].removeClass("ahead-ribbon-floated"))})}
function scrollToNewTreeItem(){var b=$("#new-tree-item").offset().top,g=$("#new-tree-item").height(),h=$(window).scrollTop(),a=$(window).height();b-h>=h&&b+g-h<=a+h||$(window).scrollTop($("#new-tree-item").position().top);setTimeout(function(){$("#new-tree-item").focus()},300)}
function horFixed(){var b=$(".js-hor-fixed"),g,h=50,a=$(window).scrollTop();b.css("position","fixed").parent().addClass("js-hor-fixed-active");b.each(function(){g=$(this).parent();$(this).height("auto");g.height("auto")});b.each(function(){if("none"!=$(this).css("display"))if($(this).css("z-index",h--),g=$(this).parent(),$(this).hasClass("float-left")){var a=$(this).height(),c=$(this).next().height()+40;$(this).next().find(".js-hor-fixed").each(function(){c+=$(this).height()});c>a?($(this).find(".table").length?
$(this).find(".table").height(c):$(this).find("#mail-Index-MailMenu").length?$(this).find("#mail-Index-MailMenu").height(c):$(this).height(c),g.css("position","relative")):$(this).find(".table").length?g.css("position","relative").height(a):$(this).find("#mail-Index-MailMenu").length?g.css("position","relative").height(a):g.css("position","relative").height($(this).find(".FilterLeft").height())}else g.css("position","relative"),$(this).css("width",g.width()),g.css("padding-top",parseInt($(this).height(),
10))});var c=0,e=0;$(window).scroll(function(a){c=parseInt($(window).scrollTop(),10);if(0===e||e!=c)e=c,b.each(function(){"none"!=$(this).css("display")&&(g=$(this).parent(),$(this).parent().length&&$(this).css("top",parseInt($(this).parent().offset().top,10)-c))})});$(window).resize(function(a){if("SPAN"===a.target.nodeName)return a.stopImmediatePropagation();b.each(function(){"none"!=$(this).css("display")&&(g=$(this).parent(),$(this).hasClass("float-left")||($(this).css("width",g.width()),g.css("padding-top",
parseInt($(this).height(),10),10)),$(window).scroll())})});$(window).scroll();$(window).scrollTop(a)}function setFilterHorFixed(b){0<$("#"+b).closest(".popup").length&&$("#"+b).find(".js-hor-fixed").removeClass("js-hor-fixed")}$(function(){0<$(".table-footer").size()&&(horFixed(),setInterval(function(){$(window).resize()},100),$(document).ajaxStop(function(){$(window).resize()}))});
function mainPageLayout(){equalHeights("section#content > div.inner > div.DocumentIndexMainPage");equalHeights("section#content .area-Left, section#content .area-Right");$("div.DocumentIndexMainPage").each(function(){equalWidths($(this).find(".area-Left, .area-Right"))});$("div.DocumentIndexMainPage table tr:last-child").each(function(){$(this).children("td").css("width",0).css("padding-right",0).filter(":first-child, :last-child").css("width",$(this).parent().width()/2)})}
function equalHeights(b){if(!(2>$(b).length)){var g=0;$(b).height("").each(function(){$(this).height()>g&&(g=$(this).height())}).height(g)}}function equalWidths(b){if(!(2>$(b).length)){var g=0;$(b).each(function(){$(this).width()>g&&(g=$(this).width())}).width(g)}}
function quickEditInput(b){$("#"+b+"-field").focus();$("body").on("click.QuickEdit focusin.QuickEdit","*",function(g){$(this).closest("#"+b).length||($("body").off("click.QuickEdit focusin.QuickEdit","*"),$("#"+b+"-field").change());if($(this).hasClass("quickEdit"))return!1})}String.prototype.trimed=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")};
$(function(){$("body").append("<div id='loading'><img src='/images/loading.png'/><div>\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0438\u0434\u0451\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430<br>\u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u0438\u043d\u0443\u0442</div></div>");$("#login-authentication-log-button").click(function(){setTimeout(function(){$("#loading:visible").addClass("upd");
$("#loading:visible > div").show()},35E3)});var b={send:!1,loading:function(g){b.send&&g.fadeIn(200)}};$(document).ajaxSend(function(g,a,c){c.data&&-1!=c.data.search(/action=update/i)||c.data&&-1!=c.data.search(/grid_indication=1/i)||c.data&&-1!=c.data.search(/action=change/i)&&-1!=c.data.search(/Grid-Filter/i)||c.data&&-1!=c.data.search(/action=click/i)&&(-1!=c.data.search(/PointFilter-Point&/i)||-1!=c.data.search(/PointFilter-PointGroup&/i)||-1!=c.data.search(/PointFilter-PointAll&/i))||b.send||
(b.send=!0,g=$.proxy(b,"loading",$("#loading")),setTimeout(g,1E3))}).bind("ajaxComplete",function(){b.send&&(b.send=!1,$("#loading").hide())});$("body").on("click",".collapsible h3",function(){var b=$(this).parent(),a=b.children(".contents");b.hasClass("collapsed")?(a.show(),b.removeClass("collapsed")):(a.hide(),b.addClass("collapsed"))});$("body").append('<div id="width-detector" style=""></div>');var g=$("#width-detector");$("body").on("keydown keyup",".ui-input.auto-width.enabled.visible input[type=text]",
function(b){var a=$(this);b=a.closest(".input-inner");a.addClass("auto-width-active");g.css("font-size",a.css("font-size"));g.css("font-family",a.css("font-family"));g.css("font-weight",a.css("font-weight"));g.css("padding",a.css("padding"));g.css("margin",a.css("margin"));g.css("display","inline-block");var c=parseInt(a.css("min-width"));0==c&&(g.text("www"),c=g.width());var e=b.css("max-width"),e="100%"==e?a.closest(".input").width():parseInt(e);g.text(a.val());a=g.width()+c/2;a>e&&e>c&&(a=e);a>
c?b.css("width",a):b.css("width",c)});$(document).ajaxStop(function(){$(".ui-input.auto-width.enabled.visible input[type=text]").keyup()});$("body").on("click",".multiple-select-change a",function(){var b=$(this),a=b.closest("div").children("input:first"),c=a.data(),e=b.data("id");delete c.select[c.selectObj[e]];delete c.selectObj[e];b.parent().prev().remove();b.parent().remove();a.data("selectObj",c.selectObj)});$("#quick-access").click(function(){"none"==$("#quick-panel").css("display")?($("#quick-panel").eq(0).show(),
$("#quickAccessButton").addClass("active")):($("#quick-panel").eq(0).hide(),$("#quickAccessButton").removeClass("active"))});$.fn.digitsDot=function(b){for(var a="",c=0;c<b;c++)a+="\\d";b=new RegExp("("+a+")(?=("+a+"))","g");return $(this).val($(this).val().replace(b,"$1."))};$("body").on("click","button, submit, .button",function(b){preventDefaultBtn&&b.preventDefault()});$("body").on("submit","form",function(b){$(this).closest(".tmg")||preventDefaultBtn&&b.preventDefault()});"object"===typeof VideoInfo&&
setTimeout('ajaxRequest({data: "action=ShowVideo&map=" + $( "div.DocumentIndex" ).attr( "id" ) + "&data[popup]=" + VideoInfo.popup })',1E3*VideoInfo.timeout);$(document).on("click",".btn-block-hide",function(b){$(this).data("alt")&&(b=$(this).text(),$(this).text($(this).data("alt")),$(this).data("alt",b));$(this).next(".block-hide").slideToggle(150,function(){if("yes"==$(this).prev(".btn-block-hide").data("saveState")){var a=$(this).prev(".btn-block-hide").attr("id");document.cookie=a+"="+$(this).is(":visible")}})});
$(".desktopWidgetList").on("ss-rearranged",function(){var b="",a=0;$(".desktopWidgetList > .widget").each(function(){a++;var c=$(this).data("widgetid");b+="&data[val]["+a+"]="+c});ajaxRequest({data:"action=sort"+b+"&map=mainpage-Index-Widgets"})})});
$(function(){function b(){var g=this===document?$(this):$(this).contents();g.mousemove(function(b){jQuery.mlp={x:b.pageX,y:b.pageY}});g.find("iframe").load(b)}$.mlp={x:0,y:0};$(b);$.fn.ismouseover=function(b){var h=!1;this.eq(0).each(function(){var a=$(this).is("iframe")?$(this).contents().find("body"):$(this),c=a.offset();h=c.left<=$.mlp.x&&c.left+a.outerWidth()>$.mlp.x&&c.top<=$.mlp.y&&c.top+a.outerHeight()>$.mlp.y});return h}});
function ajaxSuccess(b){debug&&mu(b);$.each(b,function(b,h){$.each(h,function(a,c){"coreObj"==a?jsonCoreObj=c:"js"==a?$.each(c,function(a,c){eval(c)}):"href"==a?document.location.href=c:"openDocument"==a?document.location.href="/"+c:"reload"==c?document.location.reload():$.each(c,function(c,b){var g=$("#"+a);if("create"==c||"create"==b)g.length||$("body").append('<div id="'+a+'"></div>');else if("close"==c)g.dialogLight({actionClose:!0});else if("html"==c)$.each(b,function(a,c){g.html(c)});else if("text"==
c)$.each(b,function(a,c){g.text(c)});else if("prepend"==c)$.each(b,function(a,c){g.prepend(c)});else if("append"==c)$.each(b,function(a,c){g.append(c)});else if("after"==c)$.each(b,function(a,c){g.after(c)});else if("before"==c)$.each(b,function(a,c){g.before(c)});else if("focus"==c)g.find(":input:visible").focus();else if("val"==c)g.val(b);else if("attr"==c)g.attr(eval(b));else if("remove"==c)g.remove();else if("empty"==c)g.empty();else if("hide"==c)g.addClass("hidden");else if("show"==c)g.removeClass("hidden");
else if("updateClass"==c)g.attr("class",b);else if("update"==c){var h=b[b.length-1];if(g.hasClass("popUp"))g.dialogLight("update",h);else{var l=g.attr("style"),n=g.data(),w=!1;g.hasClass("popUp")&&(w=$(".popUp-Close",g).detach());g.replaceWith(h);$("#"+a).attr({style:l}).data(n);w&&w.prependTo("#"+a);delete l;delete n;delete w}}else"caption"==c?"ui_Text"==g.attr("class")&&$.each(b,function(a,c){g.text(c)}):"error"==c&&($("#"+a+" .form-error").remove(),b&&$.each(b,function(a,c){g.append('<div class="form-error">'+
c+"</div>")}))})})})}function connect_API(b,g,h){g.action=b;$.ajax({url:"/api",data:{json:g},success:function(a){null!=a.microtime&&a.microtime.length&&eval(a.microtime);delete a.microtime;h(a)}})}function scroll_to(b){b=$(b).offset().top;var g=Math.abs((b-window.pageYOffset)/3.5);$("body,html").animate({scrollTop:b-100},g)}function openPopup(b,g){var h=$("#"+b);"object"!=typeof g&&(g={activeModal:!1,functionClose:"closePopup"});h.dialogLight(g)}function pogodi(b){}
function openPopupHint(b,g){$("#"+b).dialogLight({tip:g,functionClose:"closePopup"})}function openHint(b,g){$(b).tooltip({position:{my:"center top+10px",collision:"fit",using:function(b,a){$(this).css(b)}},show:!1,hide:!1,content:function(){return g},tooltipClass:"custom-tooltip"})}var ajaxStack={},ajaxStackI=0,ajaxFlag=!1,doubleClickProtection=null;
$(document).ajaxStart(function(){ajaxFlag=!0}).ajaxStop(function(){ajaxFlag=!1;$.each(ajaxStack,function(b,g){delete ajaxStack[b];ajaxRequest({url:b,data:g});return!1})});
function ajaxRequest(b){console.assert("object"==typeof b,"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f $o \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u043c!");!b.val&&b._this&&b._this.val()?b.val=b._this.val():b.val||(b.val="");b.url||(b.url=thisUrl);b._this||(b._this=!1);!b.data&&b._this?b.data=getData(b._this.data(),b.action,b.val,b._this):b.action&&!b.data&&(b.data="action="+b.action);b.add_data&&(b.data+=b.add_data);
if(ajaxFlag)ajaxStack[b.url]=b.data;else{if(0<b.data.search(/map=undefined/))return debug&&console.log(b),console.assert(!1,"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d data.map! ajaxRequest()");if(doubleClickProtection!=b.data){doubleClickProtection=b.data;if(b._this){if(b._this.attr("disabled"))return;b._this.hasClass("onclick")&&b._this.attr("disabled","true")}b.data+="&jsonCoreObj="+jsonCoreObj;debug&&console.log(b);$.ajax({url:b.url,data:b.data,success:function(g){ajaxSuccess(g);b._this&&
(g=$.proxy({f:function(g){b._this.removeAttr("disabled");doubleClickProtection=null}},"f",b._this),setTimeout(g,400))}})}}}
function getData(b,g,h,a){console.assert(b.map,"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d data.map! getData()");b.data||(b.data={});b.data.action&&(g=b.data.action);"undefined"!=typeof b.data.val?h=b.data.val:"undefined"!=typeof b.val&&(h=b.val);a&&"checkbox"==a.attr("type")&&(h=a.is(":checked")?"TRUE":"FALSE");g="action="+g+"&map="+b.map;g+="&data[val]="+encodeURIComponent(h);for(var c in b.data)h=b.data[c],a=typeof h,"string"!=a&&"number"!=a||"val"==c||"map"==c||"action"==c||(g+="&data["+
c+"]="+encodeURIComponent(h));for(c in b)h=b[c],a=typeof h,"string"!=a&&"number"!=a||"val"==c||"map"==c||"action"==c||"data"==c||(g+="&data["+c+"]="+encodeURIComponent(h));return g}function autoUpdate(){autoUpdateflag&&ajaxRequest({action:"update"})}84>=window.location.port&&setInterval(autoUpdate,6E4);function closePopup(b){setTimeout(function(){ajaxRequest({data:"action=click&map="+b+"-Cancel&data[val]=0&data[mapedit]="+b+"-Cancel"})},50)}
function hoverHelp(b){$(b).mouseenter(function(){ajaxRequest({action:"question_hover",_this:$(b)})})}
function ya_map(b){function g(){var g=new ymaps.Map("ya_map_div",{center:[55.753994,37.622093],zoom:9});ymaps.geocode(b,{results:1}).then(function(a){a=a.geoObjects.get(0);a.geometry.getCoordinates();var c=a.properties.get("boundedBy");g.geoObjects.add(a);g.setBounds(c,{checkZoomRange:!0})})}"undefined"==typeof ymaps?$.getScript("//api-maps.yandex.ru/2.1/?lang=ru_RU",function(b,a,c){ymaps.ready(g)}):ymaps.ready(g)}
function inputErrorTooltip(b){$("#"+b).tooltip({position:{my:"center top+10px",collision:"fit",using:function(b,h){$(this).css(b).addClass("error")}},show:{duration:0},hide:{duration:0},content:function(){return $(this).children(".error-text").html()},tooltipClass:"custom-tooltip"})}
$(function(){function b(b){var h=$(b).parent().next(".char_limit"),a=$(b).val().length,c=$(b).attr("maxlength"),e,k;a>c&&($(b).val($(b).val().substr(0,c)),a=$(b).val().length);70>=a?(e=70-a,k=1):134>=a?(e=134-a,k=2):201>=a?(e=201-a,k=3):268>=a?(e=268-a,k=4):335>=a?(e=335-a,k=5):402>=a&&(e=402-a,k=6);$(h).empty().html(e+"["+k+"]")}csp&&ajaxSuccess($.parseJSON(csp));$("body").on("change.core",":input:not(.manual-input, .grid-action, :file)",function(b){var h=$(this),a=h.closest(".ui-input");a.hasClass("Start")||
a.hasClass("End")||(a.hasClass("grid_goods_price")||a.hasClass("grid_goods_discount"))&&"undefined"==typeof h.data().map||(b.stopImmediatePropagation(),b.preventDefault(),$(this).length&&ajaxRequest({action:b.type,_this:h}))});$("body").on("click",".ui-checkbox label",function(b){var h=$(this).attr("for");"undefined"!=typeof h&&$("[name='"+h+"']").click();"undefined"!=typeof h&&(b.stopImmediatePropagation(),b.preventDefault())});$("body").on("click",".onclick",function(b){b.stopPropagation();var h=
$(this);h.hasClass("manual-input")?setTimeout(function(){ajaxRequest({action:b.type,_this:h,add_data:"&"+h.closest("form").serialize()})},500):ajaxRequest({action:b.type,_this:h})});if(debug)$("body").on("click","*",function(b){b.altKey&&(b.stopImmediatePropagation(),b.preventDefault(),b=$(this).closest("[data-map]").data("map"),"undefined"!=typeof b&&(console.log("Ctrl+Click: "+b),ajaxRequest({data:"action=click&map=config-viewObj&data[val]="+b})))});$("body").on("click",".oncolorbox",function(b){b.stopPropagation();
b=$(this);var h=$(this).data("data");"undefined"==typeof h&&(h={});"undefined"==typeof h.width&&(h.width=860);"undefined"==typeof h.height&&(h.height=480);"undefined"==typeof h.rel&&(h.rel="");"undefined"==typeof b.attr("title")&&b.attr("title","");"undefined"==typeof h.photo&&(h.photo=!1);$("#oncolorbox").attr("title",b.attr("title")).attr("href",h.href).colorbox(h.photo?{photo:!0,maxWidth:"90%",maxHeight:"90%",rel:h.rel,opacity:.6}:{iframe:!0,innerWidth:h.width,innerHeight:h.height,rel:h.rel,opacity:.6}).click()}).append("<div id='oncolorbox'></div>");
$("body").on("click",".oncolorbox_map:not(.inactive)",function(b){b.stopPropagation();$(this);b=$(this).data();$("#ya_map_div *").remove();$("#ya_map_popup").attr("href","#ya_map_div").colorbox({inline:!0,width:"80%",height:"70%",opacity:.6}).click();ya_map(b.address)}).append("<div id='ya_map_popup'></div> <div id='ya_map_div'></div>");$("body").on("click","button.quickEditBtn",function(b){b.stopPropagation();b=$(this);ajaxRequest({action:"quickEditClick",_this:b})});$("body").on("click",".ui-button:not(.onclick) button:not(.onclick)",
function(b){$(this).closest(".oncallbutton").length||b.stopPropagation();var h=$(this).closest(".ui-button");ajaxRequest({action:b.type,_this:h})});$("body").on("change",".period-date-filter-start input[Type='text'], .period-date-filter-end input[Type='text']",function(b){var h=$(this),a=h.closest(".ui-period-date"),a=$(".period-date-filter-start input[Type='text']",a).val()+"-"+$(".period-date-filter-end input[Type='text']",a).val();ajaxRequest({action:b.type,_this:h,val:a})});$("body").on("keyup",
".period-number-filter-start input[Type='text'], .period-number-filter-end input[Type='text']",function(b){b=new RegExp(/^[-+]?([0-9]{1,})?(\.)?([0-9]{1,})?$/);var h=$(this);-1!=h.val().search(/\,/)&&h.val(h.val().replace(/\,/ig,"."));0<h.val().search(/\-/)&&h.val(h.val().replace(/\-/ig,""));b.test(h.val())||h.val(h.data("val"))}).on("change",".period-number-filter-start input[Type='text'], .period-number-filter-end input[Type='text']",function(b){var h=$(this),a=h.closest(".ui-period-number"),a=
$(".period-number-filter-start input[Type='text']",a).val()+"-"+$(".period-number-filter-end input[Type='text']",a).val();ajaxRequest({action:b.type,_this:h,val:a})});$("body").on("keydown",".new-tree-item",function(b){var h=$(this);13==b.which&&(b={data:{}},b.id=h.next().attr("data-id"),b.map=h.next().attr("data-map"),b.val=h.val(),b.enter=1,h.data(b),ajaxRequest({action:"click",_this:h}))});$("body").on("mousedown",".with-char-limit",function(g){$(this).parent().parent().find(".char_limit").length||
($(this).parent().parent().append('<div class="char_limit" style="text-align: right">0/70</div>'),b("#"+$(this).attr("id")))});$("body").on("keyup",".with-char-limit",function(g){b("#"+$(this).attr("id"))});$("body").on("mouseenter",".ui-file .InputFileContainer > div",function(b){$(this).find(".tools").slideToggle(100)});$("body").on("mouseleave",".ui-file .InputFileContainer > div",function(b){$(this).find(".tools").slideToggle(100)})});
var MBB=function(){var b=window.location.pathname;"/"==b[0]&&(b[0]=b[0].substring(1));$("body").prepend("<div id='warning-old-browsers'><h1>\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043c\u043e\u0436\u0435\u0442<br> \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u041a\u043b\u0430\u0441\u0441365!</h1><h2>\u0414\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0432 \u041a\u043b\u0430\u0441\u0441365 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</h2><a href='http://www.google.com/intl/ru/chrome/browser/' target='_blank'><img src='/images/old_browser/chrome.png' alt='Get Google Chrome'/>Google Chrome</a><a href='http://www.firefox.com' target='_blank'><img src='/images/old_browser/firefox.png' alt='Get Firefox'/>Mozilla Firefox</a><a href='http://browser.yandex.ru/' target='_blank'><img src='/images/old_browser/ya.png' alt='Yandex Browser'/>\u042f\u043d\u0434\u0435\u043a\u0441.\u0411\u0440\u0430\u0443\u0437\u0435\u0440</a><a href='http://www.opera.com/ru/computer/next' target='_blank'><img src='/images/old_browser/opera.png' alt='Get Opera'/>Opera Next</a><a href='http://www.apple.com/safari/download/' target='_blank'><img src='/images/old_browser/safari.png' alt='Get Safari'/>Safari</a><div class='choice'><a href='/?BadBrowser=1' class='bad'>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443</a></div></div><div class='bg-old-browsers'></div>")};
$(function(){($("html").hasClass("no-placeholder")&&$("html").hasClass("no-borderradius")&&$("html").hasClass("no-boxshadow")&&$("html").hasClass("no-opacity")||BadBrowser)&&!msgBadBrowser&&MBB()});function mu(b){"undefined"!=typeof b&&"undefined"!=typeof b.memory_used&&($(".DEBUG-btn").attr("title",$(".DEBUG-btn").attr("title")+" | "+b.memory_used),delete b.memory_used)}
function ajaxError(b){b.responseText=b.responseText.replace(/<\\/ig,"<").replace(/>/ig,"&gt;").replace(/</ig,"&lt;").replace(/&lt;br&gt;/ig,"\n");phpError("<div class='php-error'><h3>\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043e\u0442\u0432\u0435\u0442\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430:</h3><pre>"+b.responseText+"</pre></div>");$("#php-error").trigger("click")}
function phpError(b){debug&&(b&&$("body").append(b),b=$(".php-error:not(:has(.clean_error))"),b.prepend('<div class="clean_error">\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c</div>'),b.length&&($("#php-error").length||($("body").prepend('<div id="php-error" class="red-err"><div class="wrapper"><div class="err-hide2">\u0421\u043a\u0440\u044b\u0442\u044c</div><h2>\u041e\u0442\u043b\u0430\u0434\u043a\u0430</h2><div class="clean_all_error">\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0451</div><div class="err-hide">&times;</div><div class="err-code"></div></div></div>'),
$("#php-error").on("click",function(b){$(this).hasClass("red-err")&&$(this).removeClass("red-err")}),$(".err-hide, .err-hide2").on("click",function(b){$(this).parent().parent().addClass("red-err");b.stopImmediatePropagation()}),$("body").keydown(function(b){var h=$("#php-error");27==b.which&&h&&($(".err-hide").trigger("click"),b.preventDefault())})),b.each(function(b,h){var a=$(h);a.html(a.html().replace(/@1#/ig,".&emsp;&emsp;").replace(/@2#/ig,".&emsp;&emsp;.&emsp;&emsp;").replace(/@3#/ig,".&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;").replace(/@4#/ig,
".&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;").replace(/@5#/ig,".&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;").replace(/@6#/ig,".&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;").replace(/@7#/ig,".&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;").replace(/@8#/ig,".&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;").replace(/@9#/ig,".&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;").replace(/@0#/ig,
".&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;.&emsp;&emsp;"));a=a.detach();$("#php-error .err-code").prepend(a)}),$(".php-error").css("display","block")))}
$(function(){81<window.location.port&&$("body").addClass("port"+window.location.port);phpError();$("body").on("click",".show-stack-error",function(b){$(this).parent().find(".stack-error").slideToggle(100)}).on("click",".clean_all_error",function(b){$(".clean_error").trigger("click")}).on("click",".clean_error",function(b){$(this).parent().hide(100,function(b){$(this).remove();0==$(".clean_error").length&&$("#php-error").fadeOut(100,function(b){$(this).remove()})})}).on("click",".toggle-str",function(b){b=
$(this).data().str;if(0===$(".str-"+b+":visible").length)for($j=0;15>$j;$j++)$(".str-"+(b-$j)).show(100);else for($j=0;15>$j;$j++)$(".str-"+($j+b)).hide(100)})});function microtime(b){var g=(new Date).getTime()/1E3;if(b)return g;b=parseInt(g,10);return Math.round(1E3*(g-b))/1E3+b}
(function(b,g,h){MutationObserver=g.MutationObserver||g.WebKitMutationObserver;var a=[],c={realization:{"top::div.Add::click":'\u0427\u0442\u043e\u0431\u044b \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043f\u0440\u043e\u0434\u0430\u0436\u0443, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 "\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"',"left::div.grid-search::click":"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0443 \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443, \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0438\u043b\u0438 \u0441\u0443\u043c\u043c\u0435, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u0445 \u0432 \u043f\u043e\u0438\u0441\u043a\u0435",
"top::div.partner_name_filter::mouseenter":"\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u0437\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0438\u043b\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0443, \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u043c",
"top::#realization-Index-Grid  table.grid-table thead tr:last th:contains(\u0418\u0442\u043e\u0433\u043e)::click":"\u0427\u0442\u043e\u0431\u044b \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043f\u043e \u0441\u0443\u043c\u043c\u0435, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043a\u043e\u043b\u043e\u043d\u043a\u0438","bottom::table.grid-table tbody tr td .ui-select[id$=point_name_ui_obj]::click":"\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u043c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u043d\u0435 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442"},
salereport:{"top::div#salereport-Index-Grid-ReportRefresh::click":'\u0417\u0430\u0442\u0435\u043c \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442"',"top::div.ReportPeriod::click":"\u0414\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044f \u043e\u0442\u0447\u0435\u0442\u0430 \u043f\u043e \u043f\u0440\u043e\u0434\u0430\u0436\u0430\u043c, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0435\u0440\u0438\u043e\u0434",
"bottom::table.grid-table thead tr:last th:nth-child(8)::click":"\u0427\u0442\u043e\u0431\u044b \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u043f\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0443 \u043d\u0430\u0446\u0435\u043d\u043a\u0438, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043a\u043e\u043b\u043e\u043d\u043a\u0438","top::table.grid-table tfoot tr td:nth-child(7)":"\u041e\u0431\u0449\u0438\u0435 \u0438\u0442\u043e\u0433\u0438 \u043f\u043e \u0432\u0441\u0435\u043c \u0442\u043e\u0432\u0430\u0440\u0430\u043c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u044b \u0432 \u043d\u0438\u0436\u043d\u0435\u0439 \u0441\u0442\u0440\u043e\u043a\u0435"},
users:{focus:".users-Popup1.popup-enabled","focus-error":'\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 "\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c", \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443.',
"top::div#users-Popup1-last_name div.input-inner input::click":"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e \u0438 \u0438\u043c\u044f, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445 \u0438 \u0436\u0443\u0440\u043d\u0430\u043b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439",
"top::div.Save::click":'\u0427\u0442\u043e\u0431\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"',
"bottom::ul.tab-switcher li.ui-input:contains(\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u043a\u043b\u0430\u0434\u0430\u043c)::mouseup":"\u0414\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0441\u043a\u043b\u0430\u0434\u0430\u043c \u0438\u043b\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u043e\u0434\u043d\u043e\u0438\u043c\u0435\u043d\u043d\u0443\u044e \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0443"},
supply:{"right::div.gridfilter-button-panel-left::click":'\u0427\u0442\u043e\u0431\u044b \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 "\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440',"bottom::div.Add::click":'\u0427\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u043f\u043e\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 "\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"',
"bottom::div.grid-search::click":"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043f\u043e\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435 \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443, \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443 \u0438\u043b\u0438 \u0441\u0443\u043c\u043c\u0435, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u0445 \u0432 \u043f\u043e\u0438\u0441\u043a\u0435","left::table.grid-table tbody tr td .ui-select[id$=point_name_ui_obj]::click":"\u0421\u0442\u0430\u0442\u0443\u0441 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u043c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u043d\u0435 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",
"right::div.ui-grid-point-filter .without-point::mouseup":"\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u043c \u0441\u0442\u0430\u0442\u0443\u0441\u0435, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u044d\u0442\u043e\u0442 \u0441\u0442\u0430\u0442\u0443\u0441"},retailpoint:{"right::a[href=retailcheck]::click":'\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0447\u0435\u043a\u043e\u0432, \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b "\u041a\u0430\u0441\u0441\u043e\u0432\u044b\u0435 \u0447\u0435\u043a\u0438"',
"bottom::a[href=retailhelp]::click":"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0430\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043e\u0439 \u0434\u043b\u044f \u043a\u0430\u0441\u0441\u044b \u0438 \u0441\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f \u043d\u0430\u0445\u043e\u0434\u044f\u0442\u0441\u044f \u0437\u0434\u0435\u0441\u044c",
"right::div.Add::click":'\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0439 \u0440\u043e\u0437\u043d\u0438\u0447\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"',"left::table.grid-table tbody tr:first td:nth-child(8)":'\u0415\u0441\u043b\u0438 \u0440\u043e\u0437\u043d\u0438\u0447\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u0441\u0432\u044f\u0437\u0430\u043d\u0430 \u0441 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c \u0420\u043e\u0437\u043d\u0438\u0446\u0430365, \u0442\u043e \u0435\u0439 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0430\u0442\u0443\u0441 "\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u0430"'},
goods:{"right::button[data-map=goods-Index-Tree-AddTreeItem]:first::click":'\u0427\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0441\u0441\u044b\u043b\u043a\u0443 "\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"',"bottom::div.Add::click":'\u0427\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0442\u043e\u0432\u0430\u0440, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 "\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"',
"bottom::div.Import::click":'\u0427\u0442\u043e\u0431\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0440\u0430\u0437\u0443 \u043c\u043d\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0438\u0437 Excel, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "\u0418\u043c\u043f\u043e\u0440\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"',"bottom::div.grid-search::click":"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0442\u043e\u0432\u0430\u0440 \u043f\u043e \u0447\u0430\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f, \u0448\u0442\u0440\u0438\u0445\u043a\u043e\u0434\u0443 \u0438\u043b\u0438 \u0430\u0440\u0442\u0438\u043a\u0443\u043b\u0443, \u043d\u0430\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0445 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u043f\u043e\u0438\u0441\u043a\u0430",
"bottom::button.pagination-next-prev.grid-pagination-next::click":"\u0427\u0442\u043e\u0431\u044b \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0435\u043b\u043a\u0443 \u0432\u043f\u0440\u0430\u0432\u043e"}};b.widget("sui.ui_helper",{options:{cookieTime:36500},_create:function(a){this.flashHelper()},destroy:function(){b.Widget.prototype.destroy.call(this)},
setTracker:function(b){var g=this;autoUpdPos=setInterval(function(){0>=a.length?clearInterval(autoUpdPos):g.scrollTriggerEvent({},c[b])},700)},flashHelper:function(){var e=this,k=document.location.pathname.replace("/","");if(k in c){var h="undefined"!=typeof c[k].focus?c[k].focus.toString():!1;b(document).on("ready",function(){b(document).on("scroll",function(a){e.scrollTriggerEvent(a,c[k])});b(g).on("resize",function(a){e.scrollTriggerEvent(a,c[k])});var r=b("div#help-notify");r.css({"z-index":12E4});
r.on("click","div.helpicon",function(){0<a.length?e.hideAll():e.showHintsOnPage(c[k]);b(this).attr("data-val","true"==b(this).attr("data-val")?"false":"true");clearInterval(void 0);if(0<a.length){b(".PointFilter-Left, .gridfilter").on("click",function(b){if(0!=a.length){e.scrollTriggerEvent(b,c[k]);var g=new Date,h=setInterval(function(){2500<new Date-g&&clearInterval(h);e.scrollTriggerEvent(b,c[k])},100)}});b(".popup-overlay").unbind("scroll").on("scroll",function(a){e.scrollTriggerEvent(a,c[k])});
if(h)b(h).on("PopupClose",function(a){e.hideAll()});e.setTracker(k)}});if("true"==r.attr("data-fshow"))if(h)var l=setInterval(function(){0<b(h).length&&(e.showHintsOnPage(c[k]),e.setTracker(k),clearInterval(l))},1E3);else setTimeout(function(){e.showHintsOnPage(c[k]);e.setTracker(k)},1500);setTimeout(function(){r.fadeIn(250)},1500)})}},hideAll:function(){a.forEach(function(a){b("div#childhelp-"+a).fadeOut(340,function(){b(this).remove()})});a=[]},showHintsOnPage:function(c){var h=0;if(c.hasOwnProperty("focus")&&
b(c.focus).is(":visible")||!c.hasOwnProperty("focus"))for(var u in c){if(c.hasOwnProperty(u)){h++;var r=u.split("::");if(!(1>=r.length)){var l=b(r[1]+":visible");if(0!=l.length)if(l=l[0].getBoundingClientRect(),0==b("div#childhelp-"+h).length&&-1==a.indexOf(h)){b("body").append('<div id="childhelp-'+h+'" data-prt="'+r[1]+'" style="display: none;"><a class="help-tooltips" href="#"><span class="'+r[0]+'"><p class="close"></p>'+c[u]+"</span></a></div>");console.log;b("div#childhelp-"+h).css({position:"fixed",
left:l.left,top:l.top,width:l.width,height:l.height,"z-index":c.hasOwnProperty("focus")?110:100,"pointer-events":"none","box-sizing":"border-box"}).fadeIn(250+90*h);var n=!0,w=r[0],y=0;do{l=b("div#childhelp-"+h+" span")[0].getBoundingClientRect();switch(r[0]){case "left":0>l.left?(r[0]="bottom",b("div#childhelp-"+h+" span").removeClass("top left bottom right").addClass(r[0])):n=!1;break;case "bottom":l.top+l.height>g.innerHeight?(r[0]="right",b("div#childhelp-"+h+" span").removeClass("top left bottom right").addClass(r[0])):
n=!1;break;case "right":0>l.right?(r[0]="top",b("div#childhelp-"+h+" span").removeClass("top left bottom right").addClass(r[0])):n=!1;break;case "top":0>l.top?(r[0]=w,b("div#childhelp-"+h+" span").removeClass("top left bottom right").addClass(w)):n=!1}if(4<=y++)break}while(n);(function(c){"undefined"!=typeof r[2]&&(b(r[1]).on(r[2],{selector:r[1]},function(e){b('div[data-prt="'+e.data.selector+'"]').fadeOut(340,function(){b(this).remove()});-1!==a.indexOf(c)&&a.splice(a.indexOf(c),1)}),b(document).on(r[2],
r[1],{selector:r[1]},function(e){b('div[data-prt="'+e.data.selector+'"]').fadeOut(340,function(){b(this).remove()});-1!==a.indexOf(c)&&a.splice(a.indexOf(c),1)}));b("div[data-prt='"+r[1]+"']").on("click","p.close",function(e){e.preventDefault();b(e.delegateTarget).fadeOut(340,function(){b(this).remove()});-1!==a.indexOf(c)&&a.splice(a.indexOf(c),1)})})(h);a.push(h)}else-1!==a.indexOf(h)&&a.splice(a.indexOf(h),1),b("div#childhelp-"+h).fadeOut(340,function(){b(this).remove()})}}}else this.hideAll(),
b("div#help-notify div.help-body span.content").children().remove(),b("div#help-notify div.help-body span.content").append("<span id='error-flash' style='color: red;font-weight: bold;'><br>"+c["focus-error"]+"</span>").children().last().delay(8E3).slideUp(200,function(){b(this).remove()})},scrollTriggerEvent:function(c,g){var h=0,r;for(r in g)if(g.hasOwnProperty(r)&&(h++,0!=b("div#childhelp-"+h).length)){var l=r.split("::"),n=b(l[1]+":visible");0==n.length?(0<b("[data-prt='"+l[1]+"']").length&&-1!==
a.indexOf(h)&&a.splice(a.indexOf(h),1),b("[data-prt='"+l[1]+"']").fadeOut(340,function(){b(this).remove()})):(l=n[0].getBoundingClientRect(),b("div#childhelp-"+h).css({left:l.left,top:l.top,width:l.width,height:l.height}))}}})})(jQuery,window,document);
$(document).ready(function(){function b(){function a(b){b+="";return 2>b.length?"0"+b:b}var b=$("span#minutes"),c=$("span#seconds");b.text("00");c.show("00");var h=0,l=setInterval(function(){0==g?(++h,c.text(a(h%60)),b.text(a(parseInt(h/60))+":")):(clearInterval(l),$("span#minutes").text(""),$("span#seconds").text(""),$("span#status-text").show())},1E3)}var g=!1,h=!1,a=!1,c=!1;$("html").on("keydown",function(b){118==b.keyCode&&$(".padnum").click();27==b.keyCode&&h&&(a&&$(".close-history").trigger("click"),
$(".action.close").trigger("click"))});$(".padnum").on("click",function(){$left_offset=$("b.adv-calls").parent().offset().left;$("#phone-pad").css("left",$left_offset-213).show(250);$(".triangle-phone").css("left",$left_offset+10).show(250);$(".main-pad .pad-number").focus();h=!0});$(".padnum").on("callevent",function(b,g){var u=g instanceof Object?$(g).text().replace(/[^\d]/gi,""):t;u instanceof Object&&u.text().replace(/[^\d]/gi,"");u=u.toString();a&&$(".close-history").trigger("click");c||(!h||
a||c?h||($(".padnum").trigger("click"),$(".main-pad .pad-number").val(u),$("td.call").trigger("click",!0)):($(".main-pad .pad-number").val(u),$("td.call").trigger("click",!0)))});$(".action.close").on("click",function(){$("#phone-pad").hide(250);$(".triangle-phone").hide(250);h=!1});$(".action.history-call").on("click",function(){$(".main-pad").hide(100);$(".history-pad").show(100);$("#phone-pad").animate({height:"350px",width:"470px"});a=!0;ajaxRequest({data:"map=advancedcalls-PhonePad-history&action=click"})});
$(".close-history").on("click",function(){$(".main-pad").show(100);$(".history-pad").hide(100);$("input.search-input").val("");a=!1;$("#phone-pad").animate({height:"260px",width:"260px"})});$(".a-numpad").on("click","table tbody tr td:not(.action, .call)",function(){if(16!=$(".pad-number").val().length){$key=$(this).text();var a=null;$(".pad-number").val(function(b,c){if($(this).val().length==$(this)[0].selectionStart)return c+$key;a=$(this)[0].selectionStart;return c.substr(0,$(this)[0].selectionStart)+
$key+c.substr($(this)[0].selectionStart,c.length)});null!=a?($(".pad-number").focus(),$(".pad-number")[0].setSelectionRange(a+1,a+1)):$(".pad-number").focus()}});$(".pad-number").on("keydown",function(a){13==a.keyCode&&$("td.call").click();46==a.keyCode||8==a.keyCode||9==a.keyCode||27==a.keyCode||65==a.keyCode&&!0===a.ctrlKey||88==a.keyCode&&!0===a.ctrlKey||67==a.keyCode&&!0===a.ctrlKey||86==a.keyCode&&!0===a.ctrlKey||45==a.keyCode&&!0===a.shiftKey||35<=a.keyCode&&39>=a.keyCode||(48>a.keyCode||57<
a.keyCode)&&(96>a.keyCode||105<a.keyCode)&&a.preventDefault()});$("input.search-input").on("keydown",function(a){13==a.keyCode&&ajaxRequest({data:"map=advancedcalls-PhonePad-history_search&action=find&data[val]="+$(this).val()});46==a.keyCode||8==a.keyCode||9==a.keyCode||27==a.keyCode||65==a.keyCode&&!0===a.ctrlKey||88==a.keyCode&&!0===a.ctrlKey||67==a.keyCode&&!0===a.ctrlKey||86==a.keyCode&&!0===a.ctrlKey||45==a.keyCode&&!0===a.shiftKey||35<=a.keyCode&&39>=a.keyCode||(48>a.keyCode||57<a.keyCode)&&
(96>a.keyCode||105<a.keyCode)&&a.preventDefault()});$(".phone-backspace").on("click",function(){$(".pad-number").val(function(a,b){return b.substr(0,b.length-1)})});$("td.call").on("click",function(a,g){$phone=$(".main-pad .pad-number");$phone.val($phone.val().replace(/[^\d]/gi,""));0<$phone.val().length&&$.isNumeric($phone.val())?($(".main-pad").hide(100),$(".call-pad").show(100),$("#phone-pad").animate({height:"125px"}),$phone.css("border-color","rgba(128, 128, 128, 0.32)"),$(".call-pad #number-call").text($phone.val()),
!0!==g&&$("html").ui_phoneip("on_call_click",$phone.val()),$("span#status-text").text("\u041d\u0430\u0431\u043e\u0440 \u043d\u043e\u043c\u0435\u0440\u0430").show(),c=!0,ajaxRequest({data:"action=click&map=advancedcalls-PhonePad-call&data[phone]="+$phone.val()}),$("div#status-call").on("loadstatus",function(a){$("span#status-text").hide();b()})):$phone.css("border-color","rgba(255, 0, 0, 0.67)")});$("button#cancel-call").on("cancelcall",function(){$(this).trigger("click")});$("button#cancel-call").on("click",
function(){a||($(".main-pad").show(100),$(".call-pad").hide(100),$("#phone-pad").animate({height:"260px"}),c=!1,g=!0)})});
